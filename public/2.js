(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"FvG+":function(t,e){(function(){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t,e){return t.fire("insertCustomChar",{chr:e})},n=function(t,n){var r=e(t,n).chr;t.execCommand("mceInsertContent",!1,r)},r=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(t){return t.settings.charmap},o=function(t){return t.settings.charmap_append},a=r.isArray,s=function(t){return a(t)?[].concat(function(t){return r.grep(t,(function(t){return a(t)&&2===t.length}))}(t)):"function"==typeof t?t():[]},u=function(t){return function(t,e){var n=i(t);n&&(e=s(n));var r=o(t);return r?[].concat(e).concat(s(r)):e}(t,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},c=function(t){return{getCharMap:function(){return u(t)},insertChar:function(e){n(t,e)}}},l=function(t){var e,n,r,i=Math.min(t.length,25),o=Math.ceil(t.length/i);for(e='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<o;r++){for(e+="<tr>",n=0;n<i;n++){var a=r*i+n;if(a<t.length){var s=t[a],u=parseInt(s[0],10),c=s?String.fromCharCode(u):"&nbsp;";e+='<td title="'+s[1]+'"><div tabindex="-1" title="'+s[1]+'" role="button" data-chr="'+u+'">'+c+"</div></td>"}else e+="<td />"}e+="</tr>"}return e+="</tbody></table>"},f=function(t){for(;t;){if("TD"===t.nodeName)return t;t=t.parentNode}},d=function(t){var e,r={type:"container",html:l(u(t)),onclick:function(r){var i=r.target;if(/^(TD|DIV)$/.test(i.nodeName)){var o=f(i).firstChild;if(o&&o.hasAttribute("data-chr")){var a=o.getAttribute("data-chr"),s=parseInt(a,10);isNaN(s)||n(t,String.fromCharCode(s)),r.ctrlKey||e.close()}}},onmouseover:function(t){var n=f(t.target);n&&n.firstChild?(e.find("#preview").text(n.firstChild.firstChild.data),e.find("#previewTitle").text(n.title)):(e.find("#preview").text(" "),e.find("#previewTitle").text(" "))}};e=t.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){e.close()}}]})},h=function(t){t.addCommand("mceShowCharmap",(function(){d(t)}))},m=function(t){t.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),t.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})};t.add("charmap",(function(t){return h(t),m(t),c(t)}))}()}).call(window)},JAFY:function(t,e){(function(){!function(t){"use strict";var e,n,r,i,o,a=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),u=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),c=tinymce.util.Tools.resolve("tinymce.util.VK"),l=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h=function(t){return t&&"BR"===t.nodeName},m=function(t){return t&&3===t.nodeType},g=function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)},p=function(t){return t&&/^(OL|UL)$/.test(t.nodeName)},v=function(t){return t&&/^(DT|DD)$/.test(t.nodeName)},b=function(t){return t&&/^(LI|DT|DD)$/.test(t.nodeName)},y=function(t){return t&&/^(TH|TD)$/.test(t.nodeName)},w=h,x=function(t,e){return e&&!!t.schema.getTextBlockElements()[e.nodeName]},C=function(t,e){return t&&t.nodeName in e},R=function(t,e){return!!h(e)&&!(!t.isBlock(e.nextSibling)||h(e.previousSibling))},S=function(t,e,n){var r=t.isEmpty(e);return!(n&&t.select("span[data-mce-type=bookmark]",e).length>0)&&r},_=function(t,e){return t.isChildOf(e,t.getRoot())},k=function(t,e){if(m(t))return{container:t,offset:e};var n=s.getNode(t,e);return m(n)?{container:n,offset:e>=t.childNodes.length?n.data.length:0}:n.previousSibling&&m(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&m(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:t,offset:e}},T=function(t){var e=t.cloneRange(),n=k(t.startContainer,t.startOffset);e.setStart(n.container,n.offset);var r=k(t.endContainer,t.endOffset);return e.setEnd(r.container,r.offset),e},E=d.DOM,N=function(t){var e={},n=function(n){var r,i,o;i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===i.nodeType&&(r=E.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(o=Math.min(o,i.childNodes.length-1),n?i.insertBefore(r,i.childNodes[o]):E.insertAfter(r,i.childNodes[o])):i.appendChild(r),i=r,o=0),e[n?"startContainer":"endContainer"]=i,e[n?"startOffset":"endOffset"]=o};return n(!0),t.collapsed||n(),e},O=function(t){function e(e){var n,r,i;n=i=t[e?"startContainer":"endContainer"],r=t[e?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(t){for(var e=t.parentNode.firstChild,n=0;e;){if(e===t)return n;1===e.nodeType&&"bookmark"===e.getAttribute("data-mce-type")||n++,e=e.nextSibling}return-1}(n),n=n.parentNode,E.remove(i),!n.hasChildNodes()&&E.isBlock(n)&&n.appendChild(E.create("br"))),t[e?"startContainer":"endContainer"]=n,t[e?"startOffset":"endOffset"]=r)}e(!0),e();var n=E.createRng();return n.setStart(t.startContainer,t.startOffset),t.endContainer&&n.setEnd(t.endContainer,t.endOffset),T(n)},D=function(){},A=function(t){return function(){return t}},P=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}},M=A(!1),H=A(!0),B=function(){return I},I=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:M,isSome:M,isNone:H,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:A(null),getOrUndefined:A(void 0),or:n,orThunk:e,map:B,each:D,bind:B,exists:M,forall:H,filter:B,equals:t,equals_:t,toArray:function(){return[]},toString:A("none()")};return Object.freeze&&Object.freeze(r),r}(),W=function(t){var e=A(t),n=function(){return i},r=function(e){return e(t)},i={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:H,isNone:M,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return W(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?i:I},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(M,(function(e){return n(t,e)}))}};return i},L={some:W,none:B,from:function(t){return null==t?I:W(t)}},z=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}},F=z("string"),U=z("array"),j=z("boolean"),q=z("function"),V=z("number"),Y=Array.prototype.slice,$=Array.prototype.push,X=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++){var o=t[i];r[i]=e(o,i)}return r},G=function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)},J=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];e(o,r)&&n.push(o)}return n},K=function(t,e,n){return G(t,(function(t){n=e(n,t)})),n},Q=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e(i,n))return L.some(i)}return L.none()},Z=function(t,e){return function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!U(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);$.apply(e,t[n])}return e}(X(t,e))},tt=function(t){return 0===t.length?L.none():L.some(t[0])},et=function(t){return 0===t.length?L.none():L.some(t[t.length-1])},nt=(q(Array.from)&&Array.from,void 0!==t.window?t.window:Function("return this;")()),rt=function(t,e){return function(t,e){for(var n=null!=e?e:nt,r=0;r<t.length&&null!=n;++r)n=n[t[r]];return n}(t.split("."),e)},it=function(t,e){var n=function(t,e){return rt(t,e)}(t,e);if(null==n)throw new Error(t+" not available on this browser");return n},ot=function(t){return function(t){return it("HTMLElement",t)}(rt("ownerDocument.defaultView",t)).prototype.isPrototypeOf(t)},at=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),st=function(t){var e=t.selection.getStart(!0);return t.dom.getParent(e,"OL,UL,DL",ct(t,e))},ut=function(t){var e=t.selection.getSelectedBlocks();return f.grep(function(t,e){var n=f.map(e,(function(e){var n=t.dom.getParent(e,"li,dd,dt",ct(t,e));return n||e}));return at.unique(n)}(t,e),(function(t){return b(t)}))},ct=function(t,e){var n=t.dom.getParents(e,"TD,TH");return n.length>0?n[0]:t.getBody()},lt=function(t,e){var n=t.dom.getParents(e,"ol,ul",ct(t,e));return et(n)},ft=function(t,e){var n=X(e,(function(e){return lt(t,e).getOr(e)}));return at.unique(n)},dt={isList:function(t){var e=st(t);return ot(e)},getParentList:st,getSelectedSubLists:function(t){var e=st(t),n=t.selection.getSelectedBlocks();return function(t,e){return t&&1===e.length&&e[0]===t}(e,n)?function(t){return f.grep(t.querySelectorAll("ol,ul,dl"),(function(t){return g(t)}))}(e):f.grep(n,(function(t){return g(t)&&e!==t}))},getSelectedListItems:ut,getClosestListRootElm:ct,getSelectedDlItems:function(t){return J(ut(t),v)},getSelectedListRoots:function(t){var e=function(t){var e=lt(t,t.selection.getStart()),n=J(t.selection.getSelectedBlocks(),p);return e.toArray().concat(n)}(t);return ft(t,e)}},ht=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:A(t)}},mt={fromHtml:function(e,n){var r=(n||t.document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw t.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return ht(r.childNodes[0])},fromTag:function(e,n){var r=(n||t.document).createElement(e);return ht(r)},fromText:function(e,n){var r=(n||t.document).createTextNode(e);return ht(r)},fromDom:ht,fromPoint:function(t,e,n){var r=t.dom();return L.from(r.elementFromPoint(e,n)).map(ht)}},gt=function(t,e,n){return t.isSome()&&e.isSome()?L.some(n(t.getOrDie(),e.getOrDie())):L.none()},pt=Object.keys,vt=function(){return it("Node")},bt=function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)},yt=function(t,e){return bt(t,e,vt().DOCUMENT_POSITION_CONTAINED_BY)},wt=function(){return xt(0,0)},xt=function(t,e){return{major:t,minor:e}},Ct={nu:xt,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?wt():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return xt(r(1),r(2))}(t,n)},unknown:wt},Rt=function(t,e){return function(){return e===t}},St=function(t){var e=t.current;return{current:e,version:t.version,isEdge:Rt("Edge",e),isChrome:Rt("Chrome",e),isIE:Rt("IE",e),isOpera:Rt("Opera",e),isFirefox:Rt("Firefox",e),isSafari:Rt("Safari",e)}},_t={unknown:function(){return St({current:void 0,version:Ct.unknown()})},nu:St,edge:A("Edge"),chrome:A("Chrome"),ie:A("IE"),opera:A("Opera"),firefox:A("Firefox"),safari:A("Safari")},kt=function(t,e){return function(){return e===t}},Tt=function(t){var e=t.current;return{current:e,version:t.version,isWindows:kt("Windows",e),isiOS:kt("iOS",e),isAndroid:kt("Android",e),isOSX:kt("OSX",e),isLinux:kt("Linux",e),isSolaris:kt("Solaris",e),isFreeBSD:kt("FreeBSD",e)}},Et={unknown:function(){return Tt({current:void 0,version:Ct.unknown()})},nu:Tt,windows:A("Windows"),ios:A("iOS"),android:A("Android"),linux:A("Linux"),osx:A("OSX"),solaris:A("Solaris"),freebsd:A("FreeBSD")},Nt=function(t,e){var n=String(e).toLowerCase();return Q(t,(function(t){return t.search(n)}))},Ot=function(t,e){return Nt(t,e).map((function(t){var n=Ct.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Dt=function(t,e){return Nt(t,e).map((function(t){var n=Ct.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},At=function(t,e){return-1!==t.indexOf(e)},Pt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Mt=function(t){return function(e){return At(e,t)}},Ht=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return At(t,"edge/")&&At(t,"chrome")&&At(t,"safari")&&At(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Pt],search:function(t){return At(t,"chrome")&&!At(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return At(t,"msie")||At(t,"trident")}},{name:"Opera",versionRegexes:[Pt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Mt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Mt("firefox")},{name:"Safari",versionRegexes:[Pt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(At(t,"safari")||At(t,"mobile/"))&&At(t,"applewebkit")}}],Bt=[{name:"Windows",search:Mt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return At(t,"iphone")||At(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Mt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Mt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Mt("linux"),versionRegexes:[]},{name:"Solaris",search:Mt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Mt("freebsd"),versionRegexes:[]}],It={browsers:A(Ht),oses:A(Bt)},Wt=function(t){var e=It.browsers(),n=It.oses(),r=Ot(e,t).fold(_t.unknown,_t.nu),i=Dt(n,t).fold(Et.unknown,Et.nu),o=function(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!r,o=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,s=r||o||a&&!0===/mobile/i.test(n),u=t.isiOS()||t.isAndroid(),c=u&&!s,l=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:A(r),isiPhone:A(i),isTablet:A(s),isPhone:A(c),isTouch:A(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:A(l)}}(i,r,t);return{browser:r,os:i,deviceType:o}},Lt={detect:(e=function(){var e=t.navigator.userAgent;return Wt(e)},r=!1,function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return r||(r=!0,n=e.apply(null,t)),n})},zt=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE,t.Node.DOCUMENT_NODE,t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE),Ft=(t.Node.TEXT_NODE,t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,zt),Ut=function(t,e){return t.dom()===e.dom()},jt=Lt.detect().browser.isIE()?function(t,e){return yt(t.dom(),e.dom())}:function(t,e){var n=t.dom(),r=e.dom();return n!==r&&n.contains(r)},qt=function(t,e){var n=t.dom();if(n.nodeType!==Ft)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Vt=function(t){return L.from(t.dom().parentNode).map(mt.fromDom)},Yt=function(t){return X(t.dom().childNodes,mt.fromDom)},$t=function(t,e){var n=t.dom().childNodes;return L.from(n[e]).map(mt.fromDom)},Xt=function(t){return $t(t,0)},Gt=function(t){return $t(t,t.dom().childNodes.length-1)},Jt=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}("element","offset"),function(t,e){Vt(t).each((function(n){n.dom().insertBefore(e.dom(),t.dom())}))}),Kt=function(t,e){t.dom().appendChild(e.dom())},Qt=function(t,e){G(e,(function(e){Kt(t,e)}))},Zt=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},te=function(t){return t.dom().nodeName.toLowerCase()},ee=(i=zt,function(t){return function(t){return t.dom().nodeType}(t)===i}),ne=function(e,n){var r=e.dom();!function(t,e){for(var n=pt(t),r=0,i=n.length;r<i;r++){var o=n[r];e(t[o],o)}}(n,(function(e,n){!function(e,n,r){if(!(F(r)||j(r)||V(r)))throw t.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")}(r,n,e)}))},re=function(t){return K(t.dom().attributes,(function(t,e){return t[e.name]=e.value,t}),{})},ie=function(e,n,r){if(!F(r))throw t.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);(function(t){return void 0!==t.style&&q(t.style.getPropertyValue)})(e)&&e.style.setProperty(n,r)},oe=function(t){return function(t,e){return mt.fromDom(t.dom().cloneNode(e))}(t,!0)},ae=function(t,e){var n=function(t,e){var n=mt.fromTag(e),r=re(t);return ne(n,r),n}(t,e);Jt(t,n);var r=Yt(t);return Qt(n,r),Zt(t),n},se=function(t,e){Kt(t.item,e.list)},ue=function(t,e){var n={list:mt.fromTag(e,t),item:mt.fromTag("li",t)};return Kt(n.list,n.item),n},ce=function(t,e,n){var r=e.slice(0,n.depth);return et(r).each((function(e){!function(t,e){Kt(t.list,e),t.item=e}(e,function(t,e,n){var r=mt.fromTag("li",t);return ne(r,e),Qt(r,n),r}(t,n.itemAttributes,n.content)),function(t,e){te(t.list)!==e.listType&&(t.list=ae(t.list,e.listType)),ne(t.list,e.listAttributes)}(e,n)})),r},le=function(t,e,n){var r,i=function(t,e,n){for(var r=[],i=0;i<n;i++)r.push(ue(t,e.listType));return r}(t,n,n.depth-e.length);return function(t){for(var e=1;e<t.length;e++)se(t[e-1],t[e])}(i),function(t,e){for(var n=0;n<t.length-1;n++)r=t[n].item,i="list-style-type",o="none",a=void 0,a=r.dom(),ie(a,i,o);var r,i,o,a;et(t).each((function(t){ne(t.list,e.listAttributes),ne(t.item,e.itemAttributes),Qt(t.item,e.content)}))}(i,n),r=i,gt(et(e),tt(r),se),e.concat(i)},fe=function(t){return qt(t,"OL,UL")},de=function(t){return Xt(t).map(fe).getOr(!1)},he=function(t){return t.depth>0},me=function(t){return t.isSelected},ge=function(t){var e=Yt(t),n=Gt(t).map(fe).getOr(!1)?e.slice(0,-1):e;return X(n,oe)},pe=Object.prototype.hasOwnProperty,ve=(o=function(t,e){return e},function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<t.length;r++){var i=t[r];for(var a in i)pe.call(i,a)&&(n[a]=o(n[a],i[a]))}return n}),be=function(t){G(t,(function(e,n){(function(t,e){for(var n=t[e].depth,r=e-1;r>=0;r--){if(t[r].depth===n)return L.some(t[r]);if(t[r].depth<n)break}return L.none()})(t,n).each((function(t){var n,r;r=t,(n=e).listType=r.listType,n.listAttributes=ve({},r.listAttributes)}))}))},ye=function(t){var e=t,n=function(){return e};return{get:n,set:function(t){e=t},clone:function(){return ye(n())}}},we=function(t,e,n,r){return Xt(r).filter(fe).fold((function(){e.each((function(t){Ut(t.start,r)&&n.set(!0)}));var i=function(t,e,n){return Vt(t).filter(ee).map((function(r){return{depth:e,isSelected:n,content:ge(t),itemAttributes:re(t),listAttributes:re(r),listType:te(r)}}))}(r,t,n.get());e.each((function(t){Ut(t.end,r)&&n.set(!1)}));var o=Gt(r).filter(fe).map((function(r){return xe(t,e,n,r)})).getOr([]);return i.toArray().concat(o)}),(function(r){return xe(t,e,n,r)}))},xe=function(t,e,n,r){return Z(Yt(r),(function(r){return(fe(r)?xe:we)(t+1,e,n,r)}))},Ce=tinymce.util.Tools.resolve("tinymce.Env"),Re=function(t,e){var n,r,i,o,a=t.dom,s=t.schema.getBlockElements(),u=a.createFragment();if(t.settings.forced_root_block&&(i=t.settings.forced_root_block),i&&((r=a.create(i)).tagName===t.settings.forced_root_block&&a.setAttribs(r,t.settings.forced_root_block_attrs),C(e.firstChild,s)||u.appendChild(r)),e)for(;n=e.firstChild;){var c=n.nodeName;o||"SPAN"===c&&"bookmark"===n.getAttribute("data-mce-type")||(o=!0),C(n,s)?(u.appendChild(n),r=null):i?(r||(r=a.create(i),u.appendChild(r)),r.appendChild(n)):u.appendChild(n)}return t.settings.forced_root_block?o||Ce.ie&&!(Ce.ie>10)||r.appendChild(a.create("br",{"data-mce-bogus":"1"})):u.appendChild(a.create("br")),u},Se=function(e,n){return X(n,(function(n){var r,i,o,a=(r=n.content,o=(i||t.document).createDocumentFragment(),G(r,(function(t){o.appendChild(t.dom())})),mt.fromDom(o));return mt.fromDom(Re(e,a.dom()))}))},_e=function(t,e){return be(e),function(t,e){var n=K(e,(function(e,n){return n.depth>e.length?le(t,e,n):ce(t,e,n)}),[]);return tt(n).map((function(t){return t.list}))}(t.contentDocument,e).toArray()},ke=function(t){var e=X(dt.getSelectedListItems(t),mt.fromDom);return gt(Q(e,P(de)),Q(function(t){var e=Y.call(t,0);return e.reverse(),e}(e),P(de)),(function(t,e){return{start:t,end:e}}))},Te=function(t,e,n){var r=function(t,e){var n=ye(!1);return X(t,(function(t){return{sourceList:t,entries:xe(0,e,n,t)}}))}(e,ke(t));G(r,(function(e){var r,i;!function(t,e){G(J(t,me),(function(t){return function(t,e){switch(t){case"Indent":e.depth++;break;case"Outdent":e.depth--;break;case"Flatten":e.depth=0}}(e,t)}))}(e.entries,n),r=e.sourceList,i=function(t,e){return Z(function(t,e){if(0===t.length)return[];for(var n=e(t[0]),r=[],i=[],o=0,a=t.length;o<a;o++){var s=t[o],u=e(s);u!==n&&(r.push(i),i=[]),n=u,i.push(s)}return 0!==i.length&&r.push(i),r}(e,he),(function(e){return tt(e).map(he).getOr(!1)?_e(t,e):Se(t,e)}))}(t,e.entries),G(i,(function(t){Jt(r,t)})),Zt(e.sourceList)}))},Ee=d.DOM,Ne=function(t,e,n){var r,i,o,a,s,u;for(o=Ee.select('span[data-mce-type="bookmark"]',e),s=Re(t,n),(r=Ee.createRng()).setStartAfter(n),r.setEndAfter(e),a=(i=r.extractContents()).firstChild;a;a=a.firstChild)if("LI"===a.nodeName&&t.dom.isEmpty(a)){Ee.remove(a);break}t.dom.isEmpty(i)||Ee.insertAfter(i,e),Ee.insertAfter(s,e),S(t.dom,n.parentNode)&&(u=n.parentNode,f.each(o,(function(t){u.parentNode.insertBefore(t,n.parentNode)})),Ee.remove(u)),Ee.remove(n),S(t.dom,e)&&Ee.remove(e)},Oe=function(t){qt(t,"dt")&&ae(t,"dd")},De=function(t,e,n){G(n,"Indent"===e?Oe:function(e){return function(t,e){qt(e,"dd")?ae(e,"dt"):qt(e,"dt")&&Vt(e).each((function(n){return Ne(t,n.dom(),e.dom())}))}(t,e)})},Ae=function(t,e){var n=X(dt.getSelectedListRoots(t),mt.fromDom),r=X(dt.getSelectedDlItems(t),mt.fromDom),i=!1;if(n.length||r.length){var o=t.selection.getBookmark();Te(t,n,e),De(t,e,r),t.selection.moveToBookmark(o),t.selection.setRng(T(t.selection.getRng())),t.nodeChanged(),i=!0}return i},Pe=function(t){return Ae(t,"Indent")},Me=function(t){return Ae(t,"Outdent")},He=function(t){return Ae(t,"Flatten")},Be=function(t,e){f.each(e,(function(e,n){t.setAttribute(n,e)}))},Ie=function(t,e,n){!function(t,e,n){var r=n["list-style-type"]?n["list-style-type"]:null;t.setStyle(e,"list-style-type",r)}(t,e,n),function(t,e,n){Be(e,n["list-attributes"]),f.each(t.select("li",e),(function(t){Be(t,n["list-item-attributes"])}))}(t,e,n)},We=function(t,e,n,r){var i,o;for(i=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"],1===i.nodeType&&(i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i),!n&&w(i.nextSibling)&&(i=i.nextSibling);i.parentNode!==r;){if(x(t,i))return i;if(/^(TD|TH)$/.test(i.parentNode.nodeName))return i;i=i.parentNode}return i},Le=function(t,e,n){void 0===n&&(n={});var r,i=t.selection.getRng(!0),o="LI",a=dt.getClosestListRootElm(t,t.selection.getStart(!0)),s=t.dom;"false"!==s.getContentEditable(t.selection.getNode())&&("DL"===(e=e.toUpperCase())&&(o="DT"),r=N(i),f.each(function(t,e,n){for(var r,i=[],o=t.dom,a=We(t,e,!0,n),s=We(t,e,!1,n),u=[],c=a;c&&(u.push(c),c!==s);c=c.nextSibling);return f.each(u,(function(e){if(x(t,e))return i.push(e),void(r=null);if(o.isBlock(e)||w(e))return w(e)&&o.remove(e),void(r=null);var a=e.nextSibling;l.isBookmarkNode(e)&&(x(t,a)||!a&&e.parentNode===n)?r=null:(r||(r=o.create("p"),e.parentNode.insertBefore(r,e),i.push(r)),r.appendChild(e))})),i}(t,i,a),(function(r){var i,a;(a=r.previousSibling)&&g(a)&&a.nodeName===e&&function(t,e,n){var r=t.getStyle(e,"list-style-type"),i=n?n["list-style-type"]:"";return r===(i=null===i?"":i)}(s,a,n)?(i=a,r=s.rename(r,o),a.appendChild(r)):(i=s.create(e),r.parentNode.insertBefore(i,r),i.appendChild(r),r=s.rename(r,o)),function(t,e,n){f.each(n,(function(n){var r;return t.setStyle(e,((r={})[n]="",r))}))}(s,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Ie(s,i,n),Fe(t.dom,i)})),t.selection.setRng(O(r)))},ze=function(t,e,n){return function(t,e){return t&&e&&g(t)&&t.nodeName===e.nodeName}(e,n)&&function(t,e,n){return t.getStyle(e,"list-style-type",!0)===t.getStyle(n,"list-style-type",!0)}(t,e,n)&&(r=n,e.className===r.className);var r},Fe=function(t,e){var n,r;if(n=e.nextSibling,ze(t,e,n)){for(;r=n.firstChild;)e.appendChild(r);t.remove(n)}if(n=e.previousSibling,ze(t,e,n)){for(;r=n.lastChild;)e.insertBefore(r,e.firstChild);t.remove(n)}},Ue=function(t,e,n,r,i){if(e.nodeName!==r||je(i)){var o=N(t.selection.getRng(!0));f.each([e].concat(n),(function(e){!function(t,e,n,r){if(e.nodeName!==n){var i=t.rename(e,n);Ie(t,i,r)}else Ie(t,e,r)}(t.dom,e,r,i)})),t.selection.setRng(O(o))}else He(t)},je=function(t){return"list-style-type"in t},qe={toggleList:function(t,e,n){var r=dt.getParentList(t),i=dt.getSelectedSubLists(t);n=n||{},r&&i.length>0?Ue(t,r,i,e,n):function(t,e,n,r){if(e!==t.getBody())if(e)if(e.nodeName!==n||je(r)){var i=N(t.selection.getRng(!0));Ie(t.dom,e,r),Fe(t.dom,t.dom.rename(e,n)),t.selection.setRng(O(i))}else He(t);else Le(t,n,r)}(t,r,e,n)},mergeWithAdjacentLists:Fe},Ve=d.DOM,Ye=function(t,e){var n,r=e.parentNode;"LI"===r.nodeName&&r.firstChild===e&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(e),S(t,r)&&Ve.remove(r)):Ve.setStyle(r,"listStyleType","none")),g(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(e)},$e=function(t,e){f.each(f.grep(t.select("ol,ul",e)),(function(e){Ye(t,e)}))},Xe=function(t,e,n,r){var i,o,a=e.startContainer,c=e.startOffset;if(3===a.nodeType&&(n?c<a.data.length:c>0))return a;for(i=t.schema.getNonEmptyElements(),1===a.nodeType&&(a=s.getNode(a,c)),o=new u(a,r),n&&R(t.dom,a)&&o.next();a=o[n?"next":"prev2"]();){if("LI"===a.nodeName&&!a.hasChildNodes())return a;if(i[a.nodeName])return a;if(3===a.nodeType&&a.data.length>0)return a}},Ge=function(t,e){var n=e.childNodes;return 1===n.length&&!g(n[0])&&t.isBlock(n[0])},Je=function(t,e,n){var r,i;if(i=Ge(t,n)?n.firstChild:n,function(t,e){Ge(t,e)&&t.remove(e.firstChild,!0)}(t,e),!S(t,e,!0))for(;r=e.firstChild;)i.appendChild(r)},Ke=function(t,e,n){var r,i,o=e.parentNode;if(_(t,e)&&_(t,n)){g(n.lastChild)&&(i=n.lastChild),o===n.lastChild&&w(o.previousSibling)&&t.remove(o.previousSibling),(r=n.lastChild)&&w(r)&&e.hasChildNodes()&&t.remove(r),S(t,n,!0)&&t.$(n).empty(),Je(t,e,n),i&&n.appendChild(i);var a=jt(mt.fromDom(n),mt.fromDom(e))?t.getParents(e,g,n):[];t.remove(e),G(a,(function(e){S(t,e)&&e!==t.getRoot()&&t.remove(e)}))}},Qe=function(t,e,n,r){var i=t.dom;if(i.isEmpty(r))!function(t,e,n){t.dom.$(n).empty(),Ke(t.dom,e,n),t.selection.setCursorLocation(n)}(t,n,r);else{var o=N(e);Ke(i,n,r),t.selection.setRng(O(o))}},Ze=function(t,e){var n,r,i,o=t.dom,a=t.selection,s=a.getStart(),u=dt.getClosestListRootElm(t,s),c=o.getParent(a.getStart(),"LI",u);if(c){if((n=c.parentNode)===t.getBody()&&S(o,n))return!0;if(r=T(a.getRng(!0)),(i=o.getParent(Xe(t,r,e,u),"LI",u))&&i!==c)return e?Qe(t,r,i,c):function(t,e,n,r){var i=N(e);Ke(t.dom,n,r);var o=O(i);t.selection.setRng(o)}(t,r,c,i),!0;if(!i&&!e)return He(t),!0}return!1},tn=function(t,e){return Ze(t,e)||function(t,e){var n=t.dom,r=t.selection.getStart(),i=dt.getClosestListRootElm(t,r),o=n.getParent(r,n.isBlock,i);if(o&&n.isEmpty(o)){var a=T(t.selection.getRng(!0)),s=n.getParent(Xe(t,a,e,i),"LI",i);if(s)return t.undoManager.transact((function(){!function(t,e,n){var r=t.getParent(e.parentNode,t.isBlock,n);t.remove(e),r&&t.isEmpty(r)&&t.remove(r)}(n,o,i),qe.mergeWithAdjacentLists(n,s.parentNode),t.selection.select(s,!0),t.selection.collapse(e)})),!0}return!1}(t,e)},en=function(t,e){return t.selection.isCollapsed()?tn(t,e):function(t){var e=t.selection.getStart(),n=dt.getClosestListRootElm(t,e);return!!(t.dom.getParent(e,"LI,DT,DD",n)||dt.getSelectedListItems(t).length>0)&&(t.undoManager.transact((function(){t.execCommand("Delete"),$e(t.dom,t.getBody())})),!0)}(t)},nn=function(t){t.on("keydown",(function(e){e.keyCode===c.BACKSPACE?en(t,!1)&&e.preventDefault():e.keyCode===c.DELETE&&en(t,!0)&&e.preventDefault()}))},rn=en,on=function(t){return{backspaceDelete:function(e){rn(t,e)}}},an=function(t,e){return function(){var n=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===e}},sn=function(t){t.on("BeforeExecCommand",(function(e){var n=e.command.toLowerCase();"indent"===n?Pe(t):"outdent"===n&&Me(t)})),t.addCommand("InsertUnorderedList",(function(e,n){qe.toggleList(t,"UL",n)})),t.addCommand("InsertOrderedList",(function(e,n){qe.toggleList(t,"OL",n)})),t.addCommand("InsertDefinitionList",(function(e,n){qe.toggleList(t,"DL",n)})),t.addCommand("RemoveList",(function(){He(t)})),t.addQueryStateHandler("InsertUnorderedList",an(t,"UL")),t.addQueryStateHandler("InsertOrderedList",an(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",an(t,"DL"))},un=function(t){return t.getParam("lists_indent_on_tab",!0)},cn=function(t){un(t)&&function(t){t.on("keydown",(function(e){e.keyCode!==c.TAB||c.metaKeyPressed(e)||t.undoManager.transact((function(){(e.shiftKey?Me(t):Pe(t))&&e.preventDefault()}))}))}(t),nn(t)},ln=function(t,e){return function(n){var r=n.control;t.on("NodeChange",(function(t){var n=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}(t.parents,y),i=-1!==n?t.parents.slice(0,n):t.parents,o=f.grep(i,g);r.active(o.length>0&&o[0].nodeName===e)}))}},fn=function(t){(function(t,e){var n=t.settings.plugins?t.settings.plugins:"";return-1!==f.inArray(n.split(/[ ,]/),e)})(t,"advlist")||(t.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:ln(t,"OL")}),t.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:ln(t,"UL")})),t.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent"})};a.add("lists",(function(t){return cn(t),fn(t),sn(t),on(t)}))}(window)}).call(window)},eROu:function(t,e){(function(){!function(t){"use strict";var e,n,r,i,o=tinymce.util.Tools.resolve("tinymce.ThemeManager"),a=tinymce.util.Tools.resolve("tinymce.EditorManager"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=function(t){return!1!==c(t)},c=function(t){return t.getParam("menubar")},l=function(t){return t.getParam("toolbar_items_size")},f=function(t){return t.getParam("menu")},d=function(t){return!1===t.settings.skin},h=function(t){var e=t.getParam("resize","vertical");return!1===e?"none":"both"===e?"both":"vertical"},m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),g=tinymce.util.Tools.resolve("tinymce.ui.Factory"),p=tinymce.util.Tools.resolve("tinymce.util.I18n"),v=function(t){return t.fire("SkinLoaded")},b=function(t){return t.fire("ResizeEditor")},y=function(t){return t.fire("BeforeRenderUI")},w=function(t,e){return function(){var n=t.find(e)[0];n&&n.focus(!0)}},x=function(t,e){t.shortcuts.add("Alt+F9","",w(e,"menubar")),t.shortcuts.add("Alt+F10,F10","",w(e,"toolbar")),t.shortcuts.add("Alt+F11","",w(e,"elementpath")),e.on("cancel",(function(){t.focus()}))},C=tinymce.util.Tools.resolve("tinymce.geom.Rect"),R=tinymce.util.Tools.resolve("tinymce.util.Delay"),S=function(){},_=function(t){return function(){return t}},k=_(!1),T=_(!0),E=function(){return N},N=(e=function(t){return t.isNone()},i={fold:function(t,e){return t()},is:k,isSome:k,isNone:T,getOr:r=function(t){return t},getOrThunk:n=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:_(null),getOrUndefined:_(void 0),or:r,orThunk:n,map:E,each:S,bind:E,exists:k,forall:T,filter:E,equals:e,equals_:e,toArray:function(){return[]},toString:_("none()")},Object.freeze&&Object.freeze(i),i),O=function(t){var e=_(t),n=function(){return i},r=function(e){return e(t)},i={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:T,isNone:k,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return O(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?i:N},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(k,(function(e){return n(t,e)}))}};return i},D={some:O,none:E,from:function(t){return null==t?N:O(t)}},A=function(t){return t?t.getRoot().uiContainer:null},P={getUiContainerDelta:function(t){var e=A(t);if(e&&"static"!==m.DOM.getStyle(e,"position",!0)){var n=m.DOM.getPos(e),r=e.scrollLeft-n.x,i=e.scrollTop-n.y;return D.some({x:r,y:i})}return D.none()},setUiContainer:function(t,e){var n=m.DOM.select(t.settings.ui_container)[0];e.getRoot().uiContainer=n},getUiContainer:A,inheritUiContainer:function(t,e){return e.uiContainer=A(t)}},M=function(t,e,n){var r,i=[];if(e)return s.each(e.split(/[ ,]/),(function(e){var o,a=function(){var n=t.selection;e.settings.stateSelector&&n.selectorChanged(e.settings.stateSelector,(function(t){e.active(t)}),!0),e.settings.disabledStateSelector&&n.selectorChanged(e.settings.disabledStateSelector,(function(t){e.disabled(t)}))};"|"===e?r=null:(r||(r={type:"buttongroup",items:[]},i.push(r)),t.buttons[e]&&(o=e,"function"==typeof(e=t.buttons[o])&&(e=e()),e.type=e.type||"button",e.size=n,e=g.create(e),r.items.push(e),t.initialized?a():t.on("init",a)))})),{type:"toolbar",layout:"flow",items:i}},H=M,B=function(t,e){var n=[];if(s.each(function(t){var e=t.getParam("toolbar");return!1===e?[]:s.isArray(e)?s.grep(e,(function(t){return t.length>0})):function(t,e){for(var n=[],r=1;r<10;r++){var i=t["toolbar"+r];if(!i)break;n.push(i)}var o=t.toolbar?[t.toolbar]:[e];return n.length>0?n:o}(t.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image")}(t),(function(r){var i;(i=r)&&n.push(M(t,i,e))})),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},I=m.DOM,W=function(t){return{left:t.x,top:t.y,width:t.w,height:t.h,right:t.x+t.w,bottom:t.y+t.h}},L=function(t,e){t.moveTo(e.left,e.top)},z=function(t,e,n,r,i,o){return o=W({x:e,y:n,w:o.w,h:o.h}),t&&(o=t({elementRect:W(r),contentAreaRect:W(i),panelRect:o})),o},F=function(t){var e,n=function(){return t.contextToolbars||[]},r=function(e,n){var r,i,o,a,u,c,l,f=function(t){return t.getParam("inline_toolbar_position_handler")}(t);if(!t.removed)if(e&&e.toolbar.panel){var d,h,m,g;l=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],u=e.toolbar.panel,n&&u.show(),d=e.element,h=I.getPos(t.getContentAreaContainer()),m=t.dom.getRect(d),"BODY"===(g=t.dom.getRoot()).nodeName&&(m.x-=g.ownerDocument.documentElement.scrollLeft||g.scrollLeft,m.y-=g.ownerDocument.documentElement.scrollTop||g.scrollTop),m.x+=h.x,m.y+=h.y,o=m,i=I.getRect(u.getEl()),a=I.getRect(t.getContentAreaContainer()||t.getBody());var p=P.getUiContainerDelta(u).getOr({x:0,y:0});if(o.x+=p.x,o.y+=p.y,i.x+=p.x,i.y+=p.y,a.x+=p.x,a.y+=p.y,"inline"!==I.getStyle(e.element,"display",!0)){var v=e.element.getBoundingClientRect();o.w=v.width,o.h=v.height}t.inline||(a.w=t.getDoc().documentElement.offsetWidth),t.selection.controlSelection.isResizable(e.element)&&o.w<25&&(o=C.inflate(o,0,8)),r=C.findBestRelativePosition(i,o,a,l),o=C.clamp(o,a),r?(c=C.relativePosition(i,o,r),L(u,z(f,c.x,c.y,o,a,i))):(a.h+=i.h,(o=C.intersect(a,o))?(r=C.findBestRelativePosition(i,o,a,["bc-tc","bl-tl","br-tr"]))?(c=C.relativePosition(i,o,r),L(u,z(f,c.x,c.y,o,a,i))):L(u,z(f,o.x,o.y,o,a,i)):u.hide()),function(t,e,n){e=e?e.substr(0,2):"",s.each({t:"down",b:"up"},(function(r,i){t.classes.toggle("arrow-"+r,n(i,e.substr(0,1)))})),s.each({l:"left",r:"right"},(function(r,i){t.classes.toggle("arrow-"+r,n(i,e.substr(1,1)))}))}(u,r,(function(t,e){return t===e}))}else!function(t){s.each(t.contextToolbars,(function(t){t.panel&&t.panel.hide()}))}(t)},i=function(e){return function(){R.requestAnimationFrame((function(){t.selection&&r(u(t.selection.getNode()),e)}))}},o=function(n){var o;if(n.toolbar.panel)return n.toolbar.panel.show(),void r(n);o=g.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:H(t,n.toolbar.items),oncancel:function(){t.focus()}}),P.setUiContainer(t,o),function(n){if(!e){var r=i(!0),o=P.getUiContainer(n);e=t.selection.getScrollContainer()||t.getWin(),I.bind(e,"scroll",r),I.bind(o,"scroll",r),t.on("remove",(function(){I.unbind(e,"scroll",r),I.unbind(o,"scroll",r)}))}}(o),n.toolbar.panel=o,o.renderTo().reflow(),r(n)},a=function(){s.each(n(),(function(t){t.panel&&t.panel.hide()}))},u=function(e){var r,i,o,a=n();for(r=(o=t.$(e).parents().add(e)).length-1;r>=0;r--)for(i=a.length-1;i>=0;i--)if(a[i].predicate(o[r]))return{toolbar:a[i],element:o[r]};return null};t.on("click keyup setContent ObjectResized",(function(e){("setcontent"!==e.type||e.selection)&&R.setEditorTimeout(t,(function(){var e;(e=u(t.selection.getNode()))?(a(),o(e)):a()}))})),t.on("blur hide contextmenu",a),t.on("ObjectResizeStart",(function(){var e=u(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()})),t.on("ResizeEditor ResizeWindow",i(!0)),t.on("nodeChange",i(!1)),t.on("remove",(function(){s.each(n(),(function(t){t.panel&&t.panel.remove()})),t.contextToolbars={}})),t.shortcuts.add("ctrl+F9","",(function(){var e=u(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()}))},U=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}},j=U("array"),q=U("function"),V=U("number"),Y=(Array.prototype.slice,Array.prototype.indexOf),$=Array.prototype.push,X=function(t,e){var n,r,i=(n=t,r=e,Y.call(n,r));return-1===i?D.none():D.some(i)},G=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},J=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++){var o=t[i];r[i]=e(o,i)}return r},K=function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)},Q=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];e(o,r)&&n.push(o)}return n},Z=(q(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),tt=function(t,e){return"|"===t?{name:"|",item:{text:"|"}}:e?{name:t,item:e}:null},et=function(t,e){return function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n))return D.some(n);return D.none()}(t,(function(t){return t.name===e})).isSome()},nt=function(t){return t&&"|"===t.item.text},rt=function(t,e,n,r){var i,o,a,u;return e?(o=e[r],u=!0):o=Z[r],o&&(i={text:o.title},a=[],s.each((o.items||"").split(/[ ,]/),(function(e){var n=tt(e,t[e]);n&&a.push(n)})),u||s.each(t,(function(t,e){t.context!==r||et(a,e)||("before"===t.separator&&a.push({name:"|",item:{text:"|"}}),t.prependToContext?a.unshift(tt(e,t)):a.push(tt(e,t)),"after"===t.separator&&a.push({name:"|",item:{text:"|"}}))})),i.menu=J(function(t,e){var n=Q(t,(function(t){return!1===e.hasOwnProperty(t.name)})),r=Q(n,(function(t,e){return!nt(t)||!nt(n[e-1])}));return Q(r,(function(t,e){return!nt(t)||e>0&&e<r.length-1}))}(a,n),(function(t){return t.item})),!i.menu.length)?null:i},it=function(t){for(var e=[],n=function(t){var e,n=[],r=f(t);if(r)for(e in r)n.push(e);else for(e in Z)n.push(e);return n}(t),r=s.makeMap(function(t){return t.getParam("removed_menuitems","")}(t).split(/[ ,]/)),i=c(t),o="string"==typeof i?i.split(/[ ,]/):n,a=0;a<o.length;a++){var u=o[a],l=rt(t.menuItems,f(t),r,u);l&&e.push(l)}return e},ot=m.DOM,at=function(t){return{width:t.clientWidth,height:t.clientHeight}},st=function(t,e,n){var r,i,o,a;r=t.getContainer(),i=t.getContentAreaContainer().firstChild,o=at(r),a=at(i),null!==e&&(e=Math.max(function(t){return t.getParam("min_width",100,"number")}(t),e),e=Math.min(function(t){return t.getParam("max_width",65535,"number")}(t),e),ot.setStyle(r,"width",e+(o.width-a.width)),ot.setStyle(i,"width",e)),n=Math.max(function(t){return t.getParam("min_height",100,"number")}(t),n),n=Math.min(function(t){return t.getParam("max_height",65535,"number")}(t),n),ot.setStyle(i,"height",n),b(t)},ut=st,ct=function(t,e,n){var r=t.getContentAreaContainer();st(t,r.clientWidth+e,r.clientHeight+n)},lt=tinymce.util.Tools.resolve("tinymce.Env"),ft=function(t,e,n){var r,i=t.settings[n];i&&i((r=e.getEl("body"),{element:function(){return r}}))},dt=function(t,e,n){return function(r){var i=r.control,o=i.parents().filter("panel")[0],a=o.find("#"+e)[0],u=function(t,e){return s.grep(t,(function(t){return t.name===e}))[0]}(n,e);!function(t,e,n){s.each(n,(function(n){var r=e.items().filter("#"+n.name)[0];r&&r.visible()&&n.name!==t&&(ft(n,r,"onhide"),r.visible(!1))}))}(e,o,n),i.parent().items().each((function(t){t.active(!1)})),a&&a.visible()?(ft(u,a,"onhide"),a.hide(),i.active(!1)):(a?(a.show(),ft(u,a,"onshow")):(a=g.create({type:"container",name:e,layout:"stack",classes:"sidebar-panel",html:""}),o.prepend(a),ft(u,a,"onrender"),ft(u,a,"onshow")),i.active(!0)),b(t)}},ht=function(t){return!(lt.ie&&!(lt.ie>=11)||!t.sidebars)&&t.sidebars.length>0},mt=function(t){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:s.map(t.sidebars,(function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:dt(t,e.name,t.sidebars)}}))}]}},gt=function(t){var e=function(){t._skinLoaded=!0,v(t)};return function(){t.initialized?e():t.on("init",e)}},pt=m.DOM,vt=function(t){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:t,html:""}},bt=function(t){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[vt("0"),mt(t)]}},yt=function(t,e,n){var r,i,o;if(!1===d(t)&&n.skinUiCss?pt.styleSheetLoader.load(n.skinUiCss,gt(t)):gt(t)(),r=e.panel=g.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===u(t)?null:{type:"menubar",border:"0 0 1 0",items:it(t)},B(t,l(t))]},ht(t)?bt(t):vt("1 0 0 0")]}),P.setUiContainer(t,r),"none"!==h(t)&&(i={type:"resizehandle",direction:h(t),onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;o={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"===h(t)?ut(t,o.width+e.deltaX,o.height+e.deltaY):ut(t,null,o.height+e.deltaY)}}),function(t){return t.getParam("statusbar",!0,"boolean")}(t)){var a=p.translate(["Powered by {0}",'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">Tiny</a>']),s=function(t){return t.getParam("branding",!0,"boolean")}(t)?{type:"label",classes:"branding",html:" "+a}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:t},i,s]})}return y(t),t.on("SwitchMode",function(t){return function(e){t.find("*").disabled("readonly"===e.mode)}}(r)),r.renderBefore(n.targetNode).reflow(),function(t){return t.getParam("readonly",!1,"boolean")}(t)&&t.setMode("readonly"),n.width&&pt.setStyle(r.getEl(),"width",n.width),t.on("remove",(function(){r.remove(),r=null})),x(t,r),F(t),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},wt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),xt=0,Ct={id:function(){return"mceu_"+xt++},create:function(e,n,r){var i=t.document.createElement(e);return m.DOM.setAttribs(i,n),"string"==typeof r?i.innerHTML=r:s.each(r,(function(t){t.nodeType&&i.appendChild(t)})),i},createFragment:function(t){return m.DOM.createFragment(t)},getWindowSize:function(){return m.DOM.getViewPort()},getSize:function(t){var e,n;if(t.getBoundingClientRect){var r=t.getBoundingClientRect();e=Math.max(r.width||r.right-r.left,t.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,t.offsetHeight)}else e=t.offsetWidth,n=t.offsetHeight;return{width:e,height:n}},getPos:function(t,e){return m.DOM.getPos(t,e||Ct.getContainer())},getContainer:function(){return lt.container?lt.container:t.document.body},getViewPort:function(t){return m.DOM.getViewPort(t)},get:function(e){return t.document.getElementById(e)},addClass:function(t,e){return m.DOM.addClass(t,e)},removeClass:function(t,e){return m.DOM.removeClass(t,e)},hasClass:function(t,e){return m.DOM.hasClass(t,e)},toggleClass:function(t,e,n){return m.DOM.toggleClass(t,e,n)},css:function(t,e,n){return m.DOM.setStyle(t,e,n)},getRuntimeStyle:function(t,e){return m.DOM.getStyle(t,e,!0)},on:function(t,e,n,r){return m.DOM.bind(t,e,n,r)},off:function(t,e,n){return m.DOM.unbind(t,e,n)},fire:function(t,e,n){return m.DOM.fire(t,e,n)},innerHtml:function(t,e){m.DOM.setHTML(t,e)}},Rt=function(t){return"static"===Ct.getRuntimeStyle(t,"position")},St=function(t){return t.state.get("fixed")};function _t(e,n,r){var i,o,a,s,u,c,l,f,d,h;return d=kt(),a=(o=Ct.getPos(n,P.getUiContainer(e))).x,s=o.y,St(e)&&Rt(t.document.body)&&(a-=d.x,s-=d.y),i=e.getEl(),u=(h=Ct.getSize(i)).width,c=h.height,l=(h=Ct.getSize(n)).width,f=h.height,"b"===(r=(r||"").split(""))[0]&&(s+=f),"r"===r[1]&&(a+=l),"c"===r[0]&&(s+=Math.round(f/2)),"c"===r[1]&&(a+=Math.round(l/2)),"b"===r[3]&&(s-=c),"r"===r[4]&&(a-=u),"c"===r[3]&&(s-=Math.round(c/2)),"c"===r[4]&&(a-=Math.round(u/2)),{x:a,y:s,w:u,h:c}}var kt=function(){var e=t.window;return{x:Math.max(e.pageXOffset,t.document.body.scrollLeft,t.document.documentElement.scrollLeft),y:Math.max(e.pageYOffset,t.document.body.scrollTop,t.document.documentElement.scrollTop),w:e.innerWidth||t.document.documentElement.clientWidth,h:e.innerHeight||t.document.documentElement.clientHeight}},Tt=function(t){var e=P.getUiContainer(t);return e&&!St(t)?function(t){return{x:0,y:0,w:t.scrollWidth-1,h:t.scrollHeight-1}}(e):kt()},Et={testMoveRel:function(t,e){for(var n=Tt(this),r=0;r<e.length;r++){var i=_t(this,t,e[r]);if(St(this)){if(i.x>0&&i.x+i.w<n.w&&i.y>0&&i.y+i.h<n.h)return e[r]}else if(i.x>n.x&&i.x+i.w<n.w+n.x&&i.y>n.y&&i.y+i.h<n.h+n.y)return e[r]}return e[0]},moveRel:function(t,e){"string"!=typeof e&&(e=this.testMoveRel(t,e));var n=_t(this,t,e);return this.moveTo(n.x,n.y)},moveBy:function(t,e){var n=this.layoutRect();return this.moveTo(n.x+t,n.y+e),this},moveTo:function(t,e){function n(t,e,n){return t<0||t+n>e&&(t=e-n)<0?0:t}if(this.settings.constrainToViewport){var r=Tt(this),i=this.layoutRect();t=n(t,r.w+r.x,i.w),e=n(e,r.h+r.y,i.h)}var o=P.getUiContainer(this);return o&&Rt(o)&&!St(this)&&(t-=o.scrollLeft,e-=o.scrollTop),o&&(t+=1,e+=1),this.state.get("rendered")?this.layoutRect({x:t,y:e}).repaint():(this.settings.x=t,this.settings.y=e),this.fire("move",{x:t,y:e}),this}},Nt=tinymce.util.Tools.resolve("tinymce.util.Class"),Ot=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Dt=function(t){var e;if(t)return"number"==typeof t?{top:t=t||0,left:t,bottom:t,right:t}:(1===(e=(t=t.split(" ")).length)?t[1]=t[2]=t[3]=t[0]:2===e?(t[2]=t[0],t[3]=t[1]):3===e&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0})},At=function(t,e){function n(e){var n=parseFloat(function(e){var n=t.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(t,null);return r?(e=e.replace(/[A-Z]/g,(function(t){return"-"+t})),r.getPropertyValue(e)):null}return t.currentStyle[e]}(e));return isNaN(n)?0:n}return{top:n(e+"TopWidth"),right:n(e+"RightWidth"),bottom:n(e+"BottomWidth"),left:n(e+"LeftWidth")}};function Pt(){}function Mt(t){this.cls=[],this.cls._map={},this.onchange=t||Pt,this.prefix=""}s.extend(Mt.prototype,{add:function(t){return t&&!this.contains(t)&&(this.cls._map[t]=!0,this.cls.push(t),this._change()),this},remove:function(t){if(this.contains(t)){var e=void 0;for(e=0;e<this.cls.length&&this.cls[e]!==t;e++);this.cls.splice(e,1),delete this.cls._map[t],this._change()}return this},toggle:function(t,e){var n=this.contains(t);return n!==e&&(n?this.remove(t):this.add(t),this._change()),this},contains:function(t){return!!this.cls._map[t]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Mt.prototype.toString=function(){var t;if(this.clsValue)return this.clsValue;t="";for(var e=0;e<this.cls.length;e++)e>0&&(t+=" "),t+=this.prefix+this.cls[e];return t};var Ht,Bt,It,Wt=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,Lt=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,zt=/^\s*|\s*$/g,Ft=Nt.extend({init:function(t){var e=this.match;function n(t,n,i){var o;function a(t){t&&n.push(t)}return a(function(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}((o=Wt.exec(t.replace(zt,"")))[1])),a(function(t){if(t)return function(e){return e._name===t}}(o[2])),a(function(t){if(t)return t=t.split("."),function(e){for(var n=t.length;n--;)if(!e.classes.contains(t[n]))return!1;return!0}}(o[3])),a(function(t,e,n){if(t)return function(r){var i=r[t]?r[t]():"";return e?"="===e?i===n:"*="===e?i.indexOf(n)>=0:"~="===e?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===e?i!==n:"^="===e?0===i.indexOf(n):"$="===e&&i.substr(i.length-n.length)===n:!!n}}(o[4],o[5],o[6])),a(function(t){var n;if(t)return(t=/(?:not\((.+)\))|(.+)/i.exec(t))[1]?(n=r(t[1],[]),function(t){return!e(t,n)}):(t=t[2],function(e,n,r){return"first"===t?0===n:"last"===t?n===r-1:"even"===t?n%2==0:"odd"===t?n%2==1:!!e[t]&&e[t]()})}(o[7])),n.pseudo=!!o[7],n.direct=i,n}function r(t,e){var i,o,a,s=[];do{if(Lt.exec(""),(o=Lt.exec(t))&&(t=o[3],s.push(o[1]),o[2])){i=o[3];break}}while(o);for(i&&r(i,e),t=[],a=0;a<s.length;a++)">"!==s[a]&&t.push(n(s[a],[],">"===s[a-1]));return e.push(t),e}this._selectors=r(t,[])},match:function(t,e){var n,r,i,o,a,s,u,c,l,f,d,h,m;for(n=0,r=(e=e||this._selectors).length;n<r;n++){for(m=t,h=0,i=(o=(a=e[n]).length)-1;i>=0;i--)for(c=a[i];m;){if(c.pseudo)for(l=f=(d=m.parent().items()).length;l--&&d[l]!==m;);for(s=0,u=c.length;s<u;s++)if(!c[s](m,l,f)){s=u+1;break}if(s===u){h++;break}if(i===o-1)break;m=m.parent()}if(h===o)return!0}return!1},find:function(t){var e,n,r=[],i=this._selectors;function o(t,e,n){var i,a,s,u,c,l=e[n];for(i=0,a=t.length;i<a;i++){for(c=t[i],s=0,u=l.length;s<u;s++)if(!l[s](c,i,a)){s=u+1;break}if(s===u)n===e.length-1?r.push(c):c.items&&o(c.items(),e,n+1);else if(l.direct)return;c.items&&o(c.items(),e,n)}}if(t.items){for(e=0,n=i.length;e<n;e++)o(t.items(),i[e],0);n>1&&(r=function(t){for(var e,n=[],r=t.length;r--;)(e=t[r]).__checked||(n.push(e),e.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(r))}return Ht||(Ht=Ft.Collection),new Ht(r)}}),Ut=Array.prototype.push,jt=Array.prototype.slice;It={length:0,init:function(t){t&&this.add(t)},add:function(t){return s.isArray(t)?Ut.apply(this,t):t instanceof Bt?this.add(t.toArray()):Ut.call(this,t),this},set:function(t){var e,n=this.length;for(this.length=0,this.add(t),e=this.length;e<n;e++)delete this[e];return this},filter:function(t){var e,n,r,i,o=[];for("string"==typeof t?(t=new Ft(t),i=function(e){return t.match(e)}):i=t,e=0,n=this.length;e<n;e++)i(r=this[e])&&o.push(r);return new Bt(o)},slice:function(){return new Bt(jt.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},each:function(t){return s.each(this,t),this},toArray:function(){return s.toArray(this)},indexOf:function(t){for(var e=this.length;e--&&this[e]!==t;);return e},reverse:function(){return new Bt(s.toArray(this).reverse())},hasClass:function(t){return!!this[0]&&this[0].classes.contains(t)},prop:function(t,e){var n;return void 0!==e?(this.each((function(n){n[t]&&n[t](e)})),this):(n=this[0])&&n[t]?n[t]():void 0},exec:function(t){var e=this,n=s.toArray(arguments).slice(1);return e.each((function(e){e[t]&&e[t].apply(e,n)})),e},remove:function(){for(var t=this.length;t--;)this[t].remove();return this},addClass:function(t){return this.each((function(e){e.classes.add(t)}))},removeClass:function(t){return this.each((function(e){e.classes.remove(t)}))}},s.each("fire on off show hide append prepend before after reflow".split(" "),(function(t){It[t]=function(){var e=s.toArray(arguments);return this.each((function(n){t in n&&n[t].apply(n,e)})),this}})),s.each("text name disabled active selected checked visible parent value data".split(" "),(function(t){It[t]=function(e){return this.prop(t,e)}})),Bt=Nt.extend(It),Ft.Collection=Bt;var qt=Bt,Vt=function(t){this.create=t.create};Vt.create=function(t,e){return new Vt({create:function(n,r){var i,o=function(t){n.set(r,t.value)};return n.on("change:"+r,(function(n){t.set(e,n.value)})),t.on("change:"+e,o),(i=n._bindings)||(i=n._bindings=[],n.on("destroy",(function(){for(var t=i.length;t--;)i[t]()}))),i.push((function(){t.off("change:"+e,o)})),t.get(e)}})};var Yt=tinymce.util.Tools.resolve("tinymce.util.Observable");function $t(t){return t.nodeType>0}var Xt,Gt,Jt=Nt.extend({Mixins:[Yt],init:function(t){var e,n;for(e in t=t||{})(n=t[e])instanceof Vt&&(t[e]=n.create(this,e));this.data=t},set:function(t,e){var n,r,i=this.data[t];if(e instanceof Vt&&(e=e.create(this,t)),"object"==typeof t){for(n in t)this.set(n,t[n]);return this}return function t(e,n){var r,i;if(e===n)return!0;if(null===e||null===n)return e===n;if("object"!=typeof e||"object"!=typeof n)return e===n;if(s.isArray(n)){if(e.length!==n.length)return!1;for(r=e.length;r--;)if(!t(e[r],n[r]))return!1}if($t(e)||$t(n))return e===n;for(r in i={},n){if(!t(e[r],n[r]))return!1;i[r]=!0}for(r in e)if(!i[r]&&!t(e[r],n[r]))return!1;return!0}(i,e)||(this.data[t]=e,r={target:this,name:t,value:e,oldValue:i},this.fire("change:"+t,r),this.fire("change",r)),this},get:function(t){return this.data[t]},has:function(t){return t in this.data},bind:function(t){return Vt.create(this,t)},destroy:function(){this.fire("destroy")}}),Kt={},Qt={add:function(e){var n=e.parent();if(n){if(!n._layout||n._layout.isNative())return;Kt[n._id]||(Kt[n._id]=n),Xt||(Xt=!0,R.requestAnimationFrame((function(){var t,e;for(t in Xt=!1,Kt)(e=Kt[t]).state.get("rendered")&&e.reflow();Kt={}}),t.document.body))}},remove:function(t){Kt[t._id]&&delete Kt[t._id]}},Zt="onmousewheel"in t.document,te=0,ee={Statics:{classPrefix:"mce-"},isRtl:function(){return Gt.rtl},classPrefix:"mce-",init:function(t){var e,n,r=this;function i(t){var e;for(t=t.split(" "),e=0;e<t.length;e++)r.classes.add(t[e])}r.settings=t=s.extend({},r.Defaults,t),r._id=t.id||"mceu_"+te++,r._aria={role:t.role},r._elmCache={},r.$=wt,r.state=new Jt({visible:!0,active:!1,disabled:!1,value:""}),r.data=new Jt(t.data),r.classes=new Mt((function(){r.state.get("rendered")&&(r.getEl().className=this.toString())})),r.classes.prefix=r.classPrefix,(e=t.classes)&&(r.Defaults&&(n=r.Defaults.classes)&&e!==n&&i(n),i(e)),s.each("title text name visible disabled active value".split(" "),(function(e){e in t&&r[e](t[e])})),r.on("click",(function(){if(r.disabled())return!1})),r.settings=t,r.borderBox=Dt(t.border),r.paddingBox=Dt(t.padding),r.marginBox=Dt(t.margin),t.hidden&&r.hide()},Properties:"parent,name",getContainerElm:function(){var t=P.getUiContainer(this);return t||Ct.getContainer()},getParentCtrl:function(t){for(var e,n=this.getRoot().controlIdLookup;t&&n&&!(e=n[t.id]);)t=t.parentNode;return e},initLayoutRect:function(){var t,e,n,r,i,o,a,s,u,c,l=this.settings,f=this.getEl();t=this.borderBox=this.borderBox||At(f,"border"),this.paddingBox=this.paddingBox||At(f,"padding"),this.marginBox=this.marginBox||At(f,"margin"),c=Ct.getSize(f),s=l.minWidth,u=l.minHeight,i=s||c.width,o=u||c.height,n=l.width,r=l.height,a=void 0!==(a=l.autoResize)?a:!n&&!r,n=n||i,r=r||o;var d=t.left+t.right,h=t.top+t.bottom,m=l.maxWidth||65535,g=l.maxHeight||65535;return this._layoutRect=e={x:l.x||0,y:l.y||0,w:n,h:r,deltaW:d,deltaH:h,contentW:n-d,contentH:r-h,innerW:n-d,innerH:r-h,startMinWidth:s||0,startMinHeight:u||0,minW:Math.min(i,m),minH:Math.min(o,g),maxW:m,maxH:g,autoResize:a,scrollW:0},this._lastLayoutRect={},e},layoutRect:function(t){var e,n,r,i,o,a=this._layoutRect;return a||(a=this.initLayoutRect()),t?(r=a.deltaW,i=a.deltaH,void 0!==t.x&&(a.x=t.x),void 0!==t.y&&(a.y=t.y),void 0!==t.minW&&(a.minW=t.minW),void 0!==t.minH&&(a.minH=t.minH),void 0!==(n=t.w)&&(n=(n=n<a.minW?a.minW:n)>a.maxW?a.maxW:n,a.w=n,a.innerW=n-r),void 0!==(n=t.h)&&(n=(n=n<a.minH?a.minH:n)>a.maxH?a.maxH:n,a.h=n,a.innerH=n-i),void 0!==(n=t.innerW)&&(n=(n=n<a.minW-r?a.minW-r:n)>a.maxW-r?a.maxW-r:n,a.innerW=n,a.w=n+r),void 0!==(n=t.innerH)&&(n=(n=n<a.minH-i?a.minH-i:n)>a.maxH-i?a.maxH-i:n,a.innerH=n,a.h=n+i),void 0!==t.contentW&&(a.contentW=t.contentW),void 0!==t.contentH&&(a.contentH=t.contentH),(e=this._lastLayoutRect).x===a.x&&e.y===a.y&&e.w===a.w&&e.h===a.h||((o=Gt.repaintControls)&&o.map&&!o.map[this._id]&&(o.push(this),o.map[this._id]=!0),e.x=a.x,e.y=a.y,e.w=a.w,e.h=a.h),this):a},repaint:function(){var e,n,r,i,o,a,s,u,c,l;c=t.document.createRange?function(t){return t}:Math.round,e=this.getEl().style,i=this._layoutRect,u=this._lastRepaintRect||{},a=(o=this.borderBox).left+o.right,s=o.top+o.bottom,i.x!==u.x&&(e.left=c(i.x)+"px",u.x=i.x),i.y!==u.y&&(e.top=c(i.y)+"px",u.y=i.y),i.w!==u.w&&(l=c(i.w-a),e.width=(l>=0?l:0)+"px",u.w=i.w),i.h!==u.h&&(l=c(i.h-s),e.height=(l>=0?l:0)+"px",u.h=i.h),this._hasBody&&i.innerW!==u.innerW&&(l=c(i.innerW),(r=this.getEl("body"))&&((n=r.style).width=(l>=0?l:0)+"px"),u.innerW=i.innerW),this._hasBody&&i.innerH!==u.innerH&&(l=c(i.innerH),(r=r||this.getEl("body"))&&((n=n||r.style).height=(l>=0?l:0)+"px"),u.innerH=i.innerH),this._lastRepaintRect=u,this.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,Ct.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(t,e){var n=this;return ne(n).on(t,function(t){var e,r;return"string"!=typeof t?t:function(i){return e||n.parentsAndSelf().each((function(n){var i=n.settings.callbacks;if(i&&(e=i[t]))return r=n,!1})),e?e.call(r,i):(i.action=t,void this.fire("execute",i))}}(e)),n},off:function(t,e){return ne(this).off(t,e),this},fire:function(t,e,n){if((e=e||{}).control||(e.control=this),e=ne(this).fire(t,e),!1!==n&&this.parent)for(var r=this.parent();r&&!e.isPropagationStopped();)r.fire(t,e,!1),r=r.parent();return e},hasEventListeners:function(t){return ne(this).has(t)},parents:function(t){var e,n=new qt;for(e=this.parent();e;e=e.parent())n.add(e);return t&&(n=n.filter(t)),n},parentsAndSelf:function(t){return new qt(this).add(this.parents(t))},next:function(){var t=this.parent().items();return t[t.indexOf(this)+1]},prev:function(){var t=this.parent().items();return t[t.indexOf(this)-1]},innerHtml:function(t){return this.$el.html(t),this},getEl:function(t){var e=t?this._id+"-"+t:this._id;return this._elmCache[e]||(this._elmCache[e]=wt("#"+e)[0]),this._elmCache[e]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(t){}return this},blur:function(){return this.getEl().blur(),this},aria:function(t,e){var n=this.getEl(this.ariaTarget);return void 0===e?this._aria[t]:(this._aria[t]=e,this.state.get("rendered")&&n.setAttribute("role"===t?t:"aria-"+t,e),this)},encode:function(t,e){return!1!==e&&(t=this.translate(t)),(t||"").replace(/[&<>"]/g,(function(t){return"&#"+t.charCodeAt(0)+";"}))},translate:function(t){return Gt.translate?Gt.translate(t):t},before:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this),!0),this},after:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this)),this},remove:function(){var t,e,n=this,r=n.getEl(),i=n.parent();if(n.items){var o=n.items().toArray();for(e=o.length;e--;)o[e].remove()}i&&i.items&&(t=[],i.items().each((function(e){e!==n&&t.push(e)})),i.items().set(t),i._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&wt(r).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],r&&r.parentNode&&r.parentNode.removeChild(r),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(t){return wt(t).before(this.renderHtml()),this.postRender(),this},renderTo:function(t){return wt(t||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var t,e,n,r,i,o=this,a=o.settings;for(r in o.$el=wt(o.getEl()),o.state.set("rendered",!0),a)0===r.indexOf("on")&&o.on(r.substr(2),a[r]);if(o._eventsRoot){for(n=o.parent();!i&&n;n=n.parent())i=n._eventsRoot;if(i)for(r in i._nativeEvents)o._nativeEvents[r]=!0}re(o),a.style&&(t=o.getEl())&&(t.setAttribute("style",a.style),t.style.cssText=a.style),o.settings.border&&(e=o.borderBox,o.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left}));var s=o.getRoot();for(var u in s.controlIdLookup||(s.controlIdLookup={}),s.controlIdLookup[o._id]=o,o._aria)o.aria(u,o._aria[u]);!1===o.state.get("visible")&&(o.getEl().style.display="none"),o.bindStates(),o.state.on("change:visible",(function(t){var e,n=t.value;o.state.get("rendered")&&(o.getEl().style.display=!1===n?"none":"",o.getEl().getBoundingClientRect()),(e=o.parent())&&(e._lastRect=null),o.fire(n?"show":"hide"),Qt.add(o)})),o.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(t){var e,n,r,i,o,a,s=this.getEl(),u=s.parentNode,c=function(t,e){var n,r,i=t;for(n=r=0;i&&i!==e&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}(s,u);return e=c.x,n=c.y,r=s.offsetWidth,i=s.offsetHeight,o=u.clientWidth,a=u.clientHeight,"end"===t?(e-=o-r,n-=a-i):"center"===t&&(e-=o/2-r/2,n-=a/2-i/2),u.scrollLeft=e,u.scrollTop=n,this},getRoot:function(){for(var t,e=this,n=[];e;){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);for(var r=n.length;r--;)n[r].rootControl=t;return t},reflow:function(){Qt.remove(this);var t=this.parent();return t&&t._layout&&!t._layout.isNative()&&t.reflow(),this}};function ne(t){return t._eventDispatcher||(t._eventDispatcher=new Ot({scope:t,toggleEvent:function(e,n){n&&Ot.isNative(e)&&(t._nativeEvents||(t._nativeEvents={}),t._nativeEvents[e]=!0,t.state.get("rendered")&&re(t))}})),t._eventDispatcher}function re(t){var e,n,r,i,o,a;function s(e){var n=t.getParentCtrl(e.target);n&&n.fire(e.type,e)}function u(){var t=i._lastHoverCtrl;t&&(t.fire("mouseleave",{target:t.getEl()}),t.parents().each((function(t){t.fire("mouseleave",{target:t.getEl()})})),i._lastHoverCtrl=null)}function c(e){var n,r,o,a=t.getParentCtrl(e.target),s=i._lastHoverCtrl,u=0;if(a!==s){if(i._lastHoverCtrl=a,(r=a.parents().toArray().reverse()).push(a),s){for((o=s.parents().toArray().reverse()).push(s),u=0;u<o.length&&r[u]===o[u];u++);for(n=o.length-1;n>=u;n--)(s=o[n]).fire("mouseleave",{target:s.getEl()})}for(n=u;n<r.length;n++)(a=r[n]).fire("mouseenter",{target:a.getEl()})}}function l(e){e.preventDefault(),"mousewheel"===e.type?(e.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-1/40*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=t.fire("wheel",e)}if(o=t._nativeEvents){for((r=t.parents().toArray()).unshift(t),e=0,n=r.length;!i&&e<n;e++)i=r[e]._eventsRoot;for(i||(i=r[r.length-1]||t),t._eventsRoot=i,n=e,e=0;e<n;e++)r[e]._eventsRoot=i;var f=i._delegates;for(a in f||(f=i._delegates={}),o){if(!o)return!1;"wheel"!==a?("mouseenter"===a||"mouseleave"===a?i._hasMouseEnter||(wt(i.getEl()).on("mouseleave",u).on("mouseover",c),i._hasMouseEnter=1):f[a]||(wt(i.getEl()).on(a,s),f[a]=!0),o[a]=!1):Zt?wt(t.getEl()).on("mousewheel",l):wt(t.getEl()).on("DOMMouseScroll",l)}}}s.each("text title visible disabled active value".split(" "),(function(t){ee[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}}));var ie=Gt=Nt.extend(ee),oe=function(t){return!!t.getAttribute("data-mce-tabstop")};function ae(e){var n,r,i=e.root;function o(t){return t&&1===t.nodeType}try{n=t.document.activeElement}catch(e){n=t.document.body}function a(t){return o(t=t||n)?t.getAttribute("role"):null}function s(t){for(var e,r=t||n;r=r.parentNode;)if(e=a(r))return e}function u(t){var e=n;if(o(e))return e.getAttribute("aria-"+t)}function c(t){var e=t.tagName.toUpperCase();return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e}function l(t){var e=[];return function t(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){(function(t){return!(!c(t)||t.hidden)||!!oe(t)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(a(t))})(n)&&e.push(n);for(var r=0;r<n.childNodes.length;r++)t(n.childNodes[r])}}(t||i.getEl()),e}function f(t){var e,n;(n=(t=t||r).parents().toArray()).unshift(t);for(var i=0;i<n.length&&!(e=n[i]).settings.ariaRoot;i++);return e}function d(t,e){return t<0?t=e.length-1:t>=e.length&&(t=0),e[t]&&e[t].focus(),t}function h(t,e){var r=-1,i=f();e=e||l(i.getEl());for(var o=0;o<e.length;o++)e[o]===n&&(r=o);r+=t,i.lastAriaIndex=d(r,e)}function m(){"tablist"===s()?h(-1,l(n.parentNode)):r.parent().submenu?b():h(-1)}function g(){var t=a(),e=s();"tablist"===e?h(1,l(n.parentNode)):"menuitem"===t&&"menu"===e&&u("haspopup")?y():h(1)}function p(){h(-1)}function v(){var t=a(),e=s();"menuitem"===t&&"menubar"===e?y():"button"===t&&u("haspopup")?y({key:"down"}):h(1)}function b(){r.fire("cancel")}function y(t){t=t||{},r.fire("click",{target:n,aria:t})}return r=i.getParentCtrl(n),i.on("keydown",(function(t){function e(t,e){c(n)||oe(n)||"slider"!==a(n)&&!1!==e(t)&&t.preventDefault()}if(!t.isDefaultPrevented())switch(t.keyCode){case 37:e(t,m);break;case 39:e(t,g);break;case 38:e(t,p);break;case 40:e(t,v);break;case 27:b();break;case 14:case 13:case 32:e(t,y);break;case 9:!function(t){if("tablist"===s()){var e=l(r.getEl("body"))[0];e&&e.focus()}else h(t.shiftKey?-1:1)}(t),t.preventDefault()}})),i.on("focusin",(function(t){n=t.target,r=t.control})),{focusFirst:function(t){var e=f(t),n=l(e.getEl());e.settings.ariaRemember&&"lastAriaIndex"in e?d(e.lastAriaIndex,n):d(0,n)}}}var se={},ue=ie.extend({init:function(t){var e=this;e._super(t),(t=e.settings).fixed&&e.state.set("fixed",!0),e._items=new qt,e.isRtl()&&e.classes.add("rtl"),e.bodyClasses=new Mt((function(){e.state.get("rendered")&&(e.getEl("body").className=this.toString())})),e.bodyClasses.prefix=e.classPrefix,e.classes.add("container"),e.bodyClasses.add("container-body"),t.containerCls&&e.classes.add(t.containerCls),e._layout=g.create((t.layout||"")+"layout"),e.settings.items?e.add(e.settings.items):e.add(e.render()),e._hasBody=!0},items:function(){return this._items},find:function(t){return(t=se[t]=se[t]||new Ft(t)).find(this)},add:function(t){return this.items().add(this.create(t)).parent(this),this},focus:function(t){var e,n,r;if(!t||!(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return r=this.find("*"),this.statusbar&&r.add(this.statusbar.items()),r.each((function(t){if(t.settings.autofocus)return e=null,!1;t.canFocus&&(e=e||t)})),e&&e.focus(),this;n.focusFirst(this)},replace:function(t,e){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===t){r[i]=e;break}i>=0&&((n=e.getEl())&&n.parentNode.removeChild(n),(n=t.getEl())&&n.parentNode.removeChild(n)),e.parent(this)},create:function(t){var e,n=this,r=[];return s.isArray(t)||(t=[t]),s.each(t,(function(t){t&&(t instanceof ie||("string"==typeof t&&(t={type:t}),e=s.extend({},n.settings.defaults,t),t.type=e.type=e.type||t.type||n.settings.defaultType||(e.defaults?e.defaults.type:null),t=g.create(e)),r.push(t))})),r},renderNew:function(){var t=this;return t.items().each((function(e,n){var r;e.parent(t),e.state.get("rendered")||((r=t.getEl("body")).hasChildNodes()&&n<=r.childNodes.length-1?wt(r.childNodes[n]).before(e.renderHtml()):wt(r).append(e.renderHtml()),e.postRender(),Qt.add(e))})),t._layout.applyClasses(t.items().filter(":visible")),t._lastRect=null,t},append:function(t){return this.add(t).renderNew()},prepend:function(t){return this.items().set(this.create(t).concat(this.items().toArray())),this.renderNew()},insert:function(t,e,n){var r,i,o;return t=this.create(t),r=this.items(),!n&&e<r.length-1&&(e+=1),e>=0&&e<r.length&&(i=r.slice(0,e).toArray(),o=r.slice(e).toArray(),r.set(i.concat(t,o))),this.renderNew()},fromJSON:function(t){for(var e in t)this.find("#"+e).value(t[e]);return this},toJSON:function(){var t={};return this.find("*").each((function(e){var n=e.name(),r=e.value();n&&void 0!==r&&(t[n]=r)})),t},renderHtml:function(){var t=this._layout,e=this.settings.role;return this.preRender(),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(e?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"},postRender:function(){var t;return this.items().exec("postRender"),this._super(),this._layout.postRender(this),this.state.set("rendered",!0),this.settings.style&&this.$el.css(this.settings.style),this.settings.border&&(t=this.borderBox,this.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),this.parent()||(this.keyboardNav=ae({root:this})),this},initLayoutRect:function(){var t=this._super();return this._layout.recalc(this),t},recalc:function(){var t=this._layoutRect,e=this._lastRect;if(!e||e.w!==t.w||e.h!==t.h)return this._layout.recalc(this),t=this.layoutRect(),this._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var t;if(Qt.remove(this),this.visible()){for(ie.repaintControls=[],ie.repaintControls.map={},this.recalc(),t=ie.repaintControls.length;t--;)ie.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),ie.repaintControls=[]}return this}});function ce(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function le(e,n){var r,i,o,a,s,u,c,l=n.document||t.document;n=n||{};var f=l.getElementById(n.handle||e);o=function(e){var o,d,h=function(t){var e,n,r,i,o,a,s,u=Math.max;return e=t.documentElement,n=t.body,r=u(e.scrollWidth,n.scrollWidth),i=u(e.clientWidth,n.clientWidth),o=u(e.offsetWidth,n.offsetWidth),a=u(e.scrollHeight,n.scrollHeight),s=u(e.clientHeight,n.clientHeight),{width:r<o?i:r,height:a<u(e.offsetHeight,n.offsetHeight)?s:a}}(l);ce(e),e.preventDefault(),i=e.button,o=f,u=e.screenX,c=e.screenY,d=t.window.getComputedStyle?t.window.getComputedStyle(o,null).getPropertyValue("cursor"):o.runtimeStyle.cursor,r=wt("<div></div>").css({position:"absolute",top:0,left:0,width:h.width,height:h.height,zIndex:2147483647,opacity:1e-4,cursor:d}).appendTo(l.body),wt(l).on("mousemove touchmove",s).on("mouseup touchend",a),n.start(e)},s=function(t){if(ce(t),t.button!==i)return a(t);t.deltaX=t.screenX-u,t.deltaY=t.screenY-c,t.preventDefault(),n.drag(t)},a=function(t){ce(t),wt(l).off("mousemove touchmove",s).off("mouseup touchend",a),r.remove(),n.stop&&n.stop(t)},this.destroy=function(){wt(f).off()},wt(f).on("mousedown touchstart",o)}var fe,de,he,me,ge={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var t=this;function e(){var e,n,r;function i(r,i,o,a,s,u){var c,l,f,d,h,m,g,p;if(l=t.getEl("scroll"+r)){if(g=i.toLowerCase(),p=o.toLowerCase(),wt(t.getEl("absend")).css(g,t.layoutRect()[a]-1),!s)return void wt(l).css("display","none");wt(l).css("display","block"),c=t.getEl("body"),f=t.getEl("scroll"+r+"t"),d=c["client"+o]-4,h=(d-=e&&n?l["client"+u]:0)/c["scroll"+o],(m={})[g]=c["offset"+i]+2,m[p]=d,wt(l).css(m),(m={})[g]=c["scroll"+i]*h,m[p]=d*h,wt(f).css(m)}}r=t.getEl("body"),e=r.scrollWidth>r.clientWidth,n=r.scrollHeight>r.clientHeight,i("h","Left","Width","contentW",e,"Height"),i("v","Top","Height","contentH",n,"Width")}t.settings.autoScroll&&(t._hasScroll||(t._hasScroll=!0,function(){function e(e,n,r,i,o){var a,s=t._id+"-scroll"+e,u=t.classPrefix;wt(t.getEl()).append('<div id="'+s+'" class="'+u+"scrollbar "+u+"scrollbar-"+e+'"><div id="'+s+'t" class="'+u+'scrollbar-thumb"></div></div>'),t.draghelper=new le(s+"t",{start:function(){a=t.getEl("body")["scroll"+n],wt("#"+s).addClass(u+"active")},drag:function(s){var u,c,l,f,d=t.layoutRect();c=d.contentW>d.innerW,l=d.contentH>d.innerH,f=t.getEl("body")["client"+r]-4,u=(f-=c&&l?t.getEl("scroll"+e)["client"+o]:0)/t.getEl("body")["scroll"+r],t.getEl("body")["scroll"+n]=a+s["delta"+i]/u},stop:function(){wt("#"+s).removeClass(u+"active")}})}t.classes.add("scroll"),e("v","Top","Height","Y","Width"),e("h","Left","Width","X","Height")}(),t.on("wheel",(function(n){var r=t.getEl("body");r.scrollLeft+=10*(n.deltaX||0),r.scrollTop+=10*n.deltaY,e()})),wt(t.getEl("body")).on("scroll",e)),e())}},pe=ue.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[ge],renderHtml:function(){var t=this._layout,e=this.settings.html;return this.preRender(),t.preRender(this),void 0===e?e='<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+t.renderHtml(this)+"</div>":("function"==typeof e&&(e=e.call(this)),this._hasBody=!1),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1" role="group">'+(this._preBodyHtml||"")+e+"</div>"}}),ve={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,e){if(t<=1||e<=1){var n=Ct.getWindowSize();t=t<=1?t*n.w:t,e=e<=1?e*n.h:e}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:e,w:t,h:e}).reflow()},resizeBy:function(t,e){var n=this.layoutRect();return this.resizeTo(n.w+t,n.h+e)}},be=[],ye=[];function we(t,e){for(;t;){if(t===e)return!0;t=t.parent()}}function xe(){fe||(fe=function(t){2!==t.button&&function(t){for(var e=be.length;e--;){var n=be[e],r=n.getParentCtrl(t.target);if(n.settings.autohide){if(r&&(we(r,n)||n.parent()===r))continue;(t=n.fire("autohide",{target:t.target})).isDefaultPrevented()||n.hide()}}}(t)},wt(t.document).on("click touchstart",fe))}function Ce(t){var e=Ct.getViewPort().y;function n(e,n){for(var r,i=0;i<be.length;i++)if(be[i]!==t)for(r=be[i].parent();r&&(r=r.parent());)r===t&&be[i].fixed(e).moveBy(0,n).repaint()}t.settings.autofix&&(t.state.get("fixed")?t._autoFixY>e&&(t.fixed(!1).layoutRect({y:t._autoFixY}).repaint(),n(!1,t._autoFixY-e)):(t._autoFixY=t.layoutRect().y,t._autoFixY<e&&(t.fixed(!0).layoutRect({y:0}).repaint(),n(!0,e-t._autoFixY))))}function Re(t,e){var n,r,i=Se.zIndex||65535;if(t)ye.push(e);else for(n=ye.length;n--;)ye[n]===e&&ye.splice(n,1);if(ye.length)for(n=0;n<ye.length;n++)ye[n].modal&&(i++,r=ye[n]),ye[n].getEl().style.zIndex=i,ye[n].zIndex=i,i++;var o=wt("#"+e.classPrefix+"modal-block",e.getContainerElm())[0];r?wt(o).css("z-index",r.zIndex-1):o&&(o.parentNode.removeChild(o),me=!1),Se.currentZIndex=i}var Se=pe.extend({Mixins:[Et,ve],init:function(e){var n=this;n._super(e),n._eventsRoot=n,n.classes.add("floatpanel"),e.autohide&&(xe(),function(){if(!he){var e=t.document.documentElement,n=e.clientWidth,r=e.clientHeight;he=function(){t.document.all&&n===e.clientWidth&&r===e.clientHeight||(n=e.clientWidth,r=e.clientHeight,Se.hideAll())},wt(t.window).on("resize",he)}}(),be.push(n)),e.autofix&&(de||(de=function(){var t;for(t=be.length;t--;)Ce(be[t])},wt(t.window).on("scroll",de)),n.on("move",(function(){Ce(this)}))),n.on("postrender show",(function(t){if(t.control===n){var e,r=n.classPrefix;n.modal&&!me&&((e=wt("#"+r+"modal-block",n.getContainerElm()))[0]||(e=wt('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(n.getContainerElm())),R.setTimeout((function(){e.addClass(r+"in"),wt(n.getEl()).addClass(r+"in")})),me=!0),Re(!0,n)}})),n.on("show",(function(){n.parents().each((function(t){if(t.state.get("fixed"))return n.fixed(!0),!1}))})),e.popover&&(n._preBodyHtml='<div class="'+n.classPrefix+'arrow"></div>',n.classes.add("popover").add("bottom").add(n.isRtl()?"end":"start")),n.aria("label",e.ariaLabel),n.aria("labelledby",n._id),n.aria("describedby",n.describedBy||n._id+"-none")},fixed:function(t){if(this.state.get("fixed")!==t){if(this.state.get("rendered")){var e=Ct.getViewPort();t?this.layoutRect().y-=e.y:this.layoutRect().y+=e.y}this.classes.toggle("fixed",t),this.state.set("fixed",t)}return this},show:function(){var t,e=this._super();for(t=be.length;t--&&be[t]!==this;);return-1===t&&be.push(this),e},hide:function(){return _e(this),Re(!1,this),this._super()},hideAll:function(){Se.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),Re(!1,this)),this},remove:function(){_e(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function _e(t){var e;for(e=be.length;e--;)be[e]===t&&be.splice(e,1);for(e=ye.length;e--;)ye[e]===t&&ye.splice(e,1)}Se.hideAll=function(){for(var t=be.length;t--;){var e=be[t];e&&e.settings.autohide&&(e.hide(),be.splice(t,1))}};var ke=function(t,e){return!(!t||e.settings.ui_container)},Te=function(t,e,n){var r,i,o=m.DOM,a=function(t){return t.getParam("fixed_toolbar_container")}(t);a&&(i=o.select(a)[0]);var s=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var e=t.selection.getScrollContainer(),n=t.getBody(),i=0,a=0;if(e){var s=o.getPos(n),u=o.getPos(e);i=Math.max(0,u.x-s.x),a=Math.max(0,u.y-s.y)}r.fixed(!1).moveRel(n,t.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(i,a)}},c=function(){r&&(r.show(),s(),o.addClass(t.getBody(),"mce-edit-focus"))},f=function(){r&&(r.hide(),Se.hideAll(),o.removeClass(t.getBody(),"mce-edit-focus"))},h=function(){r?r.visible()||c():(r=e.panel=g.create({type:i?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:ke(i,t),border:1,items:[!1===u(t)?null:{type:"menubar",border:"0 0 1 0",items:it(t)},B(t,l(t))]}),P.setUiContainer(t,r),y(t),i?r.renderTo(i).reflow():r.renderTo().reflow(),x(t,r),c(),F(t),t.on("nodeChange",s),t.on("ResizeWindow",s),t.on("activate",c),t.on("deactivate",f),t.nodeChanged())};return t.settings.content_editable=!0,t.on("focus",(function(){!1===d(t)&&n.skinUiCss?o.styleSheetLoader.load(n.skinUiCss,h,h):h()})),t.on("blur hide",f),t.on("remove",(function(){r&&(r.remove(),r=null)})),!1===d(t)&&n.skinUiCss?o.styleSheetLoader.load(n.skinUiCss,gt(t)):gt(t)(),{}};function Ee(t,e){var n,r,i=this,o=ie.classPrefix;i.show=function(a,s){function u(){n&&(wt(t).append('<div class="'+o+"throbber"+(e?" "+o+"throbber-inline":"")+'"></div>'),s&&s())}return i.hide(),n=!0,a?r=R.setTimeout(u,a):u(),i},i.hide=function(){var e=t.lastChild;return R.clearTimeout(r),e&&-1!==e.className.indexOf("throbber")&&e.parentNode.removeChild(e),n=!1,i}}var Ne=function(t,e){var n;t.on("ProgressState",(function(t){n=n||new Ee(e.panel.getEl("body")),t.state?n.show(t.time):n.hide()}))},Oe=function(t,e,n){var r=function(t){var e=t.settings,n=e.skin,r=e.skin_url;if(!1!==n){var i=n||"lightgray";r=r?t.documentBaseURI.toAbsolute(r):a.baseURL+"/skins/"+i}return r}(t);return r&&(n.skinUiCss=r+"/skin.min.css",t.contentCSS.push(r+"/content"+(t.inline?".inline":"")+".min.css")),Ne(t,e),function(t){return t.getParam("inline",!1,"boolean")}(t)?Te(t,e,n):yt(t,e,n)},De=ie.extend({Mixins:[Et],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",(function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)})),t._super()},repaint:function(){var t,e;t=this.getEl().style,e=this._layoutRect,t.left=e.x+"px",t.top=e.y+"px",t.zIndex=131070}}),Ae=ie.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.canFocus=!0,t.tooltip&&!1!==Ae.tooltips&&(e.on("mouseenter",(function(n){var r=e.tooltip().moveTo(-65535);if(n.control===e){var i=r.text(t.tooltip).show().testMoveRel(e.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===i),r.classes.toggle("tooltip-nw","bc-tl"===i),r.classes.toggle("tooltip-ne","bc-tr"===i),r.moveRel(e.getEl(),i)}else r.hide()})),e.on("mouseleave mousedown click",(function(){e.tooltip().remove(),e._tooltip=null}))),e.aria("label",t.ariaLabel||t.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new De({type:"tooltip"}),P.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var t=this.settings;this._super(),this.parent()||!t.width&&!t.height||(this.initLayoutRect(),this.repaint()),t.autofocus&&this.focus()},bindStates:function(){var t=this;function e(e){t.aria("disabled",e),t.classes.toggle("disabled",e)}function n(e){t.aria("pressed",e),t.classes.toggle("active",e)}return t.state.on("change:disabled",(function(t){e(t.value)})),t.state.on("change:active",(function(t){n(t.value)})),t.state.get("disabled")&&e(!0),t.state.get("active")&&n(!0),t._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Pe=Ae.extend({Defaults:{value:0},init:function(t){this._super(t),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(t){return Math.round(t)})},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div class="'+e+'bar-container"><div class="'+e+'bar"></div></div><div class="'+e+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var t=this;function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}return t.state.on("change:value",(function(t){e(t.value)})),e(t.state.get("value")),t._super()}}),Me=function(t,e){t.getEl().lastChild.textContent=e+(t.progressBar?" "+t.progressBar.value()+"%":"")},He=ie.extend({Mixins:[Et],Defaults:{classes:"widget notification"},init:function(t){var e=this;e._super(t),e.maxWidth=t.maxWidth,t.text&&e.text(t.text),t.icon&&(e.icon=t.icon),t.color&&(e.color=t.color),t.type&&e.classes.add("notification-"+t.type),t.timeout&&(t.timeout<0||t.timeout>0)&&!t.closeButton?e.closeButton=!1:(e.classes.add("has-close"),e.closeButton=!0),t.progressBar&&(e.progressBar=new Pe),e.on("click",(function(t){-1!==t.target.className.indexOf(e.classPrefix+"close")&&e.close()}))},renderHtml:function(){var t,e=this.classPrefix,n="",r="",i="";return this.icon&&(n='<i class="'+e+"ico "+e+"i-"+this.icon+'"></i>'),t=' style="max-width: '+this.maxWidth+"px;"+(this.color?"background-color: "+this.color+';"':'"'),this.closeButton&&(r='<button type="button" class="'+e+'close" aria-hidden="true"></button>'),this.progressBar&&(i=this.progressBar.renderHtml()),'<div id="'+this._id+'" class="'+this.classes+'"'+t+' role="presentation">'+n+'<div class="'+e+'notification-inner">'+this.state.get("text")+"</div>"+i+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var t=this;return R.setTimeout((function(){t.$el.addClass(t.classPrefix+"in"),Me(t,t.state.get("text"))}),100),t._super()},bindStates:function(){var t=this;return t.state.on("change:text",(function(e){t.getEl().firstChild.innerHTML=e.value,Me(t,e.value)})),t.progressBar&&(t.progressBar.bindStates(),t.progressBar.state.on("change:value",(function(e){Me(t,t.state.get("text"))}))),t._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var t,e;t=this.getEl().style,e=this._layoutRect,t.left=e.x+"px",t.top=e.y+"px",t.zIndex=65534}});function Be(t){var e=function(t){return t.inline?t.getElement():t.getContentAreaContainer()};return{open:function(n,r){var i,o=s.extend(n,{maxWidth:(i=e(t),Ct.getSize(i).width)}),a=new He(o);return a.args=o,o.timeout>0&&(a.timer=setTimeout((function(){a.close(),r()}),o.timeout)),a.on("close",(function(){r()})),a.renderTo(),a},close:function(t){t.close()},reposition:function(n){!function(t){K(t,(function(t){t.moveTo(0,0)}))}(n),function(n){if(n.length>0){var r=n.slice(0,1)[0],i=e(t);r.moveRel(i,"tc-tc"),K(n,(function(t,e){e>0&&t.moveRel(n[e-1].getEl(),"bc-tc")}))}}(n)},getArgs:function(t){return t.args}}}var Ie=[],We="";function Le(e){var n,r=wt("meta[name=viewport]")[0];!1!==lt.overrideViewPort&&(r||((r=t.document.createElement("meta")).setAttribute("name","viewport"),t.document.getElementsByTagName("head")[0].appendChild(r)),(n=r.getAttribute("content"))&&void 0!==We&&(We=n),r.setAttribute("content",e?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":We))}function ze(e,n){(function(){for(var t=0;t<Ie.length;t++)if(Ie[t]._fullscreen)return!0;return!1})()&&!1===n&&wt([t.document.documentElement,t.document.body]).removeClass(e+"fullscreen")}var Fe=Se.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(t){var e=this;e._super(t),e.isRtl()&&e.classes.add("rtl"),e.classes.add("window"),e.bodyClasses.add("window-body"),e.state.set("fixed",!0),t.buttons&&(e.statusbar=new pe({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:e.isRtl()?"start":"end",defaults:{type:"button"},items:t.buttons}),e.statusbar.classes.add("foot"),e.statusbar.parent(e)),e.on("click",(function(t){var n=e.classPrefix+"close";(Ct.hasClass(t.target,n)||Ct.hasClass(t.target.parentNode,n))&&e.close()})),e.on("cancel",(function(){e.close()})),e.on("move",(function(t){t.control===e&&Se.hideAll()})),e.aria("describedby",e.describedBy||e._id+"-none"),e.aria("label",t.title),e._fullscreen=!1},recalc:function(){var t,e,n,r,i=this.statusbar;this._fullscreen&&(this.layoutRect(Ct.getWindowSize()),this.layoutRect().contentH=this.layoutRect().innerH),this._super(),t=this.layoutRect(),this.settings.title&&!this._fullscreen&&(e=t.headerW)>t.w&&(n=t.x-Math.max(0,e/2),this.layoutRect({w:e,x:n}),r=!0),i&&(i.layoutRect({w:this.layoutRect().innerW}).recalc(),(e=i.layoutRect().minW+t.deltaW)>t.w&&(n=t.x-Math.max(0,e-t.w),this.layoutRect({w:e,x:n}),r=!0)),r&&this.recalc()},initLayoutRect:function(){var t,e=this._super(),n=0;if(this.settings.title&&!this._fullscreen){t=this.getEl("head");var r=Ct.getSize(t);e.headerW=r.width,e.headerH=r.height,n+=e.headerH}this.statusbar&&(n+=this.statusbar.layoutRect().h),e.deltaH+=n,e.minH+=n,e.h+=n;var i=Ct.getWindowSize();return e.x=this.settings.x||Math.max(0,i.w/2-e.w/2),e.y=this.settings.y||Math.max(0,i.h/2-e.h/2),e},renderHtml:function(){var t=this._layout,e=this._id,n=this.classPrefix,r=this.settings,i="",o="",a=r.html;return this.preRender(),t.preRender(this),r.title&&(i='<div id="'+e+'-head" class="'+n+'window-head"><div id="'+e+'-title" class="'+n+'title">'+this.encode(r.title)+'</div><div id="'+e+'-dragh" class="'+n+'dragh"></div><button type="button" class="'+n+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),r.url&&(a='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),void 0===a&&(a=t.renderHtml(this)),this.statusbar&&(o=this.statusbar.renderHtml()),'<div id="'+e+'" class="'+this.classes+'" hidefocus="1"><div class="'+this.classPrefix+'reset" role="application">'+i+'<div id="'+e+'-body" class="'+this.bodyClasses+'">'+a+"</div>"+o+"</div></div>"},fullscreen:function(e){var n,r,i=this,o=t.document.documentElement,a=i.classPrefix;if(e!==i._fullscreen)if(wt(t.window).on("resize",(function(){var t;if(i._fullscreen)if(n)i._timer||(i._timer=R.setTimeout((function(){var t=Ct.getWindowSize();i.moveTo(0,0).resizeTo(t.w,t.h),i._timer=0}),50));else{t=(new Date).getTime();var e=Ct.getWindowSize();i.moveTo(0,0).resizeTo(e.w,e.h),(new Date).getTime()-t>50&&(n=!0)}})),r=i.layoutRect(),i._fullscreen=e,e){i._initial={x:r.x,y:r.y,w:r.w,h:r.h},i.borderBox=Dt("0"),i.getEl("head").style.display="none",r.deltaH-=r.headerH+2,wt([o,t.document.body]).addClass(a+"fullscreen"),i.classes.add("fullscreen");var s=Ct.getWindowSize();i.moveTo(0,0).resizeTo(s.w,s.h)}else i.borderBox=Dt(i.settings.border),i.getEl("head").style.display="",r.deltaH+=r.headerH,wt([o,t.document.body]).removeClass(a+"fullscreen"),i.classes.remove("fullscreen"),i.moveTo(i._initial.x,i._initial.y).resizeTo(i._initial.w,i._initial.h);return i.reflow()},postRender:function(){var t,e=this;setTimeout((function(){e.classes.add("in"),e.fire("open")}),0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new le(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",(function(t){t.isDefaultPrevented()||e.close()})),Ie.push(e),Le(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),ze(this.classPrefix,!1),t=Ie.length;t--;)Ie[t]===this&&Ie.splice(t,1);Le(Ie.length>0)},getContentWindow:function(){var t=this.getEl().getElementsByTagName("iframe")[0];return t?t.contentWindow:null}});!function(){if(!lt.desktop){var e={w:t.window.innerWidth,h:t.window.innerHeight};R.setInterval((function(){var n=t.window.innerWidth,r=t.window.innerHeight;e.w===n&&e.h===r||(e={w:n,h:r},wt(t.window).trigger("resize"))}),100)}wt(t.window).on("resize",(function(){var t,e,n=Ct.getWindowSize();for(t=0;t<Ie.length;t++)e=Ie[t].layoutRect(),Ie[t].moveTo(Ie[t].settings.x||Math.max(0,n.w/2-e.w/2),Ie[t].settings.y||Math.max(0,n.h/2-e.h/2))}))}();var Ue,je,qe,Ve=Fe.extend({init:function(t){t={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(t)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){var n,r=e.callback||function(){};function i(t,e,n){return{type:"button",text:t,subtype:n?"primary":"",onClick:function(t){t.control.parents()[1].close(),r(e)}}}switch(e.buttons){case Ve.OK_CANCEL:n=[i("Ok",!0,!0),i("Cancel",!1)];break;case Ve.YES_NO:case Ve.YES_NO_CANCEL:n=[i("Yes",1,!0),i("No",0)],e.buttons===Ve.YES_NO_CANCEL&&n.push(i("Cancel",-1));break;default:n=[i("Ok",!0,!0)]}return new Fe({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){r(!1)}}).renderTo(t.document.body).reflow()},alert:function(t,e){return"string"==typeof t&&(t={text:t}),t.callback=e,Ve.msgBox(t)},confirm:function(t,e){return"string"==typeof t&&(t={text:t}),t.callback=e,t.buttons=Ve.OK_CANCEL,Ve.msgBox(t)}}}),Ye=function(e){return{renderUI:function(t){return Oe(e,this,t)},resizeTo:function(t,n){return ut(e,t,n)},resizeBy:function(t,n){return ct(e,t,n)},getNotificationManagerImpl:function(){return Be(e)},getWindowManagerImpl:function(){return{open:function(e,n,r){var i;return e.title=e.title||" ",e.url=e.url||e.file,e.url&&(e.width=parseInt(e.width||320,10),e.height=parseInt(e.height||240,10)),e.body&&(e.items={defaults:e.defaults,type:e.bodyType||"form",items:e.body,data:e.data,callbacks:e.commands}),e.url||e.buttons||(e.buttons=[{text:"Ok",subtype:"primary",onclick:function(){i.find("form")[0].submit()}},{text:"Cancel",onclick:function(){i.close()}}]),(i=new Fe(e)).on("close",(function(){r(i)})),e.data&&i.on("postRender",(function(){this.find("*").each((function(t){var n=t.name();n in e.data&&t.value(e.data[n])}))})),i.features=e||{},i.params=n||{},i=i.renderTo(t.document.body).reflow()},alert:function(t,e,n){var r;return(r=Ve.alert(t,(function(){e()}))).on("close",(function(){n(r)})),r},confirm:function(t,e,n){var r;return(r=Ve.confirm(t,(function(t){e(t)}))).on("close",(function(){n(r)})),r},close:function(t){t.close()},getParams:function(t){return t.params},setParams:function(t,e){t.params=e}}}}},$e=Nt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(t){this.settings=s.extend({},this.Defaults,t)},preRender:function(t){t.bodyClasses.add(this.settings.containerClass)},applyClasses:function(t){var e,n,r,i,o=this.settings;e=o.firstControlClass,n=o.lastControlClass,t.each((function(t){t.classes.remove(e).remove(n).add(o.controlClass),t.visible()&&(r||(r=t),i=t)})),r&&r.classes.add(e),i&&i.classes.add(n)},renderHtml:function(t){var e="";return this.applyClasses(t.items()),t.items().each((function(t){e+=t.renderHtml()})),e},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),Xe=$e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(t){t.items().filter(":visible").each((function(t){var e=t.settings;t.layoutRect({x:e.x,y:e.y,w:e.w,h:e.h}),t.recalc&&t.recalc()}))},renderHtml:function(t){return'<div id="'+t._id+'-absend" class="'+t.classPrefix+'abs-end"></div>'+this._super(t)}}),Ge=Ae.extend({Defaults:{classes:"widget btn",role:"button"},init:function(t){var e,n=this;n._super(t),t=n.settings,e=n.settings.size,n.on("click mousedown",(function(t){t.preventDefault()})),n.on("touchstart",(function(t){n.fire("click",t),t.preventDefault()})),t.subtype&&n.classes.add(t.subtype),e&&n.classes.add("btn-"+e),t.icon&&n.icon(t.icon)},icon:function(t){return arguments.length?(this.state.set("icon",t),this):this.state.get("icon")},repaint:function(){var t,e=this.getEl().firstChild;e&&((t=e.style).width=t.height="100%"),this._super()},renderHtml:function(){var e,n,r=this._id,i=this.classPrefix,o=this.state.get("icon"),a=this.state.get("text"),s="",u=this.settings;return(e=u.image)?(o="none","string"!=typeof e&&(e=t.window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",a&&(this.classes.add("btn-has-text"),s='<span class="'+i+'txt">'+this.encode(a)+"</span>"),o=o?i+"ico "+i+"i-"+o:"",n="boolean"==typeof u.active?' aria-pressed="'+u.active+'"':"",'<div id="'+r+'" class="'+this.classes+'" tabindex="-1"'+n+'><button id="'+r+'-button" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+s+"</button></div>"},bindStates:function(){var e=this,n=e.$,r=e.classPrefix+"txt";function i(t){var i=n("span."+r,e.getEl());t?(i[0]||(n("button:first",e.getEl()).append('<span class="'+r+'"></span>'),i=n("span."+r,e.getEl())),i.html(e.encode(t))):i.remove(),e.classes.toggle("btn-has-text",!!t)}return e.state.on("change:text",(function(t){i(t.value)})),e.state.on("change:icon",(function(n){var r=n.value,o=e.classPrefix;e.settings.icon=r,r=r?o+"ico "+o+"i-"+e.settings.icon:"";var a=e.getEl().firstChild,s=a.getElementsByTagName("i")[0];r?(s&&s===a.firstChild||(s=t.document.createElement("i"),a.insertBefore(s,a.firstChild)),s.className=r):s&&a.removeChild(s),i(e.state.get("text"))})),e._super()}}),Je=Ge.extend({init:function(t){t=s.extend({text:"Browse...",multiple:!1,accept:null},t),this._super(t),this.classes.add("browsebutton"),t.multiple&&this.classes.add("multiple")},postRender:function(){var t=this,e=Ct.create("input",{type:"file",id:t._id+"-browse",accept:t.settings.accept});t._super(),wt(e).on("change",(function(e){var n=e.target.files;t.value=function(){return n.length?t.settings.multiple?n:n[0]:null},e.preventDefault(),n.length&&t.fire("change",e)})),wt(e).on("click",(function(t){t.stopPropagation()})),wt(t.getEl("button")).on("click touchstart",(function(t){t.stopPropagation(),e.click(),t.preventDefault()})),t.getEl().appendChild(e)},remove:function(){wt(this.getEl("button")).off(),wt(this.getEl("input")).off(),this._super()}}),Ke=ue.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var t=this._layout;return this.classes.add("btn-group"),this.preRender(),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"}}),Qe=Ae.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(t){var e=this;e._super(t),e.on("click mousedown",(function(t){t.preventDefault()})),e.on("click",(function(t){t.preventDefault(),e.disabled()||e.checked(!e.checked())})),e.checked(e.settings.checked)},checked:function(t){return arguments.length?(this.state.set("checked",t),this):this.state.get("checked")},value:function(t){return arguments.length?this.checked(t):this.checked()},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+e+"ico "+e+'i-checkbox"></i><span id="'+t+'-al" class="'+e+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var e=this;function n(t){e.classes.toggle("checked",t),e.aria("checked",t)}return e.state.on("change:text",(function(t){e.getEl("al").firstChild.data=e.translate(t.value)})),e.state.on("change:checked change:value",(function(t){e.fire("change"),n(t.value)})),e.state.on("change:icon",(function(n){var r=n.value,i=e.classPrefix;if(void 0===r)return e.settings.icon;e.settings.icon=r,r=r?i+"ico "+i+"i-"+e.settings.icon:"";var o=e.getEl().firstChild,a=o.getElementsByTagName("i")[0];r?(a&&a===o.firstChild||(a=t.document.createElement("i"),o.insertBefore(a,o.firstChild)),a.className=r):a&&o.removeChild(a)})),e.state.get("checked")&&n(!0),e._super()}}),Ze=tinymce.util.Tools.resolve("tinymce.util.VK"),tn=Ae.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.classes.add("combobox"),e.subinput=!0,e.ariaTarget="inp",t.menu=t.menu||t.values,t.menu&&(t.icon="caret"),e.on("click",(function(n){var r=n.target,i=e.getEl();if(wt.contains(i,r)||r===i)for(;r&&r!==i;)r.id&&-1!==r.id.indexOf("-open")&&(e.fire("action"),t.menu&&(e.showMenu(),n.aria&&e.menu.items()[0].focus())),r=r.parentNode})),e.on("keydown",(function(t){var n;13===t.keyCode&&"INPUT"===t.target.nodeName&&(t.preventDefault(),e.parents().reverse().each((function(t){if(t.toJSON)return n=t,!1})),e.fire("submit",{data:n.toJSON()}))})),e.on("keyup",(function(t){if("INPUT"===t.target.nodeName){var n=e.state.get("value"),r=t.target.value;r!==n&&(e.state.set("value",r),e.fire("autocomplete",t))}})),e.on("mouseover",(function(t){var n=e.tooltip().moveTo(-65535);if(e.statusLevel()&&-1!==t.target.className.indexOf(e.classPrefix+"status")){var r=e.statusMessage()||"Ok",i=n.text(r).show().testMoveRel(t.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===i),n.classes.toggle("tooltip-nw","bc-tl"===i),n.classes.toggle("tooltip-ne","bc-tr"===i),n.moveRel(t.target,i)}}))},statusLevel:function(t){return arguments.length>0&&this.state.set("statusLevel",t),this.state.get("statusLevel")},statusMessage:function(t){return arguments.length>0&&this.state.set("statusMessage",t),this.state.get("statusMessage")},showMenu:function(){var t,e=this,n=e.settings;e.menu||((t=n.menu||[]).length?t={type:"menu",items:t}:t.type=t.type||"menu",e.menu=g.create(t).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",(function(t){t.control===e.menu&&e.focus()})),e.menu.on("show hide",(function(t){t.control.items().each((function(t){t.active(t.value()===e.value())}))})).fire("show"),e.menu.on("select",(function(t){e.value(t.control.value())})),e.on("focusin",(function(t){"INPUT"===t.target.tagName.toUpperCase()&&e.menu.hide()})),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,n,r=this.getEl(),i=this.getEl("open"),o=this.layoutRect(),a=0,s=r.firstChild;this.statusLevel()&&"none"!==this.statusLevel()&&(a=parseInt(Ct.getRuntimeStyle(s,"padding-right"),10)-parseInt(Ct.getRuntimeStyle(s,"padding-left"),10)),e=i?o.w-Ct.getSize(i).width-10:o.w-10;var u=t.document;return u.all&&(!u.documentMode||u.documentMode<=8)&&(n=this.layoutRect().h-2+"px"),wt(s).css({width:e-a,lineHeight:n}),this._super(),this},postRender:function(){var t=this;return wt(this.getEl("inp")).on("change",(function(e){t.state.set("value",e.target.value),t.fire("change",e)})),t._super()},renderHtml:function(){var t,e,n,r=this._id,i=this.settings,o=this.classPrefix,a=this.state.get("value")||"",s="",u="";return"spellcheck"in i&&(u+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(u+=' maxlength="'+i.maxLength+'"'),i.size&&(u+=' size="'+i.size+'"'),i.subtype&&(u+=' type="'+i.subtype+'"'),n='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',this.disabled()&&(u+=' disabled="disabled"'),(t=i.icon)&&"caret"!==t&&(t=o+"ico "+o+"i-"+i.icon),e=this.state.get("text"),(t||e)&&(s='<div id="'+r+'-open" class="'+o+"btn "+o+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==t?'<i class="'+t+'"></i>':'<i class="'+o+'caret"></i>')+(e?(t?" ":"")+e:"")+"</button></div>",this.classes.add("has-open")),'<div id="'+r+'" class="'+this.classes+'"><input id="'+r+'-inp" class="'+o+'textbox" value="'+this.encode(a,!1)+'" hidefocus="1"'+u+' placeholder="'+this.encode(i.placeholder)+'" />'+n+s+"</div>"},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(t,e){var n=this;if(0!==t.length){n.menu?n.menu.items().remove():n.menu=g.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),s.each(t,(function(t){var r,i;n.menu.add({text:t.title,url:t.previewUrl,match:e,classes:"menu-item-ellipsis",onclick:(r=t.value,i=t.title,function(){n.fire("selectitem",{title:i,value:r})})})})),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",(function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())})),n.menu.on("select",(function(){n.focus()}));var r=n.layoutRect().w;n.menu.layoutRect({w:r,minW:0,maxW:r}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var t=this;t.state.on("change:value",(function(e){t.getEl("inp").value!==e.value&&(t.getEl("inp").value=e.value)})),t.state.on("change:disabled",(function(e){t.getEl("inp").disabled=e.value})),t.state.on("change:statusLevel",(function(e){var n=t.getEl("status"),r=t.classPrefix,i=e.value;Ct.css(n,"display","none"===i?"none":""),Ct.toggleClass(n,r+"i-checkmark","ok"===i),Ct.toggleClass(n,r+"i-warning","warn"===i),Ct.toggleClass(n,r+"i-error","error"===i),t.classes.toggle("has-status","none"!==i),t.repaint()})),Ct.on(t.getEl("status"),"mouseleave",(function(){t.tooltip().hide()})),t.on("cancel",(function(e){t.menu&&t.menu.visible()&&(e.stopPropagation(),t.hideMenu())}));var e=function(t,e){e&&e.items().length>0&&e.items().eq(t)[0].focus()};return t.on("keydown",(function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===Ze.DOWN?(n.preventDefault(),t.fire("autocomplete"),e(0,t.menu)):r===Ze.UP&&(n.preventDefault(),e(-1,t.menu)))})),t._super()},remove:function(){wt(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),en=tn.extend({init:function(t){var e=this;t.spellcheck=!1,t.onaction&&(t.icon="none"),e._super(t),e.classes.add("colorbox"),e.on("change keyup postrender",(function(){e.repaintColor(e.value())}))},repaintColor:function(t){var e=this.getEl("open"),n=e?e.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=t}catch(t){}},bindStates:function(){var t=this;return t.state.on("change:value",(function(e){t.state.get("rendered")&&t.repaintColor(e.value)})),t._super()}}),nn=Ge.extend({showPanel:function(){var t=this,e=t.settings;if(t.classes.add("opened"),t.panel)t.panel.show();else{var n=e.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,t.panel=new Se(n).on("hide",(function(){t.classes.remove("opened")})).on("cancel",(function(e){e.stopPropagation(),t.focus(),t.hidePanel()})).parent(t).renderTo(t.getContainerElm()),t.panel.fire("show"),t.panel.reflow()}var r=t.panel.testMoveRel(t.getEl(),e.popoverAlign||(t.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));t.panel.classes.toggle("start","l"===r.substr(-1)),t.panel.classes.toggle("end","r"===r.substr(-1));var i="t"===r.substr(0,1);t.panel.classes.toggle("bottom",!i),t.panel.classes.toggle("top",i),t.panel.moveRel(t.getEl(),r)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",(function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))})),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),rn=m.DOM,on=nn.extend({init:function(t){this._super(t),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(t){return t?(this._color=t,this.getEl("preview").style.backgroundColor=t,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var t=this._id,e=this.classPrefix,n=this.state.get("text"),r=this.settings.icon?e+"ico "+e+"i-"+this.settings.icon:"",i=this.settings.image?" style=\"background-image: url('"+this.settings.image+"')\"":"",o="";return n&&(this.classes.add("btn-has-text"),o='<span class="'+e+'txt">'+this.encode(n)+"</span>"),'<div id="'+t+'" class="'+this.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+e+'preview"></span>'+o+'</button><button type="button" class="'+e+'open" hidefocus="1" tabindex="-1"> <i class="'+e+'caret"></i></button></div>'},postRender:function(){var t=this,e=t.settings.onclick;return t.on("click",(function(n){n.aria&&"down"===n.aria.key||n.control!==t||rn.getParent(n.target,"."+t.classPrefix+"open")||(n.stopImmediatePropagation(),e.call(t,n))})),delete t.settings.onclick,t._super()}}),an=tinymce.util.Tools.resolve("tinymce.util.Color"),sn=Ae.extend({Defaults:{classes:"widget colorpicker"},init:function(t){this._super(t)},postRender:function(){var t,e,n,r,i,o=this,a=o.color();function s(t,e){var n,r,i=Ct.getPos(t);return n=e.pageX-i.x,r=e.pageY-i.y,{x:n=Math.max(0,Math.min(n/t.clientWidth,1)),y:r=Math.max(0,Math.min(r/t.clientHeight,1))}}function u(t,e){var a=(360-t.h)/360;Ct.css(n,{top:100*a+"%"}),e||Ct.css(i,{left:t.s+"%",top:100-t.v+"%"}),r.style.background=an({s:100,v:100,h:t.h}).toHex(),o.color().parse({s:t.s,v:t.v,h:t.h})}function c(e){var n;n=s(r,e),t.s=100*n.x,t.v=100*(1-n.y),u(t),o.fire("change")}function l(n){var r;r=s(e,n),(t=a.toHsv()).h=360*(1-r.y),u(t,!0),o.fire("change")}e=o.getEl("h"),n=o.getEl("hp"),r=o.getEl("sv"),i=o.getEl("svp"),o._repaint=function(){u(t=a.toHsv())},o._super(),o._svdraghelper=new le(o._id+"-sv",{start:c,drag:c}),o._hdraghelper=new le(o._id+"-h",{start:l,drag:l}),o._repaint()},rgb:function(){return this.color().toRgb()},value:function(t){var e=this;if(!arguments.length)return e.color().toHex();e.color().parse(t),e._rendered&&e._repaint()},color:function(){return this._color||(this._color=an()),this._color},renderHtml:function(){var t,e=this._id,n=this.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return t='<div id="'+e+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);background: linear-gradient(to bottom,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);">'+function(){var t,e,i,o,a="";for(i="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",t=0,e=(o=r.split(",")).length-1;t<e;t++)a+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/e+"%;"+i+o[t]+",endColorstr="+o[t+1]+");-ms-"+i+o[t]+",endColorstr="+o[t+1]+')"></div>';return a}()+'<div id="'+e+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+e+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}}),un=Ae.extend({init:function(t){t=s.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},t),this._super(t),this.classes.add("dropzone"),t.multiple&&this.classes.add("multiple")},renderHtml:function(){var t,e,n=this.settings;return t={id:this._id,hidefocus:"1"},e=Ct.create("div",t,"<span>"+this.translate(n.text)+"</span>"),n.height&&Ct.css(e,"height",n.height+"px"),n.width&&Ct.css(e,"width",n.width+"px"),e.className=this.classes,e.outerHTML},postRender:function(){var t=this,e=function(e){e.preventDefault(),t.classes.toggle("dragenter"),t.getEl().className=t.classes};t._super(),t.$el.on("dragover",(function(t){t.preventDefault()})),t.$el.on("dragenter",e),t.$el.on("dragleave",e),t.$el.on("drop",(function(e){if(e.preventDefault(),!t.state.get("disabled")){var n=function(e){var n=t.settings.accept;if("string"!=typeof n)return e;var r=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return s.grep(e,(function(t){return r.test(t.name)}))}(e.dataTransfer.files);t.value=function(){return n.length?t.settings.multiple?n:n[0]:null},n.length&&t.fire("change",e)}}))},remove:function(){this.$el.off(),this._super()}}),cn=Ae.extend({init:function(t){var e=this;t.delimiter||(t.delimiter=""),e._super(t),e.classes.add("path"),e.canFocus=!0,e.on("click",(function(t){var n;(n=t.target.getAttribute("data-index"))&&e.fire("select",{value:e.row()[n],index:n})})),e.row(e.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(t){return arguments.length?(this.state.set("row",t),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",(function(e){t.innerHtml(t._getDataPathHtml(e.value))})),t._super()},_getDataPathHtml:function(t){var e,n,r=t||[],i="",o=this.classPrefix;for(e=0,n=r.length;e<n;e++)i+=(e>0?'<div class="'+o+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+o+"path-item"+(e===n-1?" "+o+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+this._id+"-"+e+'" aria-level="'+(e+1)+'">'+r[e].name+"</div>";return i||(i='<div class="'+o+'path-item"></div>'),i}}),ln=cn.extend({postRender:function(){var t=this,e=t.settings.editor;function n(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}return!1!==e.settings.elementpath&&(t.on("select",(function(t){e.focus(),e.selection.select(this.row()[t.index].element),e.nodeChanged()})),e.on("nodeChange",(function(r){for(var i=[],o=r.parents,a=o.length;a--;)if(1===o[a].nodeType&&!n(o[a])){var s=e.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});if(s.isDefaultPrevented()||i.push({name:s.name,element:o[a]}),s.isPropagationStopped())break}t.row(i)}))),t._super()}}),fn=ue.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var t=this._layout,e=this.classPrefix;return this.classes.add("formitem"),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<div id="'+this._id+'-title" class="'+e+'title">'+this.settings.title+"</div>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"}}),dn=ue.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var t=this,e=t.items();t.settings.formItemDefaults||(t.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),e.each((function(e){var n,r=e.settings.label;r&&((n=new fn(s.extend({items:{type:"label",id:e._id+"-l",text:r,flex:0,forId:e._id,disabled:e.disabled()}},t.settings.formItemDefaults))).type="formitem",e.aria("labelledby",e._id+"-l"),void 0===e.settings.flex&&(e.settings.flex=1),t.replace(e,n),n.add(e))}))},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var t=this;function e(){var e,n,r=0,i=[];if(!1!==t.settings.labelGapCalc)for(("children"===t.settings.labelGapCalc?t.find("formitem"):t.items()).filter("formitem").each((function(t){var e=t.items()[0],n=e.getEl().clientWidth;r=n>r?n:r,i.push(e)})),n=t.settings.labelGap||0,e=i.length;e--;)i[e].settings.minWidth=r+n}t._super(),t.on("show",e),e()}}),hn=dn.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var t=this._layout,e=this.classPrefix;return this.preRender(),t.preRender(this),'<fieldset id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<legend id="'+this._id+'-title" class="'+e+'fieldset-title">'+this.settings.title+"</legend>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></fieldset>"}}),mn=0,gn=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:_(t)}},pn={fromHtml:function(e,n){var r=(n||t.document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw t.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return gn(r.childNodes[0])},fromTag:function(e,n){var r=(n||t.document).createElement(e);return gn(r)},fromText:function(e,n){var r=(n||t.document).createTextNode(e);return gn(r)},fromDom:gn,fromPoint:function(t,e,n){var r=t.dom();return D.from(r.elementFromPoint(e,n)).map(gn)}},vn=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE,t.Node.DOCUMENT_NODE),bn=(t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE),yn=(t.Node.TEXT_NODE,t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,void 0!==t.window?t.window:Function("return this;")(),function(){return wn(0,0)}),wn=function(t,e){return{major:t,minor:e}},xn={nu:wn,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?yn():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return wn(r(1),r(2))}(t,n)},unknown:yn},Cn=function(t,e){return function(){return e===t}},Rn=function(t){var e=t.current;return{current:e,version:t.version,isEdge:Cn("Edge",e),isChrome:Cn("Chrome",e),isIE:Cn("IE",e),isOpera:Cn("Opera",e),isFirefox:Cn("Firefox",e),isSafari:Cn("Safari",e)}},Sn={unknown:function(){return Rn({current:void 0,version:xn.unknown()})},nu:Rn,edge:_("Edge"),chrome:_("Chrome"),ie:_("IE"),opera:_("Opera"),firefox:_("Firefox"),safari:_("Safari")},_n=function(t,e){return function(){return e===t}},kn=function(t){var e=t.current;return{current:e,version:t.version,isWindows:_n("Windows",e),isiOS:_n("iOS",e),isAndroid:_n("Android",e),isOSX:_n("OSX",e),isLinux:_n("Linux",e),isSolaris:_n("Solaris",e),isFreeBSD:_n("FreeBSD",e)}},Tn={unknown:function(){return kn({current:void 0,version:xn.unknown()})},nu:kn,windows:_("Windows"),ios:_("iOS"),android:_("Android"),linux:_("Linux"),osx:_("OSX"),solaris:_("Solaris"),freebsd:_("FreeBSD")},En=function(t,e){var n=String(e).toLowerCase();return function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e(i,n))return D.some(i)}return D.none()}(t,(function(t){return t.search(n)}))},Nn=function(t,e){return En(t,e).map((function(t){var n=xn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},On=function(t,e){return En(t,e).map((function(t){var n=xn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Dn=function(t,e){return-1!==t.indexOf(e)},An=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pn=function(t){return function(e){return Dn(e,t)}},Mn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Dn(t,"edge/")&&Dn(t,"chrome")&&Dn(t,"safari")&&Dn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,An],search:function(t){return Dn(t,"chrome")&&!Dn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Dn(t,"msie")||Dn(t,"trident")}},{name:"Opera",versionRegexes:[An,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pn("firefox")},{name:"Safari",versionRegexes:[An,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Dn(t,"safari")||Dn(t,"mobile/"))&&Dn(t,"applewebkit")}}],Hn=[{name:"Windows",search:Pn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Dn(t,"iphone")||Dn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Pn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pn("linux"),versionRegexes:[]},{name:"Solaris",search:Pn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pn("freebsd"),versionRegexes:[]}],Bn={browsers:_(Mn),oses:_(Hn)},In=function(t){var e=Bn.browsers(),n=Bn.oses(),r=Nn(e,t).fold(Sn.unknown,Sn.nu),i=On(n,t).fold(Tn.unknown,Tn.nu),o=function(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!r,o=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,s=r||o||a&&!0===/mobile/i.test(n),u=t.isiOS()||t.isAndroid(),c=u&&!s,l=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:_(r),isiPhone:_(i),isTablet:_(s),isPhone:_(c),isTouch:_(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:_(l)}}(i,r,t);return{browser:r,os:i,deviceType:o}},Wn=(Ue=function(){var e=t.navigator.userAgent;return In(e)},qe=!1,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return qe||(qe=!0,je=Ue.apply(null,t)),je}),Ln=bn,zn=vn,Fn=function(t){return t.nodeType!==Ln&&t.nodeType!==zn||0===t.childElementCount},Un=(Wn().browser.isIE(),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}("element","offset"),s.trim),jn=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},qn=jn("true"),Vn=jn("false"),Yn=function(t,e,n,r,i){return{type:t,title:e,url:n,level:r,attach:i}},$n=function(t){return t.innerText||t.textContent},Xn=function(t){return t.id?t.id:(e="h",n=(new Date).getTime(),e+"_"+Math.floor(1e9*Math.random())+ ++mn+String(n));var e,n},Gn=function(t){return function(t){return t&&"A"===t.nodeName&&(t.id||t.name)}(t)&&Kn(t)},Jn=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},Kn=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return qn(t)}return!1}(t)&&!Vn(t)},Qn=function(t){return Jn(t)&&Kn(t)},Zn=function(t){var e=Xn(t);return Yn("header",$n(t),"#"+e,function(t){return Jn(t)?parseInt(t.nodeName.substr(1),10):0}(t),(function(){t.id=e}))},tr=function(t){var e=t.id||t.name,n=$n(t);return Yn("anchor",n||"#"+e,"#"+e,0,S)},er=function(e){var n,r;return n="h1,h2,h3,h4,h5,h6,a:not([href])",r=e,J(({detect:Wn}.detect().browser.isIE(),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}("element","offset"),function(e,n){return function(e,n){var r=void 0===n?t.document:n.dom();return Fn(r)?[]:J(r.querySelectorAll(e),pn.fromDom)}(n,e)})(pn.fromDom(r),n),(function(t){return t.dom()}))},nr=function(t){return Un(t.title).length>0},rr=function(t){var e=er(t);return Q(function(t){return J(Q(t,Qn),Zn)}(e).concat(function(t){return J(Q(t,Gn),tr)}(e)),nr)},ir={},or=function(t){return{title:t.title,value:{title:{raw:t.title},url:t.url,attach:t.attach}}},ar=function(t,e){return{title:t,value:{title:t,url:e,attach:S}}},sr=function(t,e,n){var r=e in t?t[e]:n;return!1===r?null:r},ur=function(t,e,n,r){var i={title:"-"},o=function(t){var r=t.hasOwnProperty(n)?t[n]:[],i=Q(r,(function(t){return function(t,e){return!G(e,(function(e){return e.url===t}))}(t,e)}));return s.map(i,(function(t){return{title:t,value:{title:t,url:t,attach:S}}}))},a=function(t){return function(t){return s.map(t,or)}(Q(e,(function(e){return e.type===t})))};return!1===r.typeahead_urls?[]:"file"===n?function(t,e,n){return K(t,(function(t){n=e(n,t)})),n}([cr(t,o(ir)),cr(t,a("header")),cr(t,function(){var t=a("anchor"),e=sr(r,"anchor_top","#top"),n=sr(r,"anchor_bottom","#bottom");return null!==e&&t.unshift(ar("<top>",e)),null!==n&&t.push(ar("<bottom>",n)),t}())],(function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(i,e)}),[]):cr(t,o(ir))},cr=function(t,e){var n=t.toLowerCase(),r=s.grep(e,(function(t){return-1!==t.title.toLowerCase().indexOf(n)}));return 1===r.length&&r[0].title===t?[]:r},lr=function(t,e,n,r){var i=function(i){var o=rr(n),a=ur(i,o,r,e);t.showAutoComplete(a,i)};t.on("autocomplete",(function(){i(t.value())})),t.on("selectitem",(function(e){var n=e.value;t.value(n.url);var i=function(t){var e=t.title;return e.raw?e.raw:e}(n);"image"===r?t.fire("change",{meta:{alt:i,attach:n.attach}}):t.fire("change",{meta:{text:i,attach:n.attach}}),t.focus()})),t.on("click",(function(e){0===t.value().length&&"INPUT"===e.target.nodeName&&i("")})),t.on("PostRender",(function(){t.getRoot().on("submit",(function(e){e.isDefaultPrevented()||function(t,e){var n=ir[e];/^https?/.test(t)&&(n?X(n,t).isNone()&&(ir[e]=n.slice(0,5).concat(t)):ir[e]=[t])}(t.value(),r)}))}))},fr=function(t,e,n){var r=e.filepicker_validator_handler;r&&t.state.on("change:value",(function(e){var i;0!==(i=e.value).length?r({url:i,type:n},(function(e){var n=function(t){var e=t.status,n=t.message;return"valid"===e?{status:"ok",message:n}:"unknown"===e||"invalid"===e?{status:"warn",message:n}:{status:"none",message:""}}(e);t.statusMessage(n.message),t.statusLevel(n.status)})):t.statusLevel("none")}))},dr=tn.extend({Statics:{clearHistory:function(){ir={}}},init:function(t){var e,n,r,i=this,o=window.tinymce?window.tinymce.activeEditor:a.activeEditor,u=o.settings,c=t.filetype;t.spellcheck=!1,(r=u.file_picker_types||u.file_browser_callback_types)&&(r=s.makeMap(r,/[, ]/)),r&&!r[c]||(!(n=u.file_picker_callback)||r&&!r[c]?!(n=u.file_browser_callback)||r&&!r[c]||(e=function(){n(i.getEl("inp").id,i.value(),c,window)}):e=function(){var t=i.fire("beforecall").meta;t=s.extend({filetype:c},t),n.call(o,(function(t,e){i.value(t).fire("change",{meta:e})}),i.value(),t)}),e&&(t.icon="browse",t.onaction=e),i._super(t),i.classes.add("filepicker"),lr(i,u,o.getBody(),c),fr(i,u,c)}}),hr=Xe.extend({recalc:function(t){var e=t.layoutRect(),n=t.paddingBox;t.items().filter(":visible").each((function(t){t.layoutRect({x:n.left,y:n.top,w:e.innerW-n.right-n.left,h:e.innerH-n.top-n.bottom}),t.recalc&&t.recalc()}))}}),mr=Xe.extend({recalc:function(t){var e,n,r,i,o,a,s,u,c,l,f,d,h,m,g,p,v,b,y,w,x,C,R,S,_,k,T,E,N,O,D,A,P,M,H,B,I,W=[],L=Math.max,z=Math.min;for(r=t.items().filter(":visible"),i=t.layoutRect(),o=t.paddingBox,a=t.settings,d=t.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,u=t.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,"row-reversed"!==d&&"column-reverse"!==d||(r=r.set(r.toArray().reverse()),d=d.split("-")[0]),"column"===d?(S="y",C="h",R="minH",_="maxH",T="innerH",k="top",E="deltaH",N="contentH",M="left",A="w",O="x",D="innerW",P="minW",H="right",B="deltaW",I="contentW"):(S="x",C="w",R="minW",_="maxW",T="innerW",k="left",E="deltaW",N="contentW",M="top",A="h",O="y",D="innerH",P="minH",H="bottom",B="deltaH",I="contentH"),f=i[T]-o[k]-o[k],x=l=0,e=0,n=r.length;e<n;e++)m=(h=r[e]).layoutRect(),f-=e<n-1?c:0,(g=h.settings.flex)>0&&(l+=g,m[_]&&W.push(h),m.flex=g),f-=m[R],(p=o[M]+m[P]+o[H])>x&&(x=p);if((y={})[R]=f<0?i[R]-f+i[E]:i[T]-f+i[E],y[P]=x+i[B],y[N]=i[T]-f,y[I]=x,y.minW=z(y.minW,i.maxW),y.minH=z(y.minH,i.maxH),y.minW=L(y.minW,i.startMinWidth),y.minH=L(y.minH,i.startMinHeight),!i.autoResize||y.minW===i.minW&&y.minH===i.minH){for(b=f/l,e=0,n=W.length;e<n;e++)v=(m=(h=W[e]).layoutRect())[_],(p=m[R]+m.flex*b)>v?(f-=m[_]-m[R],l-=m.flex,m.flex=0,m.maxFlexSize=v):m.maxFlexSize=0;for(b=f/l,w=o[k],y={},0===l&&("end"===u?w=f+o[k]:"center"===u?(w=Math.round(i[T]/2-(i[T]-f)/2)+o[k])<0&&(w=o[k]):"justify"===u&&(w=o[k],c=Math.floor(f/(r.length-1)))),y[O]=o[M],e=0,n=r.length;e<n;e++)p=(m=(h=r[e]).layoutRect()).maxFlexSize||m[R],"center"===s?y[O]=Math.round(i[D]/2-m[A]/2):"stretch"===s?(y[A]=L(m[P]||0,i[D]-o[M]-o[H]),y[O]=o[M]):"end"===s&&(y[O]=i[D]-m[A]-o.top),m.flex>0&&(p+=m.flex*b),y[C]=p,y[S]=w,h.layoutRect(y),h.recalc&&h.recalc(),w+=p+c}else if(y.w=y.minW,y.h=y.minH,t.layoutRect(y),this.recalc(t),null===t._lastRect){var F=t.parent();F&&(F._lastRect=null,F.recalc())}}}),gr=$e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(t){t.items().filter(":visible").each((function(t){t.recalc&&t.recalc()}))},isNative:function(){return!0}}),pr=function(e,n){return function(e,n){var r=void 0===n?t.document:n.dom();return Fn(r)?D.none():D.from(r.querySelector(e)).map(pn.fromDom)}(n,e)},vr=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},br=function(t,e,n){var r=function(t){n(t,e)};t.formatter?t.formatter.formatChanged(e,r):t.on("init",(function(){t.formatter.formatChanged(e,r)}))},yr=function(t,e){return function(n){br(t,e,(function(t){n.control.active(t)}))}},wr=function(t){var e=["alignleft","aligncenter","alignright","alignjustify"],n=[{text:"Left",icon:"alignleft",onclick:vr(t,"alignleft")},{text:"Center",icon:"aligncenter",onclick:vr(t,"aligncenter")},{text:"Right",icon:"alignright",onclick:vr(t,"alignright")},{text:"Justify",icon:"alignjustify",onclick:vr(t,"alignjustify")}];t.addMenuItem("align",{text:"Align",menu:n}),t.addButton("align",{type:"menubutton",icon:"alignleft",menu:n,onShowMenu:function(n){var r=n.control.menu;s.each(e,(function(e,n){r.items().eq(n).each((function(n){return n.active(t.formatter.match(e))}))}))},onPostRender:function(n){var r=n.control;s.each(e,(function(e,n){br(t,e,(function(t){r.icon("alignleft"),t&&r.icon(e)}))}))}}),s.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},(function(e,n){t.addButton(n,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:yr(t,n)})}))},xr=function(t){return t?t.split(",")[0]:""},Cr=function(t,e){return function(){var n=this;n.state.set("value",null),t.on("init nodeChange",(function(r){var i=t.queryCommandValue("FontName"),o=function(t,e){var n,r=e?e.toLowerCase():"";return s.each(t,(function(t){t.value.toLowerCase()===r&&(n=t.value)})),s.each(t,(function(t){n||xr(t.value).toLowerCase()!==xr(r).toLowerCase()||(n=t.value)})),n}(e,i);n.value(o||null),!o&&i&&n.text(xr(i))}))}},Rr=function(t){t.addButton("fontselect",(function(){var e=function(t){var e=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return s.map(e,(function(t){return{text:{raw:t[0]},value:t[1],textStyle:-1===t[1].indexOf("dings")?"font-family:"+t[1]:""}}))}(t);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:Cr(t,e),onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}}))},Sr=function(t){Rr(t)},_r=function(t,e){return/[0-9.]+px$/.test(t)?function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(72*parseInt(t,10)/96,e||0)+"pt":t},kr=function(t,e,n){var r;return s.each(t,(function(t){t.value===n?r=n:t.value===e&&(r=e)})),r},Tr=function(t,e){return function(){var n=this;t.on("init nodeChange",(function(r){var i,o,a,s;if(i=t.queryCommandValue("FontSize"))for(a=3;!s&&a>=0;a--)o=_r(i,a),s=kr(e,o,i);n.value(s||null),s||n.text(o)}))}},Er=function(t){t.addButton("fontsizeselect",(function(){var e=function(t){var e=t.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return s.map(e.split(" "),(function(t){var e=t,n=t,r=t.split("=");return r.length>1&&(e=r[0],n=r[1]),{text:e,value:n}}))}(t);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:Tr(t,e),onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}}))},Nr=function(t){Er(t)},Or=function(t,e){var n=e.length;return s.each(e,(function(e){e.menu&&(e.hidden=0===Or(t,e.menu));var r=e.format;r&&(e.hidden=!t.formatter.canApply(r)),e.hidden&&n--})),n},Dr=function(t,e){var n=e.items().length;return e.items().each((function(e){e.menu&&e.visible(Dr(t,e.menu)>0),!e.menu&&e.settings.menu&&e.visible(Or(t,e.settings.menu)>0);var r=e.settings.format;r&&e.visible(t.formatter.canApply(r)),e.visible()||n--})),n},Ar=function(t){var e=function(t){var e=0,n=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],i=function(t){var r=[];if(t)return s.each(t,(function(t){var o={text:t.title,icon:t.icon};if(t.items)o.menu=i(t.items);else{var a=t.format||"custom"+e++;t.format||(t.name=a,n.push(t)),o.format=a,o.cmd=t.cmd}r.push(o)})),r};return t.on("init",(function(){s.each(n,(function(e){t.formatter.register(e.name,e)}))})),{type:"menu",items:t.settings.style_formats_merge?t.settings.style_formats?i(r.concat(t.settings.style_formats)):i(r):i(t.settings.style_formats||r),onPostRender:function(e){t.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return t.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",(function(){var n,r;(n=e.settings.format)&&(e.disabled(!t.formatter.canApply(n)),e.active(t.formatter.match(n))),(r=e.settings.cmd)&&e.active(t.queryCommandState(r))}))},onclick:function(){this.settings.format&&vr(t,this.settings.format)(),this.settings.cmd&&t.execCommand(this.settings.cmd)}}}}(t);!function(t,e){t.addMenuItem("formats",{text:"Formats",menu:e})}(t,e),function(t,e){t.addButton("styleselect",{type:"menubutton",text:"Formats",menu:e,onShowMenu:function(){t.settings.style_formats_autohide&&Dr(t,this.menu)}})}(t,e)},Pr=function(t,e,n){return function(){var r=this;t.on("nodeChange",(function(i){var o=t.formatter,a=null;s.each(i.parents,(function(t){if(s.each(e,(function(e){if(n?o.matchNode(t,n,{value:e.value})&&(a=e.value):o.matchNode(t,e.value)&&(a=e.value),a)return!1})),a)return!1})),r.value(a)}))}},Mr=function(t,e){return s.map(e,(function(e){return{text:e[0],onclick:vr(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}}))},Hr=function(t){var e=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");t.addMenuItem("blockformats",{text:"Blocks",menu:Mr(t,e)}),t.addButton("formatselect",function(t,e){return function(){var n=[];return s.each(e,(function(e){n.push({text:e[0],value:e[1],textStyle:function(){return t.formatter.getCssText(e[1])}})})),{type:"listbox",text:e[0][0],values:n,fixedWidth:!0,onselect:function(e){if(e.control){var n=e.control.value();vr(t,n)()}},onPostRender:Pr(t,n)}}}(t,e))},Br=function(t,e){var n,r;if("string"==typeof e)r=e.split(" ");else if(s.isArray(e))return function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!j(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);$.apply(e,t[n])}return e}(s.map(e,(function(e){return Br(t,e)})));return n=s.grep(r,(function(e){return"|"===e||e in t.menuItems})),s.map(n,(function(e){return"|"===e?{text:"-"}:t.menuItems[e]}))},Ir=function(t){return t&&"-"===t.text},Wr=function(t){var e=Q(t,(function(e,n){return!Ir(e)||!Ir(t[n-1])}));return Q(e,(function(t,n){return!Ir(t)||n>0&&n<e.length-1}))},Lr=function(t){var e=t.settings.insert_button_items;return Wr(e?Br(t,e):function(t,e){var n=[{text:"-"}],r=s.grep(t.menuItems,(function(t){return t.context===e}));return s.each(r,(function(t){"before"===t.separator&&n.push({text:"|"}),t.prependToContext?n.unshift(t):n.push(t),"after"===t.separator&&n.push({text:"|"})})),n}(t,"insert"))},zr=function(t){!function(t){t.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(Lr(t)),this.menu.renderNew()}})}(t)},Fr=function(t){!function(t){s.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},(function(e,n){t.addButton(n,{active:!1,tooltip:e,onPostRender:yr(t,n),onclick:vr(t,n)})}))}(t),function(t){s.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},(function(e,n){t.addButton(n,{tooltip:e[0],cmd:e[1]})}))}(t),function(t){s.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},(function(e,n){t.addButton(n,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:yr(t,n)})}))}(t)},Ur=function(t){Fr(t),function(t){s.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},(function(e,n){t.addMenuItem(n,{text:e[0],icon:n,shortcut:e[2],cmd:e[1]})})),t.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:vr(t,"code")})}(t)},jr=function(t,e){return function(){var n=this,r=function(){var n="redo"===e?"hasRedo":"hasUndo";return!!t.undoManager&&t.undoManager[n]()};n.disabled(!r()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(function(){n.disabled(t.readonly||!r())}))}},qr=function(t){!function(t){t.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:jr(t,"undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:jr(t,"redo"),cmd:"redo"})}(t),function(t){t.addButton("undo",{tooltip:"Undo",onPostRender:jr(t,"undo"),cmd:"undo"}),t.addButton("redo",{tooltip:"Redo",onPostRender:jr(t,"redo"),cmd:"redo"})}(t)},Vr=function(t){return function(){var e=this;t.on("VisualAid",(function(t){e.active(t.hasVisual)})),e.active(t.hasVisual)}},Yr=function(t){!function(t){t.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:Vr(t),cmd:"mceToggleVisualAid"})}(t)},$r={setup:function(e){!function(t){t.rtl&&(ie.rtl=!0)}(e),function(t){t.on("mousedown progressstate",(function(){Se.hideAll()}))}(e),function(e){e.settings.ui_container&&(lt.container=pr(pn.fromDom(t.document.body),e.settings.ui_container).fold(_(null),(function(t){return t.dom()})))}(e),Ae.tooltips=!lt.iOS,ie.translate=function(t){return a.translate(t)},Hr(e),wr(e),Ur(e),qr(e),Nr(e),Sr(e),Ar(e),Yr(e),zr(e)}},Xr=Xe.extend({recalc:function(t){var e,n,r,i,o,a,s,u,c,l,f,d,h,m,g,p,v,b,y,w,x,C,R,S,_,k,T,E,N=[],O=[];e=t.settings,i=t.items().filter(":visible"),o=t.layoutRect(),r=e.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),b=e.spacingH||e.spacing||0,y=e.spacingV||e.spacing||0,w=e.alignH||e.align,x=e.alignV||e.align,p=t.paddingBox,E="reverseRows"in e?e.reverseRows:t.isRtl(),w&&"string"==typeof w&&(w=[w]),x&&"string"==typeof x&&(x=[x]);for(f=0;f<r;f++)N.push(0);for(d=0;d<n;d++)O.push(0);for(d=0;d<n;d++)for(f=0;f<r&&(l=i[d*r+f]);f++)S=(c=l.layoutRect()).minW,_=c.minH,N[f]=S>N[f]?S:N[f],O[d]=_>O[d]?_:O[d];for(k=o.innerW-p.left-p.right,C=0,f=0;f<r;f++)C+=N[f]+(f>0?b:0),k-=(f>0?b:0)+N[f];for(T=o.innerH-p.top-p.bottom,R=0,d=0;d<n;d++)R+=O[d]+(d>0?y:0),T-=(d>0?y:0)+O[d];if(C+=p.left+p.right,R+=p.top+p.bottom,(u={}).minW=C+(o.w-o.innerW),u.minH=R+(o.h-o.innerH),u.contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH,u.minW=Math.min(u.minW,o.maxW),u.minH=Math.min(u.minH,o.maxH),u.minW=Math.max(u.minW,o.startMinWidth),u.minH=Math.max(u.minH,o.startMinHeight),!o.autoResize||u.minW===o.minW&&u.minH===o.minH){var D;o.autoResize&&((u=t.layoutRect(u)).contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH),D="start"===e.packV?0:T>0?Math.floor(T/n):0;var A=0,P=e.flexWidths;if(P)for(f=0;f<P.length;f++)A+=P[f];else A=r;var M=k/A;for(f=0;f<r;f++)N[f]+=P?P[f]*M:M;for(m=p.top,d=0;d<n;d++){for(h=p.left,s=O[d]+D,f=0;f<r&&(l=i[E?d*r+r-1-f:d*r+f]);f++)g=l.settings,c=l.layoutRect(),a=Math.max(N[f],c.startMinWidth),c.x=h,c.y=m,"center"===(v=g.alignH||(w?w[f]||w[0]:null))?c.x=h+a/2-c.w/2:"right"===v?c.x=h+a-c.w:"stretch"===v&&(c.w=a),"center"===(v=g.alignV||(x?x[f]||x[0]:null))?c.y=m+s/2-c.h/2:"bottom"===v?c.y=m+s-c.h:"stretch"===v&&(c.h=s),l.layoutRect(c),h+=a+b,l.recalc&&l.recalc();m+=s+y}}else if(u.w=u.minW,u.h=u.minH,t.layoutRect(u),this.recalc(t),null===t._lastRect){var H=t.parent();H&&(H._lastRect=null,H.recalc())}}}),Gr=Ae.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(t){this.getEl().src=t},html:function(t,e){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=t,e&&e()):R.setTimeout((function(){n.html(t)})),this}}),Jr=Ae.extend({init:function(t){this._super(t),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},help:function(t){this.state.set("help",t)},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",(function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()})),t.state.on("change:help",(function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()})),t._super()}}),Kr=Ae.extend({init:function(t){this._super(t),this.classes.add("widget").add("label"),this.canFocus=!1,t.multiline&&this.classes.add("autoscroll"),t.strong&&this.classes.add("strong")},initLayoutRect:function(){var t=this._super();return this.settings.multiline&&(Ct.getSize(this.getEl()).width>t.maxW&&(t.minW=t.maxW,this.classes.add("multiline")),this.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,Ct.getSize(this.getEl()).height)),t},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},renderHtml:function(){var t,e,n=this.settings.forId,r=this.settings.html?this.settings.html:this.encode(this.state.get("text"));return!n&&(e=this.settings.forName)&&(t=this.getRoot().find("#"+e)[0])&&(n=t._id),n?'<label id="'+this._id+'" class="'+this.classes+'"'+(n?' for="'+n+'"':"")+">"+r+"</label>":'<span id="'+this._id+'" class="'+this.classes+'">'+r+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",(function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()})),t._super()}}),Qr=ue.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(t){this._super(t),this.classes.add("toolbar")},postRender:function(){return this.items().each((function(t){t.classes.add("toolbar-item")})),this._super()}}),Zr=Qr.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),ti=Ge.extend({init:function(t){this._renderOpen=!0,this._super(t),t=this.settings,this.classes.add("menubtn"),t.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",t.menu||this.render())},showMenu:function(t){var e,n=this;if(n.menu&&n.menu.visible()&&!1!==t)return n.hideMenu();n.menu||(e=n.state.get("menu")||[],n.classes.add("opened"),e.length?e={type:"menu",animate:!0,items:e}:(e.type=e.type||"menu",e.animate=!0),e.renderTo?n.menu=e.parent(n).show().renderTo():n.menu=g.create(e).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",(function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())})),n.menu.on("select",(function(){n.focus()})),n.menu.on("show hide",(function(t){"hide"===t.type&&t.control.parent()===n&&n.classes.remove("opened-under"),t.control===n.menu&&(n.activeMenu("show"===t.type),n.classes.toggle("opened","show"===t.type)),n.aria("expanded","show"===t.type)})).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var r=n.menu.layoutRect(),i=n.$el.offset().top+n.layoutRect().h;i>r.y&&i<r.y+r.h&&n.classes.add("opened-under"),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each((function(t){t.hideMenu&&t.hideMenu()})),this.menu.hide())},activeMenu:function(t){this.classes.toggle("active",t)},renderHtml:function(){var e,n=this._id,r=this.classPrefix,i=this.settings.icon,o=this.state.get("text"),a="";return(e=this.settings.image)?(i="none","string"!=typeof e&&(e=t.window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o&&(this.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+this.encode(o)+"</span>"),i=this.settings.icon?r+"ico "+r+"i-"+i:"",this.aria("role",this.parent()instanceof Zr?"menuitem":"button"),'<div id="'+n+'" class="'+this.classes+'" tabindex="-1" aria-labelledby="'+n+'"><button id="'+n+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+a+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var t=this;return t.on("click",(function(e){e.control===t&&function(t,e){for(;t;){if(e===t)return!0;t=t.parentNode}return!1}(e.target,t.getEl())&&(t.focus(),t.showMenu(!e.aria),e.aria&&t.menu.items().filter(":visible")[0].focus())})),t.on("mouseenter",(function(e){var n,r=e.control,i=t.parent();r&&i&&r instanceof ti&&r.parent()===i&&(i.items().filter("MenuButton").each((function(t){t.hideMenu&&t!==r&&(t.menu&&t.menu.visible()&&(n=!0),t.hideMenu())})),n&&(r.focus(),r.showMenu()))})),t._super()},bindStates:function(){var t=this;return t.state.on("change:menu",(function(){t.menu&&t.menu.remove(),t.menu=null})),t._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),ei=Se.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var e=t.items,n=e.length;n--;)e[n]=s.extend({},t.itemDefaults,e[n]);this._super(t),this.classes.add("menu"),t.animate&&11!==lt.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var t,e=this;function n(){e.throbber&&(e.throbber.hide(),e.throbber=null)}e.settings.itemsFactory&&(e.throbber||(e.throbber=new Ee(e.getEl("body"),!0),0===e.items().length?(e.throbber.show(),e.fire("loading")):e.throbber.show(100,(function(){e.items().remove(),e.fire("loading")})),e.on("hide close",n)),e.requestTime=t=(new Date).getTime(),e.settings.itemsFactory((function(r){0!==r.length?e.requestTime===t&&(e.getEl().style.width="",e.getEl("body").style.width="",n(),e.items().remove(),e.getEl("body").innerHTML="",e.add(r),e.renderNew(),e.fire("loaded")):e.hide()})))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var t=this;return t.items().each((function(e){var n=e.settings;if(n.icon||n.image||n.selectable)return t._hasIcons=!0,!1})),t.settings.itemsFactory&&t.on("postrender",(function(){t.settings.itemsFactory&&t.load()})),t.on("show hide",(function(e){e.control===t&&("show"===e.type?R.setTimeout((function(){t.classes.add("in")}),0):t.classes.remove("in"))})),t._super()}}),ni=ti.extend({init:function(t){var e,n,r,i,o=this;o._super(t),t=o.settings,o._values=e=t.values,e&&(void 0!==t.value&&function e(i){for(var a=0;a<i.length;a++){if(n=i[a].selected||t.value===i[a].value)return r=r||i[a].text,o.state.set("value",i[a].value),!0;if(i[a].menu&&e(i[a].menu))return!0}}(e),!n&&e.length>0&&(r=e[0].text,o.state.set("value",e[0].value)),o.state.set("menu",e)),o.state.set("text",t.text||r),o.classes.add("listbox"),o.on("select",(function(e){var n=e.control;i&&(e.lastControl=i),t.multiple?n.active(!n.active()):o.value(e.control.value()),i=n}))},value:function(t){if(0===arguments.length)return this.state.get("value");if(void 0===t)return this;function e(n){return G(n,(function(n){return n.menu?e(n.menu):n.value===t}))}return this.settings.values?e(this.settings.values)?this.state.set("value",t):null===t&&this.state.set("value",null):this.state.set("value",t),this},bindStates:function(){var t=this;return t.on("show",(function(e){var n,r;n=e.control,r=t.value(),n instanceof ei&&n.items().each((function(t){t.hasMenus()||t.active(t.value()===r)}))})),t.state.on("change:value",(function(e){var n=function t(e,n){var r;if(e)for(var i=0;i<e.length;i++){if(e[i].value===n)return e[i];if(e[i].menu&&(r=t(e[i].menu,n)))return r}}(t.state.get("menu"),e.value);n?t.text(n.text):t.text(t.settings.text)})),t._super()}}),ri=Ae.extend({Defaults:{border:0,role:"menuitem"},init:function(t){var e;this._super(t),t=this.settings,this.classes.add("menu-item"),t.menu&&this.classes.add("menu-item-expand"),t.preview&&this.classes.add("menu-item-preview"),"-"!==(e=this.state.get("text"))&&"|"!==e||(this.classes.add("menu-item-sep"),this.aria("role","separator"),this.state.set("text","-")),t.selectable&&(this.aria("role","menuitemcheckbox"),this.classes.add("menu-item-checkbox"),t.icon="selected"),t.preview||t.selectable||this.classes.add("menu-item-normal"),this.on("mousedown",(function(t){t.preventDefault()})),t.menu&&!t.ariaHideMenu&&this.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,e=this,n=e.settings,r=e.parent();if(r.items().each((function(t){t!==e&&t.hideMenu()})),n.menu){(t=e.menu)?t.show():((t=n.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",r.settings.itemDefaults&&(t.itemDefaults=r.settings.itemDefaults),(t=e.menu=g.create(t).parent(e).renderTo()).reflow(),t.on("cancel",(function(n){n.stopPropagation(),e.focus(),t.hide()})),t.on("show hide",(function(t){t.control.items&&t.control.items().each((function(t){t.active(t.settings.selected)}))})).fire("show"),t.on("hide",(function(n){n.control===t&&e.classes.remove("selected")})),t.submenu=!0),t._parentMenu=r,t.classes.add("menu-sub");var i=t.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);t.moveRel(e.getEl(),i),t.rel=i,i="menu-sub-"+i,t.classes.remove(t._lastRel).add(i),t._lastRel=i,e.classes.add("selected"),e.aria("expanded",!0)}},hideMenu:function(){return this.menu&&(this.menu.items().each((function(t){t.hideMenu&&t.hideMenu()})),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var t,e=this._id,n=this.settings,r=this.classPrefix,i=this.state.get("text"),o=this.settings.icon,a="",s=n.shortcut,u=this.encode(n.url);function c(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(t){var e=n.match||"";return e?t.replace(new RegExp(c(e),"gi"),(function(t){return"!mce~match["+t+"]mce~match!"})):t}function f(t){return t.replace(new RegExp(c("!mce~match["),"g"),"<b>").replace(new RegExp(c("]mce~match!"),"g"),"</b>")}return o&&this.parent().classes.add("menu-has-icons"),n.image&&(a=" style=\"background-image: url('"+n.image+"')\""),s&&(s=function(t){var e,n,r={};for(r=lt.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},t=t.split("+"),e=0;e<t.length;e++)(n=r[t[e].toLowerCase()])&&(t[e]=n);return t.join("+")}(s)),o=r+"ico "+r+"i-"+(this.settings.icon||"none"),t="-"!==i?'<i class="'+o+'"'+a+"></i>":"",i=f(this.encode(l(i))),u=f(this.encode(l(u))),'<div id="'+e+'" class="'+this.classes+'" tabindex="-1">'+t+("-"!==i?'<span id="'+e+'-text" class="'+r+'text">'+i+"</span>":"")+(s?'<div id="'+e+'-shortcut" class="'+r+'menu-shortcut">'+s+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+(u?'<div class="'+r+'menu-item-link">'+u+"</div>":"")+"</div>"},postRender:function(){var t=this,e=t.settings,n=e.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=t.getEl("text");r&&(r.setAttribute("style",n),t._textStyle=n)}return t.on("mouseenter click",(function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.aria&&t.menu.focus(!0)):(t.fire("select"),R.requestAnimationFrame((function(){t.parent().hideAll()}))))})),t._super(),t},hover:function(){return this.parent().items().each((function(t){t.classes.remove("selected")})),this.classes.toggle("selected",!0),this},active:function(t){return function(t,e){var n=t._textStyle;if(n){var r=t.getEl("text");r.setAttribute("style",n),e&&(r.style.color="",r.style.backgroundColor="")}}(this,t),void 0!==t&&this.aria("checked",t),this._super(t)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),ii=Qe.extend({Defaults:{classes:"radio",role:"radio"}}),oi=Ae.extend({renderHtml:function(){var t=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new le(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!==t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function ai(t){var e="";if(t)for(var n=0;n<t.length;n++)e+='<option value="'+t[n]+'">'+t[n]+"</option>";return e}var si=Ae.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(t){var e=this;e._super(t),e.settings.size&&(e.size=e.settings.size),e.settings.options&&(e._options=e.settings.options),e.on("keydown",(function(t){var n;13===t.keyCode&&(t.preventDefault(),e.parents().reverse().each((function(t){if(t.toJSON)return n=t,!1})),e.fire("submit",{data:n.toJSON()}))}))},options:function(t){return arguments.length?(this.state.set("options",t),this):this.state.get("options")},renderHtml:function(){var t,e="";return t=ai(this._options),this.size&&(e=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+e+">"+t+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",(function(e){t.getEl().innerHTML=ai(e.value)})),t._super()}});function ui(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}function ci(t,e,n){t.setAttribute("aria-"+e,n)}function li(t,e){var n,r,i,o,a;"v"===t.settings.orientation?(i="top",r="height",n="h"):(i="left",r="width",n="w"),a=t.getEl("handle"),o=((t.layoutRect()[n]||100)-Ct.getSize(a)[r])*((e-t._minValue)/(t._maxValue-t._minValue))+"px",a.style[i]=o,a.style.height=t.layoutRect().h+"px",ci(a,"valuenow",e),ci(a,"valuetext",""+t.settings.previewFilter(e)),ci(a,"valuemin",t._minValue),ci(a,"valuemax",t._maxValue)}var fi=Ae.extend({init:function(t){t.previewFilter||(t.previewFilter=function(t){return Math.round(100*t)/100}),this._super(t),this.classes.add("slider"),"v"===t.orientation&&this.classes.add("vertical"),this._minValue=V(t.minValue)?t.minValue:0,this._maxValue=V(t.maxValue)?t.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-handle" class="'+e+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var t,e,n,r,i,o,a=this;t=a._minValue,e=a._maxValue,"v"===a.settings.orientation?(n="screenY",r="top",i="height",o="h"):(n="screenX",r="left",i="width",o="w"),a._super(),function(t,e){function n(n){var r,i;r=a.value(),r=ui(r=function(t,e,n){return n*(e-t)-t}(t,e,(r+(i=t))/(e-i)+.05*n),t,e),a.value(r),a.fire("dragstart",{value:r}),a.fire("drag",{value:r}),a.fire("dragend",{value:r})}a.on("keydown",(function(t){switch(t.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}}))}(t,e),function(t,e,s){var u,c,l,f,d;a._dragHelper=new le(a._id,{handle:a._id+"-handle",start:function(t){u=t[n],c=parseInt(a.getEl("handle").style[r],10),l=(a.layoutRect()[o]||100)-Ct.getSize(s)[i],a.fire("dragstart",{value:d})},drag:function(i){var o=i[n]-u;f=ui(c+o,0,l),s.style[r]=f+"px",d=t+f/l*(e-t),a.value(d),a.tooltip().text(""+a.settings.previewFilter(d)).show().moveRel(s,"bc tc"),a.fire("drag",{value:d})},stop:function(){a.tooltip().hide(),a.fire("dragend",{value:d})}})}(t,e,a.getEl("handle"))},repaint:function(){this._super(),li(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",(function(e){li(t,e.value)})),t._super()}}),di=Ae.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),hi=ti.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var t,e,n=this.getEl(),r=this.layoutRect();return this._super(),t=n.firstChild,e=n.lastChild,wt(t).css({width:r.w-Ct.getSize(e).width,height:r.h-2}),wt(e).css({height:r.h-2}),this},activeMenu:function(t){wt(this.getEl().lastChild).toggleClass(this.classPrefix+"active",t)},renderHtml:function(){var e,n,r=this._id,i=this.classPrefix,o=this.state.get("icon"),a=this.state.get("text"),s=this.settings,u="";return(e=s.image)?(o="none","string"!=typeof e&&(e=t.window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o=s.icon?i+"ico "+i+"i-"+o:"",a&&(this.classes.add("btn-has-text"),u='<span class="'+i+'txt">'+this.encode(a)+"</span>"),n="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+r+'" class="'+this.classes+'" role="button"'+n+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+u+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(this._menuBtnText?(o?"":"")+this._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var t=this.settings.onclick;return this.on("click",(function(e){var n=e.target;if(e.control===this)for(;n;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}})),delete this.settings.onclick,this._super()}}),mi=gr.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),gi=pe.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(t){var e;this.activeTabId&&(e=this.getEl(this.activeTabId),wt(e).removeClass(this.classPrefix+"active"),e.setAttribute("aria-selected","false")),this.activeTabId="t"+t,(e=this.getEl("t"+t)).setAttribute("aria-selected","true"),wt(e).addClass(this.classPrefix+"active"),this.items()[t].show().fire("showtab"),this.reflow(),this.items().each((function(e,n){t!==n&&e.hide()}))},renderHtml:function(){var t=this,e=t._layout,n="",r=t.classPrefix;return t.preRender(),e.preRender(t),t.items().each((function(e,i){var o=t._id+"-t"+i;e.aria("role","tabpanel"),e.aria("labelledby",o),n+='<div id="'+o+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+t.encode(e.settings.title)+"</div>"})),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1"><div id="'+t._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+e.renderHtml(t)+"</div></div>"},postRender:function(){var t=this;t._super(),t.settings.activeTab=t.settings.activeTab||0,t.activateTab(t.settings.activeTab),this.on("click",(function(e){var n=e.target.parentNode;if(n&&n.id===t._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]===e.target&&t.activateTab(r)}))},initLayoutRect:function(){var t,e,n;e=(e=Ct.getSize(this.getEl("head")).width)<0?0:e,n=0,this.items().each((function(t){e=Math.max(e,t.layoutRect().minW),n=Math.max(n,t.layoutRect().minH)})),this.items().each((function(t){t.settings.x=0,t.settings.y=0,t.settings.w=e,t.settings.h=n,t.layoutRect({x:0,y:0,w:e,h:n})}));var r=Ct.getSize(this.getEl("head")).height;return this.settings.minWidth=e,this.settings.minHeight=n+r,(t=this._super()).deltaH+=r,t.innerH=t.h-t.deltaH,t}}),pi=Ae.extend({init:function(t){var e=this;e._super(t),e.classes.add("textbox"),t.multiline?e.classes.add("multiline"):(e.on("keydown",(function(t){var n;13===t.keyCode&&(t.preventDefault(),e.parents().reverse().each((function(t){if(t.toJSON)return n=t,!1})),e.fire("submit",{data:n.toJSON()}))})),e.on("keyup",(function(t){e.state.set("value",t.target.value)})))},repaint:function(){var e,n,r,i,o,a=0;e=this.getEl().style,n=this._layoutRect,o=this._lastRepaintRect||{};var s=t.document;return!this.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(e.lineHeight=n.h-a+"px"),i=(r=this.borderBox).left+r.right+8,a=r.top+r.bottom+(this.settings.multiline?8:0),n.x!==o.x&&(e.left=n.x+"px",o.x=n.x),n.y!==o.y&&(e.top=n.y+"px",o.y=n.y),n.w!==o.w&&(e.width=n.w-i+"px",o.w=n.w),n.h!==o.h&&(e.height=n.h-a+"px",o.h=n.h),this._lastRepaintRect=o,this.fire("repaint",{},!1),this},renderHtml:function(){var t,e,n=this.settings;return t={id:this._id,hidefocus:"1"},s.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],(function(e){t[e]=n[e]})),this.disabled()&&(t.disabled="disabled"),n.subtype&&(t.type=n.subtype),(e=Ct.create(n.multiline?"textarea":"input",t)).value=this.state.get("value"),e.className=this.classes.toString(),e.outerHTML},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",(function(e){t.state.set("value",e.target.value),t.fire("change",e)}))},bindStates:function(){var t=this;return t.state.on("change:value",(function(e){t.getEl().value!==e.value&&(t.getEl().value=e.value)})),t.state.on("change:disabled",(function(e){t.getEl().disabled=e.value})),t._super()},remove:function(){this.$el.off(),this._super()}}),vi=function(){return{Selector:Ft,Collection:qt,ReflowQueue:Qt,Control:ie,Factory:g,KeyboardNavigation:ae,Container:ue,DragHelper:le,Scrollable:ge,Panel:pe,Movable:Et,Resizable:ve,FloatPanel:Se,Window:Fe,MessageBox:Ve,Tooltip:De,Widget:Ae,Progress:Pe,Notification:He,Layout:$e,AbsoluteLayout:Xe,Button:Ge,ButtonGroup:Ke,Checkbox:Qe,ComboBox:tn,ColorBox:en,PanelButton:nn,ColorButton:on,ColorPicker:sn,Path:cn,ElementPath:ln,FormItem:fn,Form:dn,FieldSet:hn,FilePicker:dr,FitLayout:hr,FlexLayout:mr,FlowLayout:gr,FormatControls:$r,GridLayout:Xr,Iframe:Gr,InfoBox:Jr,Label:Kr,Toolbar:Qr,MenuBar:Zr,MenuButton:ti,MenuItem:ri,Throbber:Ee,Menu:ei,ListBox:ni,Radio:ii,ResizeHandle:oi,SelectBox:si,Slider:fi,Spacer:di,SplitButton:hi,StackLayout:mi,TabPanel:gi,TextBox:pi,DropZone:un,BrowseButton:Je}},bi=function(t){t.ui?s.each(vi(),(function(e,n){t.ui[n]=e})):t.ui=vi()};s.each(vi(),(function(t,e){g.add(e,t)})),bi(window.tinymce?window.tinymce:{}),o.add("modern",(function(t){return $r.setup(t),Ye(t)}))}(window)}).call(window)},lM69:function(t,e){(function(){!function(t){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){},r=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))}},i=function(t){return function(){return t}},o=function(t){return t};function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.concat(n);return t.apply(null,i)}}var s=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}},u=i(!1),c=i(!0),l=function(){return f},f=function(){var t=function(t){return t.isNone()},e=function(t){return t()},r=function(t){return t},o={fold:function(t,e){return t()},is:u,isSome:u,isNone:c,getOr:r,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:r,orThunk:e,map:l,each:n,bind:l,exists:u,forall:c,filter:l,equals:t,equals_:t,toArray:function(){return[]},toString:i("none()")};return Object.freeze&&Object.freeze(o),o}(),d=function(t){var e=i(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:c,isNone:u,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return d(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:f},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(u,(function(e){return n(t,e)}))}};return o},h={some:d,none:l,from:function(t){return null==t?f:d(t)}},m=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e}(e)===t}},g=m("string"),p=m("array"),v=m("boolean"),b=m("function"),y=m("number"),w=Array.prototype.slice,x=Array.prototype.indexOf,C=Array.prototype.push,R=function(t,e){return n=t,r=e,x.call(n,r)>-1;var n,r},S=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},_=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++){var o=t[i];r[i]=e(o,i)}return r},k=function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)},T=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];e(o,r)&&n.push(o)}return n},E=function(t,e,n){return function(t,e){for(var n=t.length-1;n>=0;n--)e(t[n],n)}(t,(function(t){n=e(n,t)})),n},N=function(t,e,n){return k(t,(function(t){n=e(n,t)})),n},O=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e(i,n))return h.some(i)}return h.none()},D=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n))return h.some(n);return h.none()},A=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!p(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);C.apply(e,t[n])}return e},P=function(t,e){var n=_(t,e);return A(n)},M=function(t,e){for(var n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0},H=function(t){var e=w.call(t,0);return e.reverse(),e},B=(b(Array.from)&&Array.from,Object.keys),I=function(t,e){for(var n=B(t),r=0,i=n.length;r<i;r++){var o=n[r];e(t[o],o)}},W=function(t,e){return L(t,(function(t,n){return{k:n,v:e(t,n)}}))},L=function(t,e){var n={};return I(t,(function(t,r){var i=e(t,r);n[i.k]=i.v})),n},z=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return k(t,(function(t,n){r[t]=i(e[n])})),r}},F=function(t){return t.slice(0).sort()},U=function(t,e){throw new Error("All required keys ("+F(t).join(", ")+") were not specified. Specified keys were: "+F(e).join(", ")+".")},j=function(t){throw new Error("Unsupported keys for object: "+F(t).join(", "))},q=function(t,e){if(!p(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");k(e,(function(e){if(!g(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")}))},V=function(t){var e=F(t);O(e,(function(t,n){return n<e.length-1&&t===e[n+1]})).each((function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")}))},Y=function(t,e){var n=t.concat(e);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return q("required",t),q("optional",e),V(n),function(r){var o=B(r);M(t,(function(t){return R(o,t)}))||U(t,o);var a=T(o,(function(t){return!R(n,t)}));a.length>0&&j(a);var s={};return k(t,(function(t){s[t]=i(r[t])})),k(e,(function(t){s[t]=i(Object.prototype.hasOwnProperty.call(r,t)?h.some(r[t]):h.none())})),s}},$=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE),X=t.Node.DOCUMENT_NODE,G=(t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE),J=t.Node.TEXT_NODE,K=(t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,void 0!==t.window?t.window:Function("return this;")()),Q=function(t,e){return function(t,e){for(var n=null!=e?e:K,r=0;r<t.length&&null!=n;++r)n=n[t[r]];return n}(t.split("."),e)},Z=function(t,e){var n=function(t,e){return Q(t,e)}(t,e);if(null==n)throw new Error(t+" not available on this browser");return n},tt=function(t){return t.dom().nodeName.toLowerCase()},et=function(t){return t.dom().nodeType},nt=function(t){return function(e){return et(e)===t}},rt=function(t){return et(t)===$||"#comment"===tt(t)},it=nt(G),ot=nt(J),at=function(e,n,r){if(!(g(r)||v(r)||y(r)))throw t.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")},st=function(t,e,n){at(t.dom(),e,n)},ut=function(t,e){var n=t.dom();I(e,(function(t,e){at(n,e,t)}))},ct=function(t,e){var n=t.dom().getAttribute(e);return null===n?void 0:n},lt=function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},ft=function(t,e){t.dom().removeAttribute(e)},dt=function(t){return N(t.dom().attributes,(function(t,e){return t[e.name]=e.value,t}),{})},ht=function(t,e){return-1!==t.indexOf(e)},mt=function(t){return void 0!==t.style&&b(t.style.getPropertyValue)},gt=function(t){var e,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,e=t.apply(null,r)),e}},pt=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:i(t)}},vt={fromHtml:function(e,n){var r=(n||t.document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw t.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return pt(r.childNodes[0])},fromTag:function(e,n){var r=(n||t.document).createElement(e);return pt(r)},fromText:function(e,n){var r=(n||t.document).createTextNode(e);return pt(r)},fromDom:pt,fromPoint:function(t,e,n){var r=t.dom();return h.from(r.elementFromPoint(e,n)).map(pt)}},bt=function(t){var e=ot(t)?t.dom().parentNode:t.dom();return null!=e&&e.ownerDocument.body.contains(e)},yt=gt((function(){return wt(vt.fromDom(t.document))})),wt=function(t){var e=t.dom().body;if(null==e)throw new Error("Body is not available yet");return vt.fromDom(e)},xt=function(e,n,r){if(!g(r))throw t.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);mt(e)&&e.style.setProperty(n,r)},Ct=function(t,e,n){var r=t.dom();xt(r,e,n)},Rt=function(t,e){var n=t.dom();I(e,(function(t,e){xt(n,e,t)}))},St=function(e,n){var r=e.dom(),i=t.window.getComputedStyle(r).getPropertyValue(n),o=""!==i||bt(e)?i:_t(r,n);return null===o?void 0:o},_t=function(t,e){return mt(t)?t.style.getPropertyValue(e):""},kt=function(t,e){var n=t.dom(),r=_t(n,e);return h.from(r).filter((function(t){return t.length>0}))},Tt=function(t,e){!function(t,e){mt(t)&&t.style.removeProperty(e)}(t.dom(),e),lt(t,"style")&&""===ct(t,"style").replace(/^\s+|\s+$/g,"")&&ft(t,"style")},Et=function(){return Z("Node")},Nt=function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)},Ot=function(t,e){return Nt(t,e,Et().DOCUMENT_POSITION_CONTAINED_BY)},Dt=function(){return At(0,0)},At=function(t,e){return{major:t,minor:e}},Pt={nu:At,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?Dt():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return At(r(1),r(2))}(t,n)},unknown:Dt},Mt=function(t,e){return function(){return e===t}},Ht=function(t){var e=t.current;return{current:e,version:t.version,isEdge:Mt("Edge",e),isChrome:Mt("Chrome",e),isIE:Mt("IE",e),isOpera:Mt("Opera",e),isFirefox:Mt("Firefox",e),isSafari:Mt("Safari",e)}},Bt={unknown:function(){return Ht({current:void 0,version:Pt.unknown()})},nu:Ht,edge:i("Edge"),chrome:i("Chrome"),ie:i("IE"),opera:i("Opera"),firefox:i("Firefox"),safari:i("Safari")},It=function(t,e){return function(){return e===t}},Wt=function(t){var e=t.current;return{current:e,version:t.version,isWindows:It("Windows",e),isiOS:It("iOS",e),isAndroid:It("Android",e),isOSX:It("OSX",e),isLinux:It("Linux",e),isSolaris:It("Solaris",e),isFreeBSD:It("FreeBSD",e)}},Lt={unknown:function(){return Wt({current:void 0,version:Pt.unknown()})},nu:Wt,windows:i("Windows"),ios:i("iOS"),android:i("Android"),linux:i("Linux"),osx:i("OSX"),solaris:i("Solaris"),freebsd:i("FreeBSD")},zt=function(t,e){var n=String(e).toLowerCase();return O(t,(function(t){return t.search(n)}))},Ft=function(t,e){return zt(t,e).map((function(t){var n=Pt.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Ut=function(t,e){return zt(t,e).map((function(t){var n=Pt.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},jt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,qt=function(t){return function(e){return ht(e,t)}},Vt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return ht(t,"edge/")&&ht(t,"chrome")&&ht(t,"safari")&&ht(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,jt],search:function(t){return ht(t,"chrome")&&!ht(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return ht(t,"msie")||ht(t,"trident")}},{name:"Opera",versionRegexes:[jt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:qt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:qt("firefox")},{name:"Safari",versionRegexes:[jt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(ht(t,"safari")||ht(t,"mobile/"))&&ht(t,"applewebkit")}}],Yt=[{name:"Windows",search:qt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return ht(t,"iphone")||ht(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:qt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:qt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:qt("linux"),versionRegexes:[]},{name:"Solaris",search:qt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:qt("freebsd"),versionRegexes:[]}],$t={browsers:i(Vt),oses:i(Yt)},Xt=function(t){var e=$t.browsers(),n=$t.oses(),r=Ft(e,t).fold(Bt.unknown,Bt.nu),o=Ut(n,t).fold(Lt.unknown,Lt.nu),a=function(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),o=t.isiOS()&&!r,a=t.isAndroid()&&3===t.version.major,s=t.isAndroid()&&4===t.version.major,u=r||a||s&&!0===/mobile/i.test(n),c=t.isiOS()||t.isAndroid(),l=c&&!u,f=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:i(r),isiPhone:i(o),isTablet:i(u),isPhone:i(l),isTouch:i(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:i(f)}}(o,r,t);return{browser:r,os:o,deviceType:a}},Gt={detect:gt((function(){var e=t.navigator.userAgent;return Xt(e)}))},Jt=G,Kt=X,Qt=function(t,e){var n=t.dom();if(n.nodeType!==Jt)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Zt=function(t){return t.nodeType!==Jt&&t.nodeType!==Kt||0===t.childElementCount},te=function(t,e){return t.dom()===e.dom()},ee=Gt.detect().browser.isIE()?function(t,e){return Ot(t.dom(),e.dom())}:function(t,e){var n=t.dom(),r=e.dom();return n!==r&&n.contains(r)},ne=Qt,re=function(t){return vt.fromDom(t.dom().ownerDocument)},ie=function(t){return h.from(t.dom().parentNode).map(vt.fromDom)},oe=function(t,e){for(var n=b(e)?e:u,r=t.dom(),i=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,a=vt.fromDom(o);if(i.push(a),!0===n(a))break;r=o}return i},ae=function(t){return h.from(t.dom().previousSibling).map(vt.fromDom)},se=function(t){return h.from(t.dom().nextSibling).map(vt.fromDom)},ue=function(t){return _(t.dom().childNodes,vt.fromDom)},ce=function(t,e){var n=t.dom().childNodes;return h.from(n[e]).map(vt.fromDom)},le=(z("element","offset"),function(t,e){ie(t).each((function(n){n.dom().insertBefore(e.dom(),t.dom())}))}),fe=function(t,e){se(t).fold((function(){ie(t).each((function(t){he(t,e)}))}),(function(t){le(t,e)}))},de=function(t,e){(function(t){return ce(t,0)})(t).fold((function(){he(t,e)}),(function(n){t.dom().insertBefore(e.dom(),n.dom())}))},he=function(t,e){t.dom().appendChild(e.dom())},me=function(t,e){le(t,e),he(e,t)},ge=function(t,e){k(e,(function(n,r){var i=0===r?t:e[r-1];fe(i,n)}))},pe=function(t,e){k(e,(function(e){he(t,e)}))},ve=function(t){t.dom().textContent="",k(ue(t),(function(t){be(t)}))},be=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},ye=function(t){var e,n=ue(t);n.length>0&&(e=t,k(n,(function(t){le(e,t)}))),be(t)},we=(z("width","height"),z("width","height"),z("rows","columns")),xe=z("row","column"),Ce=(z("x","y"),z("element","rowspan","colspan")),Re=z("element","rowspan","colspan","isNew"),Se=z("element","rowspan","colspan","row","column"),_e=z("element","cells","section"),ke=z("element","isNew"),Te=z("element","cells","section","isNew"),Ee=z("cells","section"),Ne=z("details","section"),Oe=z("startRow","startCol","finishRow","finishCol"),De=function(t,e){var n=[];return k(ue(t),(function(t){e(t)&&(n=n.concat([t])),n=n.concat(De(t,e))})),n},Ae=function(t,e,n){return function(t,e,n){return T(oe(t,n),e)}(t,(function(t){return Qt(t,e)}),n)},Pe=function(t,e){return function(t,e){return T(ue(t),e)}(t,(function(t){return Qt(t,e)}))},Me=function(e,n){return function(e,n){var r=void 0===n?t.document:n.dom();return Zt(r)?[]:_(r.querySelectorAll(e),vt.fromDom)}(n,e)};function He(t,e,n,r,i){return t(n,r)?h.some(n):b(i)&&i(n)?h.none():e(n,r,i)}var Be=function(t,e,n){for(var r=t.dom(),o=b(n)?n:i(!1);r.parentNode;){r=r.parentNode;var a=vt.fromDom(r);if(e(a))return h.some(a);if(o(a))break}return h.none()},Ie=function(t,e,n){return Be(t,(function(t){return Qt(t,e)}),n)},We=function(t,e){return function(t,e){return O(t.dom().childNodes,(function(t){return e(vt.fromDom(t))})).map(vt.fromDom)}(t,(function(t){return Qt(t,e)}))},Le=function(e,n){return function(e,n){var r=void 0===n?t.document:n.dom();return Zt(r)?h.none():h.from(r.querySelector(e)).map(vt.fromDom)}(n,e)},ze=function(t,e,n){return He(Qt,Ie,t,e,n)},Fe=function(t,e,n){return P(ue(t),(function(t){return Qt(t,e)?n(t)?[t]:[]:Fe(t,e,n)}))},Ue={firstLayer:function(t,e){return Fe(t,e,i(!0))},filterFirstLayer:Fe},je=function(t,e,n){return void 0===n&&(n=u),n(e)?h.none():R(t,tt(e))?h.some(e):Ie(e,t.join(","),(function(t){return Qt(t,"table")||n(t)}))},qe=function(t,e){return ie(e).map((function(e){return Pe(e,t)}))},Ve=(a(qe,"th,td"),a(qe,"tr"),function(t,e){return je(["td","th"],t,e)}),Ye=function(t){return Ue.firstLayer(t,"th,td")},$e=function(t,e){return ze(t,"table",e)},Xe=function(t){return Ue.firstLayer(t,"tr")},Ge=function(t){var e=Xe(t);return _(e,(function(t){var e=t,n=ie(e).map((function(t){var e=tt(t);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"})).getOr("tbody"),r=_(Ye(t),(function(t){var e=lt(t,"rowspan")?parseInt(ct(t,"rowspan"),10):1,n=lt(t,"colspan")?parseInt(ct(t,"colspan"),10):1;return Ce(t,e,n)}));return _e(e,r,n)}))},Je=function(t,e){return _(t,(function(t){var n=_(Ye(t),(function(t){var e=lt(t,"rowspan")?parseInt(ct(t,"rowspan"),10):1,n=lt(t,"colspan")?parseInt(ct(t,"colspan"),10):1;return Ce(t,e,n)}));return _e(t,n,e.section())}))},Ke=function(t,e){return t+","+e},Qe=function(t,e){var n=P(t.all(),(function(t){return t.cells()}));return T(n,e)},Ze={generate:function(t){var e={},n=[],r=t.length,o=0;k(t,(function(t,r){var i=[];k(t.cells(),(function(t){for(var n=0;void 0!==e[Ke(r,n)];)n++;for(var a=Se(t.element(),t.rowspan(),t.colspan(),r,n),s=0;s<t.colspan();s++)for(var u=0;u<t.rowspan();u++){var c=n+s,l=Ke(r+u,c);e[l]=a,o=Math.max(o,c+1)}i.push(a)})),n.push(_e(t.element(),i,t.section()))}));var a=we(r,o);return{grid:i(a),access:i(e),all:i(n)}},getAt:function(t,e,n){var r=t.access()[Ke(e,n)];return void 0!==r?h.some(r):h.none()},findItem:function(t,e,n){var r=Qe(t,(function(t){return n(e,t.element())}));return r.length>0?h.some(r[0]):h.none()},filterItems:Qe,justCells:function(t){var e=_(t.all(),(function(t){return t.cells()}));return A(e)}},tn=z("minRow","minCol","maxRow","maxCol"),en=function(t,e,n){var r=t[n].element(),i=vt.fromTag("td");he(i,vt.fromTag("br")),(e?he:de)(r,i)},nn=function(t,e){var n=function(t){return Qt(t.element(),e)},r=Ge(t),i=Ze.generate(r),o=function(t,e){var n=t.grid().columns(),r=t.grid().rows(),i=n,o=0,a=0;return I(t.access(),(function(t){if(e(t)){var n=t.row(),s=n+t.rowspan()-1,u=t.column(),c=u+t.colspan()-1;n<r?r=n:s>o&&(o=s),u<i?i=u:c>a&&(a=c)}})),tn(r,i,o,a)}(i,n),a="th:not("+e+"),td:not("+e+")",s=Ue.filterFirstLayer(t,"th,td",(function(t){return Qt(t,a)}));return k(s,be),function(t,e,n,r){for(var i=e.grid().columns(),o=e.grid().rows(),a=0;a<o;a++)for(var s=!1,u=0;u<i;u++)a<n.minRow()||a>n.maxRow()||u<n.minCol()||u>n.maxCol()||(Ze.getAt(e,a,u).filter(r).isNone()?en(t,s,a):s=!0)}(r,i,o,n),function(t,e){var n=T(Ue.firstLayer(t,"tr"),(function(t){return 0===t.dom().childElementCount}));k(n,be),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||k(Ue.firstLayer(t,"th,td"),(function(t){ft(t,"rowspan"),ft(t,"colspan")})),ft(t,"width"),ft(t,"height"),Tt(t,"width"),Tt(t,"height")}(t,o),t},rn=function(t,e){var n=function(e){return t(e)?h.from(e.dom().nodeValue):h.none()};return{get:function(r){if(!t(r))throw new Error("Can only get "+e+" value of a "+e+" node");return n(r).getOr("")},getOption:n,set:function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom().nodeValue=r}}}(ot,"text"),on=function(t){return rn.get(t)},an=function(t){return rn.getOption(t)},sn=function(t,e){rn.set(t,e)},un=function(t){return"img"===tt(t)?1:an(t).fold((function(){return ue(t).length}),(function(t){return t.length}))},cn=["img","br"],ln=function(t){return an(t).filter((function(t){return 0!==t.trim().length||t.indexOf("")>-1})).isSome()||R(cn,tt(t))},fn=function(t){return e=ln,(n=function(t){for(var r=0;r<t.childNodes.length;r++){var i=vt.fromDom(t.childNodes[r]);if(e(i))return h.some(i);var o=n(t.childNodes[r]);if(o.isSome())return o}return h.none()})(t.dom());var e,n},dn=function(t){return hn(t,ln)},hn=function(t,e){var n=function(t){for(var r=ue(t),i=r.length-1;i>=0;i--){var o=r[i];if(e(o))return h.some(o);var a=n(o);if(a.isSome())return a}return h.none()};return n(t)},mn=function(t,e){return vt.fromDom(t.dom().cloneNode(e))},gn=function(t){return mn(t,!1)},pn=function(t){return mn(t,!0)},vn=function(t,e){var n=function(t,e){var n=vt.fromTag(e),r=dt(t);return ut(n,r),n}(t,e),r=ue(pn(t));return pe(n,r),n},bn=function(){var t=vt.fromTag("td");return he(t,vt.fromTag("br")),t},yn=function(t,e,n){var r=vn(t,e);return I(n,(function(t,e){null===t?ft(r,e):st(r,e,t)})),r},wn=function(t){return t},xn=function(t){return function(){return vt.fromTag("tr",t.dom())}},Cn=function(t,e,n){return{row:xn(e),cell:function(e){var r,i,o,a,s=re(e.element()),u=vt.fromTag(tt(e.element()),s.dom()),c=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),l=c.length>0?function(t,e,n){return fn(t).map((function(r){var i=n.join(","),o=Ae(r,i,(function(e){return te(e,t)}));return E(o,(function(t,e){var n=gn(e);return ft(n,"contenteditable"),he(t,n),n}),e)})).getOr(e)}(e.element(),u,c):u;return he(l,vt.fromTag("br")),r=e.element(),i=u,o=r.dom(),a=i.dom(),mt(o)&&mt(a)&&(a.style.cssText=o.style.cssText),Tt(u,"height"),1!==e.colspan()&&Tt(e.element(),"width"),t(e.element(),u),u},replace:yn,gap:bn}},Rn=function(t){return{row:xn(t),cell:bn,replace:wn,gap:bn}},Sn=function(t,e){return e.column()>=t.startCol()&&e.column()+e.colspan()-1<=t.finishCol()&&e.row()>=t.startRow()&&e.row()+e.rowspan()-1<=t.finishRow()},_n=function(t,e){var n=e.column(),r=e.column()+e.colspan()-1,i=e.row(),o=e.row()+e.rowspan()-1;return n<=t.finishCol()&&r>=t.startCol()&&i<=t.finishRow()&&o>=t.startRow()},kn=function(t,e){for(var n=!0,r=a(Sn,e),i=e.startRow();i<=e.finishRow();i++)for(var o=e.startCol();o<=e.finishCol();o++)n=n&&Ze.getAt(t,i,o).exists(r);return n?h.some(e):h.none()},Tn=function(t,e,n){var r=Ze.findItem(t,e,te),i=Ze.findItem(t,n,te);return r.bind((function(t){return i.map((function(e){return n=t,r=e,Oe(Math.min(n.row(),r.row()),Math.min(n.column(),r.column()),Math.max(n.row()+n.rowspan()-1,r.row()+r.rowspan()-1),Math.max(n.column()+n.colspan()-1,r.column()+r.colspan()-1));var n,r}))}))},En=Tn,Nn=function(t,e,n){return Tn(t,e,n).bind((function(e){return kn(t,e)}))},On=function(t,e,n,r){return Ze.findItem(t,e,te).bind((function(e){var i=n>0?e.row()+e.rowspan()-1:e.row(),o=r>0?e.column()+e.colspan()-1:e.column();return Ze.getAt(t,i+n,o+r).map((function(t){return t.element()}))}))},Dn=function(t,e,n){return En(t,e,n).map((function(e){var n=Ze.filterItems(t,a(_n,e));return _(n,(function(t){return t.element()}))}))},An=function(t,e){return Ze.findItem(t,e,(function(t,e){return ee(e,t)})).map((function(t){return t.element()}))},Pn=function(t){var e=Ge(t);return Ze.generate(e)},Mn=function(t,e,n){return $e(t).bind((function(r){var i=Pn(r);return On(i,t,e,n)}))},Hn=function(t,e,n){var r=Pn(t);return Dn(r,e,n)},Bn=function(t,e,n,r,i){var o=Pn(t),a=te(t,n)?h.some(e):An(o,e),s=te(t,i)?h.some(r):An(o,r);return a.bind((function(t){return s.bind((function(e){return Dn(o,t,e)}))}))},In=function(t,e,n){var r=Pn(t);return Nn(r,e,n)},Wn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Ln(){return{up:i({selector:Ie,closest:ze,predicate:Be,all:oe}),down:i({selector:Me,predicate:De}),styles:i({get:St,getRaw:kt,set:Ct,remove:Tt}),attrs:i({get:ct,set:st,remove:ft,copyTo:function(t,e){var n=dt(t);ut(e,n)}}),insert:i({before:le,after:fe,afterAll:ge,append:he,appendAll:pe,prepend:de,wrap:me}),remove:i({unwrap:ye,remove:be}),create:i({nu:vt.fromTag,clone:function(t){return vt.fromDom(t.dom().cloneNode(!1))},text:vt.fromText}),query:i({comparePosition:function(t,e){return t.dom().compareDocumentPosition(e.dom())},prevSibling:ae,nextSibling:se}),property:i({children:ue,name:tt,parent:ie,document:function(t){return t.dom().ownerDocument},isText:ot,isComment:rt,isElement:it,getText:on,setText:sn,isBoundary:function(t){return!!it(t)&&("body"===tt(t)||R(Wn,tt(t)))},isEmptyTag:function(t){return!!it(t)&&R(["br","img","hr","input"],tt(t))}}),eq:te,is:ne}}var zn=z("left","right"),Fn=z("first","second","splits"),Un=function(t,e,n){var r=t.property().children(e);return D(r,a(t.eq,n)).map((function(t){return{before:i(r.slice(0,t)),after:i(r.slice(t+1))}}))},jn=function(t,e,n,r){var i=e(t,n);return E(r,(function(n,r){var i=e(t,r);return qn(t,n,i)}),i)},qn=function(t,e,n){return e.bind((function(e){return n.filter(a(t.eq,e))}))},Vn=function(t,e){return a(t.eq,e)},Yn=function(t,e,n,r){void 0===r&&(r=u);var o=[e].concat(t.up().all(e)),a=[n].concat(t.up().all(n)),s=function(t){return D(t,r).fold((function(){return t}),(function(e){return t.slice(0,e+1)}))},c=s(o),l=s(a),f=O(c,(function(e){return S(l,Vn(t,e))}));return{firstpath:i(c),secondpath:i(l),shared:i(f)}},$n={sharedOne:function(t,e,n){return n.length>0?function(t,e,n,r){return r(t,e,n[0],n.slice(1))}(t,e,n,jn):h.none()},subset:function(t,e,n){var r=Yn(t,e,n);return r.shared().bind((function(e){return function(t,e,n,r){var i=t.property().children(e);if(t.eq(e,n[0]))return h.some([n[0]]);if(t.eq(e,r[0]))return h.some([r[0]]);var o=function(n){var r=H(n),o=D(r,Vn(t,e)).getOr(-1),a=o<r.length-1?r[o+1]:r[o];return D(i,Vn(t,a))},a=o(n),s=o(r);return a.bind((function(t){return s.map((function(e){var n=Math.min(t,e),r=Math.max(t,e);return i.slice(n,r+1)}))}))}(t,e,r.firstpath(),r.secondpath())}))},ancestors:Yn,breakToLeft:function(t,e,n){return Un(t,e,n).map((function(r){var i=t.create().clone(e);return t.insert().appendAll(i,r.before().concat([n])),t.insert().appendAll(e,r.after()),t.insert().before(e,i),zn(i,e)}))},breakToRight:function(t,e,n){return Un(t,e,n).map((function(n){var r=t.create().clone(e);return t.insert().appendAll(r,n.after()),t.insert().after(e,r),zn(e,r)}))},breakPath:function(t,e,n,r){var i=function(e,o,a){var s=Fn(e,h.none(),a);return n(e)?Fn(e,o,a):t.property().parent(e).bind((function(o){return r(t,o,e).map((function(t){var e=[{first:t.left,second:t.right}],r=n(o)?o:t.left();return i(r,h.some(t.right()),a.concat(e))}))})).getOr(s)};return i(e,h.none(),[])}},Xn=Ln(),Gn=function(t,e){return $n.sharedOne(Xn,(function(e,n){return t(n)}),e)},Jn=function(t,e,n){return $n.ancestors(Xn,t,e,n)},Kn={create:Y(["boxes","start","finish"],[])},Qn=function(t){return Ie(t,"table")},Zn=function(t,e,n){var r=function(t){return function(e){return void 0!==n&&n(e)||te(e,t)}};return te(t,e)?h.some(Kn.create({boxes:h.some([t]),start:t,finish:e})):Qn(t).bind((function(i){return Qn(e).bind((function(o){if(te(i,o))return h.some(Kn.create({boxes:Hn(i,t,e),start:t,finish:e}));if(ee(i,o)){var a=(s=Ae(e,"td,th",r(i))).length>0?s[s.length-1]:e;return h.some(Kn.create({boxes:Bn(i,t,i,e,o),start:t,finish:a}))}if(ee(o,i)){var s,u=(s=Ae(t,"td,th",r(o))).length>0?s[s.length-1]:t;return h.some(Kn.create({boxes:Bn(o,t,i,e,o),start:t,finish:u}))}return Jn(t,e).shared().bind((function(a){return ze(a,"table",n).bind((function(n){var a=Ae(e,"td,th",r(n)),s=a.length>0?a[a.length-1]:e,u=Ae(t,"td,th",r(n)),c=u.length>0?u[u.length-1]:t;return h.some(Kn.create({boxes:Bn(n,t,i,e,o),start:c,finish:s}))}))}))}))}))},tr=Zn,er=function(t,e){var n=Me(t,e);return n.length>0?h.some(n):h.none()},nr=function(t,e,n,r,o){return function(t,e){return O(t,(function(t){return Qt(t,e)}))}(t,o).bind((function(t){return Mn(t,e,n).bind((function(t){return function(t,e){return Ie(t,"table").bind((function(n){return Le(n,e).bind((function(e){return Zn(e,t).bind((function(t){return t.boxes().map((function(e){return{boxes:i(e),start:i(t.start()),finish:i(t.finish())}}))}))}))}))}(t,r)}))}))},rr=function(t,e,n){return Le(t,e).bind((function(e){return Le(t,n).bind((function(t){return Gn(Qn,[e,t]).map((function(n){return{first:i(e),last:i(t),table:i(n)}}))}))}))},ir=function(t,e){return er(t,e)},or=function(t,e,n){return rr(t,e,n).bind((function(e){var n=function(e){return te(t,e)},r=Ie(e.first(),"thead,tfoot,tbody,table",n),i=Ie(e.last(),"thead,tfoot,tbody,table",n);return r.bind((function(t){return i.bind((function(n){return te(t,n)?In(e.table(),e.first(),e.last()):h.none()}))}))}))},ar="data-mce-selected",sr={selected:i(ar),selectedSelector:i("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:i("[data-mce-selected]"),firstSelected:i("data-mce-first-selected"),firstSelectedSelector:i("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:i("data-mce-last-selected"),lastSelectedSelector:i("td[data-mce-last-selected],th[data-mce-last-selected]")},ur=function(e){if(!p(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var n=[],r={};return k(e,(function(i,o){var a=B(i);if(1!==a.length)throw new Error("one and only one name per case");var s=a[0],u=i[s];if(void 0!==r[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!p(u))throw new Error("case arguments must be an array");n.push(s),r[s]=function(){var r=arguments.length;if(r!==u.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+u.length+" ("+u+"), got "+r);for(var i=new Array(r),a=0;a<i.length;a++)i[a]=arguments[a];var c=function(t){var e=B(t);if(n.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+e.join(","));if(!M(n,(function(t){return R(e,t)})))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+n.join(", "));return t[s].apply(null,i)};return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);var t=arguments[o];return t.apply(null,i)},match:c,log:function(e){t.console.log(e,{constructors:n,constructor:s,params:i})}}}})),r},cr=ur([{none:[]},{multiple:["elements"]},{single:["selection"]}]),lr={cata:function(t,e,n,r){return t.fold(e,n,r)},none:cr.none,multiple:cr.multiple,single:cr.single},fr=function(t,e){return lr.cata(e.get(),i([]),o,i([t]))},dr=function(t,e){return lr.cata(e.get(),h.none,(function(e,n){return 0===e.length?h.none():or(t,sr.firstSelectedSelector(),sr.lastSelectedSelector()).bind((function(t){return e.length>1?h.some({bounds:i(t),cells:i(e)}):h.none()}))}),h.none)},hr=function(t,e){var n=fr(t,e);return n.length>0&&M(n,(function(t){return lt(t,"rowspan")&&parseInt(ct(t,"rowspan"),10)>1||lt(t,"colspan")&&parseInt(ct(t,"colspan"),10)>1}))?h.some(n):h.none()},mr=fr,gr=function(t){return{element:i(t),mergable:h.none,unmergable:h.none,selection:i([t])}},pr=z("element","clipboard","generators"),vr={noMenu:gr,forMenu:function(t,e,n){return{element:i(n),mergable:i(dr(e,t)),unmergable:i(hr(n,t)),selection:i(mr(n,t))}},notCell:function(t){return gr(t)},paste:pr,pasteRows:function(t,e,n,r,o){return{element:i(n),mergable:h.none,unmergable:h.none,selection:i(mr(n,t)),clipboard:i(r),generators:i(o)}}},br=function(e,r,i,o){e.on("BeforeGetContent",(function(t){!0===t.selection&&lr.cata(r.get(),n,(function(n){t.preventDefault(),function(t){return $e(t[0]).map(pn).map((function(t){return[nn(t,sr.attributeSelector())]}))}(n).each((function(n){t.content="text"===t.format?function(t){return _(t,(function(t){return t.dom().innerText})).join("")}(n):function(t,e){return _(e,(function(e){return t.selection.serializer.serialize(e.dom(),{})})).join("")}(e,n)}))}),n)})),e.on("BeforeSetContent",(function(n){!0===n.selection&&!0===n.paste&&h.from(e.dom.getParent(e.selection.getStart(),"th,td")).each((function(r){var a=vt.fromDom(r);$e(a).each((function(r){var s,u,c,l=T((s=n.content,(c=(u||t.document).createElement("div")).innerHTML=s,ue(vt.fromDom(c))),(function(t){return"meta"!==tt(t)}));if(1===l.length&&"table"===tt(l[0])){n.preventDefault();var f=vt.fromDom(e.getDoc()),d=Rn(f),h=vr.paste(a,l[0],d);i.pasteCells(r,h).each((function(t){e.selection.setRng(t),e.focus(),o.clear(r)}))}}))}))}))};function yr(t,e){var n=function(n){var r=e(n);if(r<=0||null===r){var i=St(n,t);return parseFloat(i)||0}return r},r=function(t,e){return N(e,(function(e,n){var r=St(t,n),i=void 0===r?0:parseInt(r,10);return isNaN(i)?e:e+i}),0)};return{set:function(e,n){if(!y(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var r=e.dom();mt(r)&&(r.style[t]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(t,e,n){var i=r(t,n);return e>i?e-i:0}}}var wr=yr("height",(function(t){var e=t.dom();return bt(t)?e.getBoundingClientRect().height:e.offsetHeight})),xr=function(t){return wr.get(t)},Cr=function(t){return wr.getOuter(t)},Rr=yr("width",(function(t){return t.dom().offsetWidth})),Sr=function(t){return Rr.get(t)},_r=function(t){return Rr.getOuter(t)},kr=Gt.detect(),Tr=function(t,e,n){return function(t,e){var n=parseFloat(t);return isNaN(n)?e:n}(St(t,e),n)},Er=function(t){return kr.browser.isIE()||kr.browser.isEdge()?function(t){var e=Tr(t,"padding-top",0),n=Tr(t,"padding-bottom",0),r=Tr(t,"border-top-width",0),i=Tr(t,"border-bottom-width",0),o=t.dom().getBoundingClientRect().height;return"border-box"===St(t,"box-sizing")?o:o-e-n-(r+i)}(t):Tr(t,"height",xr(t))},Nr=/(\d+(\.\d+)?)(\w|%)*/,Or=/(\d+(\.\d+)?)%/,Dr=/(\d+(\.\d+)?)px|em/,Ar=function(t,e){Ct(t,"height",e+"px")},Pr=function(t,e,n,r){var i,o,a=parseInt(t,10);return function(t,e,n){return""===e||!(t.length<e.length)&&t.substr(n,n+e.length)===e}(i=t,o="%",i.length-o.length)&&"table"!==tt(e)?function(t,e,n,r){var i=$e(t).map((function(t){var r=n(t);return Math.floor(e/100*r)})).getOr(e);return r(t,i),i}(e,a,n,r):a},Mr=function(t){var e=function(t){return kt(t,"height").getOrThunk((function(){return Er(t)+"px"}))}(t);return e?Pr(e,t,xr,Ar):xr(t)},Hr=function(t,e){return lt(t,e)?parseInt(ct(t,e),10):1},Br=function(t){return kt(t,"width").fold((function(){return h.from(ct(t,"width"))}),(function(t){return h.some(t)}))},Ir=function(t,e){return t/e.pixelWidth()*100},Wr={percentageBasedSizeRegex:i(Or),pixelBasedSizeRegex:i(Dr),setPixelWidth:function(t,e){Ct(t,"width",e+"px")},setPercentageWidth:function(t,e){Ct(t,"width",e+"%")},setHeight:Ar,getPixelWidth:function(t,e){return Br(t).fold((function(){return Sr(t)}),(function(n){return function(t,e,n){var r=Dr.exec(e);if(null!==r)return parseInt(r[1],10);var i=Or.exec(e);return null!==i?function(t,e){return t/100*e.pixelWidth()}(parseFloat(i[1]),n):Sr(t)}(t,n,e)}))},getPercentageWidth:function(t,e){return Br(t).fold((function(){var n=Sr(t);return Ir(n,e)}),(function(n){return function(t,e,n){var r=Or.exec(e);if(null!==r)return parseFloat(r[1]);var i=Sr(t);return Ir(i,n)}(t,n,e)}))},getGenericWidth:function(t){return Br(t).bind((function(t){var e=Nr.exec(t);return null!==e?h.some({width:i(parseFloat(e[1])),unit:i(e[3])}):h.none()}))},setGenericWidth:function(t,e,n){Ct(t,"width",e+n)},getHeight:function(t){return function(t,e,n){return n(t)/Hr(t,e)}(t,"rowspan",Mr)},getRawWidth:Br},Lr=function(t,e){Wr.getGenericWidth(t).each((function(n){var r=n.width()/2;Wr.setGenericWidth(t,r,n.unit()),Wr.setGenericWidth(e,r,n.unit())}))},zr=function(t,e){return{left:i(t),top:i(e),translate:function(n,r){return zr(t+n,e+r)}}},Fr=zr,Ur=function(t,e){return void 0!==t?t:void 0!==e?e:0},jr=function(t){var e=t.dom().ownerDocument,n=e.body,r=e.defaultView,i=e.documentElement,o=Ur(r.pageYOffset,i.scrollTop),a=Ur(r.pageXOffset,i.scrollLeft),s=Ur(i.clientTop,n.clientTop),u=Ur(i.clientLeft,n.clientLeft);return qr(t).translate(a-u,o-s)},qr=function(t){var e=t.dom(),n=e.ownerDocument.body;return n===e?Fr(n.offsetLeft,n.offsetTop):bt(t)?function(t){var e=t.getBoundingClientRect();return Fr(e.left,e.top)}(e):Fr(0,0)},Vr=z("row","y"),Yr=z("col","x"),$r=function(t){return jr(t).left()+_r(t)},Xr=function(t){return jr(t).left()},Gr=function(t,e){return Yr(t,Xr(e))},Jr=function(t,e){return Yr(t,$r(e))},Kr=function(t){return jr(t).top()},Qr=function(t,e){return Vr(t,Kr(e))},Zr=function(t,e){return Vr(t,Kr(e)+Cr(e))},ti=function(t,e,n){if(0===n.length)return[];var r=_(n.slice(1),(function(e,n){return e.map((function(e){return t(n,e)}))})),i=n[n.length-1].map((function(t){return e(n.length-1,t)}));return r.concat([i])},ei={height:{delta:o,positions:function(t){return ti(Qr,Zr,t)},edge:Kr},rtl:{delta:function(t){return-t},edge:$r,positions:function(t){return ti(Jr,Gr,t)}},ltr:{delta:o,edge:Xr,positions:function(t){return ti(Gr,Jr,t)}}},ni={ltr:ei.ltr,rtl:ei.rtl};function ri(t){var e=function(e){return t(e).isRtl()?ni.rtl:ni.ltr};return{delta:function(t,n){return e(n).delta(t,n)},edge:function(t){return e(t).edge(t)},positions:function(t,n){return e(n).positions(t,n)}}}var ii=function(t){var e=Ge(t);return Ze.generate(e).grid()},oi=function(){return(oi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ai=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},si=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return h.none()},ui=function(t,e,n,r){n===r?ft(t,e):st(t,e,n)},ci=function(t,e){var n=[],r=[],o=function(e,i){e.length>0?function(e,i){var o=We(t,i).getOrThunk((function(){var e=vt.fromTag(i,re(t).dom());return he(t,e),e}));ve(o);var a=_(e,(function(t){t.isNew()&&n.push(t.element());var e=t.element();return ve(e),k(t.cells(),(function(t){t.isNew()&&r.push(t.element()),ui(t.element(),"colspan",t.colspan(),1),ui(t.element(),"rowspan",t.rowspan(),1),he(e,t.element())})),e}));pe(o,a)}(e,i):function(e){We(t,e).each(be)}(i)},a=[],s=[],u=[];return k(e,(function(t){switch(t.section()){case"thead":a.push(t);break;case"tbody":s.push(t);break;case"tfoot":u.push(t)}})),o(a,"thead"),o(s,"tbody"),o(u,"tfoot"),{newRows:i(n),newCells:i(r)}},li=function(t){return _(t,(function(t){var e=gn(t.element());return k(t.cells(),(function(t){var n=pn(t.element());ui(n,"colspan",t.colspan(),1),ui(n,"rowspan",t.rowspan(),1),he(e,n)})),e}))},fi=function(t,e){var n=ct(t,e);return void 0===n||""===n?[]:n.split(" ")},di=function(t){return void 0!==t.dom().classList},hi=function(t,e){return function(t,e,n){var r=fi(t,e).concat([n]);return st(t,e,r.join(" ")),!0}(t,"class",e)},mi=function(t,e){di(t)?t.dom().classList.add(e):hi(t,e)},gi=function(t,e){return di(t)&&t.dom().classList.contains(e)},pi=function(t,e){for(var n=[],r=t;r<e;r++)n.push(r);return n},vi=function(t,e){if(e<0||e>=t.length-1)return h.none();var n=t[e].fold((function(){var n=H(t.slice(0,e));return si(n,(function(t,e){return t.map((function(t){return{value:t,delta:e+1}}))}))}),(function(t){return h.some({value:t,delta:0})})),r=t[e+1].fold((function(){var n=t.slice(e+1);return si(n,(function(t,e){return t.map((function(t){return{value:t,delta:e+1}}))}))}),(function(t){return h.some({value:t,delta:1})}));return n.bind((function(t){return r.map((function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n}))}))},bi=function(t,e,n){var r=t();return O(r,e).orThunk((function(){return h.from(r[0]).orThunk(n)})).map((function(t){return t.element()}))},yi=function(t){var e=t.grid(),n=pi(0,e.columns()),r=pi(0,e.rows());return _(n,(function(e){return bi((function(){return P(r,(function(n){return Ze.getAt(t,n,e).filter((function(t){return t.column()===e})).fold(i([]),(function(t){return[t]}))}))}),(function(t){return 1===t.colspan()}),(function(){return Ze.getAt(t,0,e)}))}))},wi=function(t){var e=t.grid(),n=pi(0,e.rows()),r=pi(0,e.columns());return _(n,(function(e){return bi((function(){return P(r,(function(n){return Ze.getAt(t,e,n).filter((function(t){return t.row()===e})).fold(i([]),(function(t){return[t]}))}))}),(function(t){return 1===t.rowspan()}),(function(){return Ze.getAt(t,e,0)}))}))},xi=function(t){var e=t.replace(/\./g,"-");return{resolve:function(t){return e+"-"+t}}},Ci=xi("ephox-snooker"),Ri={resolve:Ci.resolve},Si=function(t,e,n,r,i){var o=vt.fromTag("div");return Rt(o,{position:"absolute",left:e-r/2+"px",top:n+"px",height:i+"px",width:r+"px"}),ut(o,{"data-column":t,role:"presentation"}),o},_i=function(t,e,n,r,i){var o=vt.fromTag("div");return Rt(o,{position:"absolute",left:e+"px",top:n-i/2+"px",height:i+"px",width:r+"px"}),ut(o,{"data-row":t,role:"presentation"}),o},ki=Ri.resolve("resizer-bar"),Ti=Ri.resolve("resizer-rows"),Ei=Ri.resolve("resizer-cols"),Ni=function(t){var e=Me(t.parent(),"."+ki);k(e,be)},Oi=function(t,e,n){var r=t.origin();k(e,(function(e,i){e.each((function(e){var i=n(r,e);mi(i,ki),he(t.parent(),i)}))}))},Di=function(t,e,n,r,i,o){var a=jr(e);!function(t,e,n,r){Oi(t,e,(function(t,e){var i=_i(e.row(),n.left()-t.left(),e.y()-t.top(),r,7);return mi(i,Ti),i}))}(t,n.length>0?i.positions(n,e):[],a,_r(e)),function(t,e,n,r){Oi(t,e,(function(t,e){var i=Si(e.col(),e.x()-t.left(),n.top()-t.top(),7,r);return mi(i,Ei),i}))}(t,r.length>0?o.positions(r,e):[],a,Cr(e))},Ai=function(t,e){var n=Me(t.parent(),"."+ki);k(n,e)},Pi=function(t,e,n,r){Ni(t);var i=Ge(e),o=Ze.generate(i),a=wi(o),s=yi(o);Di(t,e,a,s,n,r)},Mi=function(t){Ai(t,(function(t){Ct(t,"display","none")}))},Hi=function(t){Ai(t,(function(t){Ct(t,"display","block")}))},Bi=Ni,Ii=function(t){return gi(t,Ti)},Wi=function(t){return gi(t,Ei)},Li=function(t,e){return Ee(e,t.section())},zi=function(t,e){return t.cells()[e]},Fi={addCell:function(t,e,n){var r=t.cells(),i=r.slice(0,e),o=r.slice(e),a=i.concat([n]).concat(o);return Li(t,a)},setCells:Li,mutateCell:function(t,e,n){t.cells()[e]=n},getCell:zi,getCellElement:function(t,e){return zi(t,e).element()},mapCells:function(t,e){var n=t.cells(),r=_(n,e);return Ee(r,t.section())},cellLength:function(t){return t.cells().length}},Ui=function(t,e){if(0===t.length)return 0;var n=t[0];return D(t,(function(t){return!e(n.element(),t.element())})).fold((function(){return t.length}),(function(t){return t}))},ji=function(t,e,n,r){var o=function(t,e){return t[e]}(t,e).cells().slice(n),a=Ui(o,r),s=function(t,e){return _(t,(function(t){return Fi.getCell(t,e)}))}(t,n).slice(e),u=Ui(s,r);return{colspan:i(a),rowspan:i(u)}},qi=function(t,e){var n=_(t,(function(t,e){return _(t.cells(),(function(t,e){return!1}))}));return _(t,(function(r,i){var o=P(r.cells(),(function(r,o){if(!1===n[i][o]){var a=ji(t,i,o,e);return function(t,e,r,i){for(var o=t;o<t+r;o++)for(var a=e;a<e+i;a++)n[o][a]=!0}(i,o,a.rowspan(),a.colspan()),[Re(r.element(),a.rowspan(),a.colspan(),r.isNew())]}return[]}));return Ne(o,r.section())}))},Vi=function(t,e,n){for(var r=[],i=0;i<t.grid().rows();i++){for(var o=[],a=0;a<t.grid().columns();a++){var s=Ze.getAt(t,i,a).map((function(t){return ke(t.element(),n)})).getOrThunk((function(){return ke(e.gap(),!0)}));o.push(s)}var u=Ee(o,t.all()[i].section());r.push(u)}return r},Yi=function(t,e){return _(t,(function(t){var n=function(t){return si(t,(function(t){return ie(t.element()).map((function(t){var e=ie(t).isNone();return ke(t,e)}))})).getOrThunk((function(){return ke(e.row(),!0)}))}(t.details());return Te(n.element(),t.details(),t.section(),n.isNew())}))},$i=function(t,e){var n=qi(t,te);return Yi(n,e)},Xi=function(t,e){var n=A(_(t.all(),(function(t){return t.cells()})));return O(n,(function(t){return te(e,t.element())}))},Gi=function(t,e,n,r,o){return function(a,s,u,c,l){var f=Ge(s),d=Ze.generate(f);return e(d,u).map((function(e){var n=function(t,e){return Vi(t,e,!1)}(d,c),r=t(n,e,te,o(c)),a=$i(r.grid(),c);return{grid:i(a),cursor:r.cursor}})).fold((function(){return h.none()}),(function(t){var e=ci(s,t.grid());return n(s,t.grid(),l),r(s),Pi(a,s,ei.height,l),h.some({cursor:t.cursor,newRows:e.newRows,newCells:e.newCells})}))}},Ji=function(t,e){return Ve(e.element()).bind((function(e){return Xi(t,e)}))},Ki=function(t,e){var n=_(e.selection(),(function(e){return Ve(e).bind((function(e){return Xi(t,e)}))})),r=ai(n);return r.length>0?h.some({cells:r,generators:e.generators,clipboard:e.clipboard}):h.none()},Qi=function(t,e){var n=_(e.selection(),(function(e){return Ve(e).bind((function(e){return Xi(t,e)}))})),r=ai(n);return r.length>0?h.some(r):h.none()},Zi=function(t){return{is:function(e){return t===e},isValue:c,isError:u,getOr:i(t),getOrThunk:i(t),getOrDie:i(t),or:function(e){return Zi(t)},orThunk:function(e){return Zi(t)},fold:function(e,n){return n(t)},map:function(e){return Zi(e(t))},mapError:function(e){return Zi(t)},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOption:function(){return h.some(t)}}},to=function(t){return{is:u,isValue:u,isError:c,getOr:o,getOrThunk:function(t){return t()},getOrDie:function(){return(e=String(t),function(){throw new Error(e)})();var e},or:function(t){return t},orThunk:function(t){return t()},fold:function(e,n){return e(t)},map:function(e){return to(t)},mapError:function(e){return to(e(t))},each:n,bind:function(e){return to(t)},exists:u,forall:c,toOption:h.none}},eo={value:Zi,error:to,fromOption:function(t,e){return t.fold((function(){return to(e)}),Zi)}},no=function(t,e){return _(t,(function(){return ke(e.cell(),!0)}))},ro=function(t,e,n){return t.concat(function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n}(e,(function(e){return Fi.setCells(t[t.length-1],no(t[t.length-1].cells(),n))})))},io=function(t,e,n){return _(t,(function(t){return Fi.setCells(t,t.cells().concat(no(pi(0,e),n)))}))},oo=function(t,e,n){if(t.row()>=e.length||t.column()>Fi.cellLength(e[0]))return eo.error("invalid start address out of table bounds, row: "+t.row()+", column: "+t.column());var r=e.slice(t.row()),o=r[0].cells().slice(t.column()),a=Fi.cellLength(n[0]),s=n.length;return eo.value({rowDelta:i(r.length-s),colDelta:i(o.length-a)})},ao=function(t,e){var n=Fi.cellLength(t[0]),r=Fi.cellLength(e[0]);return{rowDelta:i(0),colDelta:i(n-r)}},so=function(t,e,n){var r=e.colDelta()<0?io:o;return(e.rowDelta()<0?ro:o)(r(t,Math.abs(e.colDelta()),n),Math.abs(e.rowDelta()),n)},uo=function(t,e,n,r){if(0===t.length)return t;for(var i=e.startRow();i<=e.finishRow();i++)for(var o=e.startCol();o<=e.finishCol();o++)Fi.mutateCell(t[i],o,ke(r(),!1));return t},co=function(t,e,n,r){for(var i=!0,o=0;o<t.length;o++)for(var a=0;a<Fi.cellLength(t[0]);a++){var s=n(Fi.getCellElement(t[o],a),e);!0===s&&!1===i?Fi.mutateCell(t[o],a,ke(r(),!0)):!0===s&&(i=!1)}return t},lo=function(t,e,n,r){if(e>0&&e<t.length){var i=function(t,e){return N(t,(function(t,n){return S(t,(function(t){return e(t.element(),n.element())}))?t:t.concat([n])}),[])}(t[e-1].cells(),n);k(i,(function(i){for(var o=h.none(),a=function(e){for(var a=function(a){var s=t[e].cells()[a];n(s.element(),i.element())&&(o.isNone()&&(o=h.some(r())),o.each((function(n){Fi.mutateCell(t[e],a,ke(n,!0))})))},s=0;s<Fi.cellLength(t[0]);s++)a(s)},s=e;s<t.length;s++)a(s)}))}return t},fo=function(t,e,n,r){var i=a(r,Fi.getCell(t[e],n).element()),o=t[e];return t.length>1&&Fi.cellLength(o)>1&&(n>0&&i(Fi.getCellElement(o,n-1))||n<o.cells().length-1&&i(Fi.getCellElement(o,n+1))||e>0&&i(Fi.getCellElement(t[e-1],n))||e<t.length-1&&i(Fi.getCellElement(t[e+1],n)))},ho=function(t,e,n,r,i){return oo(t,e,n).map((function(o){var a=so(e,o,r);return function(t,e,n,r,i){for(var o=t.row(),a=t.column(),s=o+n.length,u=a+Fi.cellLength(n[0]),c=o;c<s;c++)for(var l=a;l<u;l++){fo(e,c,l,i)&&co(e,Fi.getCellElement(e[c],l),i,r.cell);var f=Fi.getCellElement(n[c-o],l-a),d=r.replace(f);Fi.mutateCell(e[c],l,ke(d,!0))}return e}(t,a,n,r,i)}))},mo=function(t,e,n,r,i){lo(e,t,i,r.cell);var o=ao(n,e),a=so(n,o,r),s=ao(e,a),u=so(e,s,r);return u.slice(0,t).concat(a).concat(u.slice(t,u.length))},go=function(t,e,n,r,i){var o=t.slice(0,e),a=t.slice(e),s=Fi.mapCells(t[n],(function(n,o){return e>0&&e<t.length&&r(Fi.getCellElement(t[e-1],o),Fi.getCellElement(t[e],o))?Fi.getCell(t[e],o):ke(i(n.element(),r),!0)}));return o.concat([s]).concat(a)},po=function(t,e,n,r,i){return _(t,(function(t){var o=e>0&&e<Fi.cellLength(t)&&r(Fi.getCellElement(t,e-1),Fi.getCellElement(t,e))?Fi.getCell(t,e):ke(i(Fi.getCellElement(t,n),r),!0);return Fi.addCell(t,e,o)}))},vo=function(t,e,n,r,i){var o=n+1;return _(t,(function(t,a){var s=a===e?ke(i(Fi.getCellElement(t,n),r),!0):Fi.getCell(t,n);return Fi.addCell(t,o,s)}))},bo=function(t,e,n,r,i){var o=e+1,a=t.slice(0,o),s=t.slice(o),u=Fi.mapCells(t[e],(function(t,e){return e===n?ke(i(t.element(),r),!0):t}));return a.concat([u]).concat(s)},yo=function(t,e,n){return t.slice(0,e).concat(t.slice(n+1))},wo=function(t,e,n){var r=_(t,(function(t){var r=t.cells().slice(0,e).concat(t.cells().slice(n+1));return Ee(r,t.section())}));return T(r,(function(t){return t.cells().length>0}))},xo=function(t,e,n,r){return _(t,(function(t){return Fi.mapCells(t,(function(t){return function(t){return S(e,(function(e){return n(t.element(),e.element())}))}(t)?ke(r(t.element(),n),!0):t}))}))},Co=function(t,e,n,r){return void 0!==Fi.getCellElement(t[e],n)&&e>0&&r(Fi.getCellElement(t[e-1],n),Fi.getCellElement(t[e],n))},Ro=function(t,e,n){return e>0&&n(Fi.getCellElement(t,e-1),Fi.getCellElement(t,e))},So=function(t,e,n,r){var i=P(t,(function(r,i){return Co(t,i,e,n)||Ro(r,e,n)?[]:[Fi.getCell(r,e)]}));return xo(t,i,n,r)},_o=function(t,e,n,r){var i=t[e],o=P(i.cells(),(function(r,o){return Co(t,e,o,n)||Ro(i,o,n)?[]:[r]}));return xo(t,o,n,r)},ko=ur([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),To=oi({},ko),Eo=function(t,e,n,r){var o=t.slice(0),a=function(t,e){return 0===t.length?To.none():1===t.length?To.only(0):0===e?To.left(0,1):e===t.length-1?To.right(e-1,e):e>0&&e<t.length-1?To.middle(e-1,e,e+1):To.none()}(t,e),s=function(t){return _(t,i(0))},u=i(s(o)),c=function(t,e){if(n>=0){var i=Math.max(r.minCellWidth(),o[e]-n);return s(o.slice(0,t)).concat([n,i-o[e]]).concat(s(o.slice(e+1)))}var a=Math.max(r.minCellWidth(),o[t]+n),u=o[t]-a;return s(o.slice(0,t)).concat([a-o[t],u]).concat(s(o.slice(e+1)))},l=c;return a.fold(u,(function(t){return r.singleColumnWidth(o[t],n)}),l,(function(t,e,n){return c(e,n)}),(function(t,e){if(n>=0)return s(o.slice(0,e)).concat([n]);var i=Math.max(r.minCellWidth(),o[e]+n);return s(o.slice(0,e)).concat([i-o[e]])}))},No=function(t,e){return lt(t,e)&&parseInt(ct(t,e),10)>1},Oo={hasColspan:function(t){return No(t,"colspan")},hasRowspan:function(t){return No(t,"rowspan")},minWidth:i(10),minHeight:i(10),getInt:function(t,e){return parseInt(St(t,e),10)}},Do=function(t,e,n){return kt(t,e).fold((function(){return n(t)+"px"}),(function(t){return t}))},Ao=function(t,e){return Do(t,"width",(function(t){return Wr.getPixelWidth(t,e)}))},Po=function(t){return Do(t,"height",Wr.getHeight)},Mo=function(t,e,n,r,i){var o=yi(t),a=_(o,(function(t){return t.map(e.edge)}));return _(o,(function(t,e){return t.filter(s(Oo.hasColspan)).fold((function(){var t=vi(a,e);return r(t)}),(function(t){return n(t,i)}))}))},Ho=function(t){return t.map((function(t){return t+"px"})).getOr("")},Bo=function(t,e,n,r){var i=wi(t),o=_(i,(function(t){return t.map(e.edge)}));return _(i,(function(t,e){return t.filter(s(Oo.hasRowspan)).fold((function(){var t=vi(o,e);return r(t)}),(function(t){return n(t)}))}))},Io={getRawWidths:function(t,e,n){return Mo(t,e,Ao,Ho,n)},getPixelWidths:function(t,e,n){return Mo(t,e,Wr.getPixelWidth,(function(t){return t.getOrThunk(n.minCellWidth)}),n)},getPercentageWidths:function(t,e,n){return Mo(t,e,Wr.getPercentageWidth,(function(t){return t.fold((function(){return n.minCellWidth()}),(function(t){return t/n.pixelWidth()*100}))}),n)},getPixelHeights:function(t,e){return Bo(t,e,Wr.getHeight,(function(t){return t.getOrThunk(Oo.minHeight)}))},getRawHeights:function(t,e){return Bo(t,e,Po,Ho)}},Wo=function(t,e,n){for(var r=0,i=t;i<e;i++)r+=void 0!==n[i]?n[i]:0;return r},Lo=function(t,e){var n=Ze.justCells(t);return _(n,(function(t){var n=Wo(t.column(),t.column()+t.colspan(),e);return{element:t.element,width:i(n),colspan:t.colspan}}))},zo=function(t,e){var n=Ze.justCells(t);return _(n,(function(t){var n=Wo(t.row(),t.row()+t.rowspan(),e);return{element:t.element,height:i(n),rowspan:t.rowspan}}))},Fo=function(t,e){return _(t.all(),(function(t,n){return{element:t.element,height:i(e[n])}}))},Uo=function(t){var e=o;return{width:i(t),pixelWidth:i(t),getWidths:Io.getPixelWidths,getCellDelta:e,singleColumnWidth:function(t,e){return[Math.max(Oo.minWidth(),t+e)-t]},minCellWidth:Oo.minWidth,setElementWidth:Wr.setPixelWidth,setTableWidth:function(t,e,n){var r=E(e,(function(t,e){return t+e}),0);Wr.setPixelWidth(t,r)}}},jo=function(t,e){var n=Wr.percentageBasedSizeRegex().exec(e);if(null!==n)return function(t,e){var n=parseFloat(t),r=Sr(e);return{width:i(n),pixelWidth:i(r),getWidths:Io.getPercentageWidths,getCellDelta:function(t){return t/r*100},singleColumnWidth:function(t,e){return[100-t]},minCellWidth:function(){return Oo.minWidth()/r*100},setElementWidth:Wr.setPercentageWidth,setTableWidth:function(t,e,r){var i=r/100*n;Wr.setPercentageWidth(t,n+i)}}}(n[1],t);var r=Wr.pixelBasedSizeRegex().exec(e);if(null!==r){var o=parseInt(r[1],10);return Uo(o)}var a=Sr(t);return Uo(a)},qo=function(t){return Wr.getRawWidth(t).fold((function(){var e=Sr(t);return Uo(e)}),(function(e){return jo(t,e)}))},Vo=function(t){return Ze.generate(t)},Yo=function(t){var e=Ge(t);return Vo(e)},$o=function(t,e,n,r){var i=qo(t),o=i.getCellDelta(e),a=Yo(t),s=i.getWidths(a,r,i),u=Eo(s,n,o,i),c=_(u,(function(t,e){return t+s[e]})),l=Lo(a,c);k(l,(function(t){i.setElementWidth(t.element(),t.width())})),n===a.grid().columns()-1&&i.setTableWidth(t,c,o)},Xo=function(t,e,n,r){var i=Yo(t),o=Io.getPixelHeights(i,r),a=_(o,(function(t,r){return n===r?Math.max(e+t,Oo.minHeight()):t})),s=zo(i,a),u=Fo(i,a);k(u,(function(t){Wr.setHeight(t.element(),t.height())})),k(s,(function(t){Wr.setHeight(t.element(),t.height())}));var c=E(a,(function(t,e){return t+e}),0);Wr.setHeight(t,c)},Go=function(t,e,n){var r=qo(t),i=Vo(e),o=r.getWidths(i,n,r),a=Lo(i,o);k(a,(function(t){r.setElementWidth(t.element(),t.width())})),a.length>0&&r.setTableWidth(t,o,r.getCellDelta(0))},Jo=function(t){var e=t,n=function(){return e};return{get:n,set:function(t){e=t},clone:function(){return Jo(n())}}},Ko=function(t,e,n){if(0===e.length)throw new Error("You must specify at least one required field.");return q("required",e),V(e),function(r){var i=B(r);M(e,(function(t){return R(i,t)}))||U(e,i),t(e,i);var o=T(e,(function(t){return!n.validate(r[t],t)}));return o.length>0&&function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+F(t).join(", ")+") were not.")}(o,n.label),r}},Qo=function(t,e){var n=T(e,(function(e){return!R(t,e)}));n.length>0&&j(n)},Zo=function(t){return function(t,e){return Ko(t,e,{validate:b,label:"function"})}(Qo,t)},ta=Zo(["cell","row","replace","gap"]),ea=function(t){var e=lt(t,"colspan")?parseInt(ct(t,"colspan"),10):1,n=lt(t,"rowspan")?parseInt(ct(t,"rowspan"),10):1;return{element:i(t),colspan:i(e),rowspan:i(n)}},na=function(t,e){void 0===e&&(e=ea),ta(t);var n=Jo(h.none()),r=function(n){return function(e){return t.cell(e)}(e(n))},i=function(t){var e=r(t);return n.get().isNone()&&n.set(h.some(e)),o=h.some({item:t,replacement:e}),e},o=h.none();return{getOrInit:function(t,e){return o.fold((function(){return i(t)}),(function(n){return e(t,n.item)?n.replacement:i(t)}))},cursor:n.get}},ra=function(t,e){return function(n){var r=Jo(h.none());ta(n);var i=[],o=function(o){var a={scope:t},s=n.replace(o,e,a);return i.push({item:o,sub:s}),r.get().isNone()&&r.set(h.some(s)),s};return{replaceOrInit:function(t,e){return function(t,e){return O(i,(function(n){return e(n.item,t)}))}(t,e).fold((function(){return o(t)}),(function(n){return e(t,n.item)?n.sub:o(t)}))},cursor:r.get}}},ia=function(t){ta(t);var e=Jo(h.none());return{combine:function(n){return e.get().isNone()&&e.set(h.some(n)),function(){var e=t.cell({element:i(n),colspan:i(1),rowspan:i(1)});return Tt(e,"width"),Tt(n,"width"),e}},cursor:e.get}},oa=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],aa=function(t,e){var n=t.property().name(e);return R(oa,n)},sa=function(t,e){return R(["br","img","hr","input"],t.property().name(e))},ua=aa,ca=function(t,e){var n=t.property().name(e);return R(["ol","ul"],n)},la=sa,fa=Ln(),da=function(t){return ua(fa,t)},ha=function(t){return ca(fa,t)},ma=function(t){return la(fa,t)},ga=function(t){var e,n=function(t){return"br"===tt(t)},r=function(t){return dn(t).bind((function(e){var r=se(e).map((function(t){return!!da(t)||!!ma(t)&&"img"!==tt(t)})).getOr(!1);return ie(e).map((function(i){return!0===r||function(t){return"li"===tt(t)||Be(t,ha).isSome()}(i)||n(e)||da(i)&&!te(t,i)?[]:[vt.fromTag("br")]}))})).getOr([])},i=0===(e=P(t,(function(t){var e=ue(t);return function(t){return M(t,(function(t){return n(t)||ot(t)&&0===on(t).trim().length}))}(e)?[]:e.concat(r(t))}))).length?[vt.fromTag("br")]:e;ve(t[0]),pe(t[0],i)},pa=function(t){0===Ye(t).length&&be(t)},va=z("grid","cursor"),ba=function(t,e,n){return ya(t,e,n).orThunk((function(){return ya(t,0,0)}))},ya=function(t,e,n){return h.from(t[e]).bind((function(t){return h.from(t.cells()[n]).bind((function(t){return h.from(t.element())}))}))},wa=function(t,e,n){return va(t,ya(t,e,n))},xa=function(t){return N(t,(function(t,e){return S(t,(function(t){return t.row()===e.row()}))?t:t.concat([e])}),[]).sort((function(t,e){return t.row()-e.row()}))},Ca=function(t){return N(t,(function(t,e){return S(t,(function(t){return t.column()===e.column()}))?t:t.concat([e])}),[]).sort((function(t,e){return t.column()-e.column()}))},Ra=function(t,e,n){var r=Je(t,n),i=Ze.generate(r);return Vi(i,e,!0)},Sa=Go,_a={insertRowBefore:Gi((function(t,e,n,r){var i=e.row(),o=e.row(),a=go(t,o,i,n,r.getOrInit);return wa(a,o,e.column())}),Ji,n,n,na),insertRowsBefore:Gi((function(t,e,n,r){var i=e[0].row(),o=e[0].row(),a=xa(e),s=N(a,(function(t,e){return go(t,o,i,n,r.getOrInit)}),t);return wa(s,o,e[0].column())}),Qi,n,n,na),insertRowAfter:Gi((function(t,e,n,r){var i=e.row(),o=e.row()+e.rowspan(),a=go(t,o,i,n,r.getOrInit);return wa(a,o,e.column())}),Ji,n,n,na),insertRowsAfter:Gi((function(t,e,n,r){var i=xa(e),o=i[i.length-1].row(),a=i[i.length-1].row()+i[i.length-1].rowspan(),s=N(i,(function(t,e){return go(t,a,o,n,r.getOrInit)}),t);return wa(s,a,e[0].column())}),Qi,n,n,na),insertColumnBefore:Gi((function(t,e,n,r){var i=e.column(),o=e.column(),a=po(t,o,i,n,r.getOrInit);return wa(a,e.row(),o)}),Ji,Sa,n,na),insertColumnsBefore:Gi((function(t,e,n,r){var i=Ca(e),o=i[0].column(),a=i[0].column(),s=N(i,(function(t,e){return po(t,a,o,n,r.getOrInit)}),t);return wa(s,e[0].row(),a)}),Qi,Sa,n,na),insertColumnAfter:Gi((function(t,e,n,r){var i=e.column(),o=e.column()+e.colspan(),a=po(t,o,i,n,r.getOrInit);return wa(a,e.row(),o)}),Ji,Sa,n,na),insertColumnsAfter:Gi((function(t,e,n,r){var i=e[e.length-1].column(),o=e[e.length-1].column()+e[e.length-1].colspan(),a=Ca(e),s=N(a,(function(t,e){return po(t,o,i,n,r.getOrInit)}),t);return wa(s,e[0].row(),o)}),Qi,Sa,n,na),splitCellIntoColumns:Gi((function(t,e,n,r){var i=vo(t,e.row(),e.column(),n,r.getOrInit);return wa(i,e.row(),e.column())}),Ji,Sa,n,na),splitCellIntoRows:Gi((function(t,e,n,r){var i=bo(t,e.row(),e.column(),n,r.getOrInit);return wa(i,e.row(),e.column())}),Ji,n,n,na),eraseColumns:Gi((function(t,e,n,r){var i=Ca(e),o=wo(t,i[0].column(),i[i.length-1].column()),a=ba(o,e[0].row(),e[0].column());return va(o,a)}),Qi,Sa,pa,na),eraseRows:Gi((function(t,e,n,r){var i=xa(e),o=yo(t,i[0].row(),i[i.length-1].row()),a=ba(o,e[0].row(),e[0].column());return va(o,a)}),Qi,n,pa,na),makeColumnHeader:Gi((function(t,e,n,r){var i=So(t,e.column(),n,r.replaceOrInit);return wa(i,e.row(),e.column())}),Ji,n,n,ra("row","th")),unmakeColumnHeader:Gi((function(t,e,n,r){var i=So(t,e.column(),n,r.replaceOrInit);return wa(i,e.row(),e.column())}),Ji,n,n,ra(null,"td")),makeRowHeader:Gi((function(t,e,n,r){var i=_o(t,e.row(),n,r.replaceOrInit);return wa(i,e.row(),e.column())}),Ji,n,n,ra("col","th")),unmakeRowHeader:Gi((function(t,e,n,r){var i=_o(t,e.row(),n,r.replaceOrInit);return wa(i,e.row(),e.column())}),Ji,n,n,ra(null,"td")),mergeCells:Gi((function(t,e,n,r){var o=e.cells();ga(o);var a=uo(t,e.bounds(),n,i(o[0]));return va(a,h.from(o[0]))}),(function(t,e){return e.mergable()}),n,n,ia),unmergeCells:Gi((function(t,e,n,r){var i=E(e,(function(t,e){return co(t,e,n,r.combine(e))}),t);return va(i,h.from(e[0]))}),(function(t,e){return e.unmergable()}),Sa,n,ia),pasteCells:Gi((function(t,e,n,r){var i=function(t,e){var n=Ge(t),r=Ze.generate(n);return Vi(r,e,!0)}(e.clipboard(),e.generators()),o=xe(e.row(),e.column());return ho(o,t,i,e.generators(),n).fold((function(){return va(t,h.some(e.element()))}),(function(t){var n=ba(t,e.row(),e.column());return va(t,n)}))}),(function(t,e){return Ve(e.element()).bind((function(n){return Xi(t,n).map((function(t){return oi(oi({},t),{generators:e.generators,clipboard:e.clipboard})}))}))}),Sa,n,na),pasteRowsBefore:Gi((function(t,e,n,r){var i=t[e.cells[0].row()],o=e.cells[0].row(),a=Ra(e.clipboard(),e.generators(),i),s=mo(o,t,a,e.generators(),n),u=ba(s,e.cells[0].row(),e.cells[0].column());return va(s,u)}),Ki,n,n,na),pasteRowsAfter:Gi((function(t,e,n,r){var i=t[e.cells[0].row()],o=e.cells[e.cells.length-1].row()+e.cells[e.cells.length-1].rowspan(),a=Ra(e.clipboard(),e.generators(),i),s=mo(o,t,a,e.generators(),n),u=ba(s,e.cells[0].row(),e.cells[0].column());return va(s,u)}),Ki,n,n,na)},ka=function(t){return vt.fromDom(t.getBody())},Ta=function(t){return t.getBoundingClientRect().width},Ea=function(t){return t.getBoundingClientRect().height},Na=function(t){return function(e){return te(e,ka(t))}},Oa=function(t){return/^[0-9]+$/.test(t)&&(t+="px"),t},Da=function(t){var e=Me(t,"td[data-mce-style],th[data-mce-style]");ft(t,"data-mce-style"),k(e,(function(t){ft(t,"data-mce-style")}))},Aa={isRtl:i(!1)},Pa={isRtl:i(!0)},Ma=function(t){return"rtl"===function(t){return"rtl"===St(t,"direction")?"rtl":"ltr"}(t)?Pa:Aa},Ha=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Ba={"border-collapse":"collapse",width:"100%"},Ia={border:"1"},Wa=function(t){return t.getParam("table_default_attributes",Ia,"object")},La=function(t){return t.getParam("table_default_styles",Ba,"object")},za=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},Fa=function(t){return t.getParam("table_row_advtab",!0,"boolean")},Ua=function(t){return t.getParam("table_advtab",!0,"boolean")},ja=function(t){return t.getParam("table_appearance_options",!0,"boolean")},qa=function(t){return t.getParam("table_style_by_css",!1,"boolean")},Va=function(t){return t.getParam("table_cell_class_list",[],"array")},Ya=function(t){return t.getParam("table_row_class_list",[],"array")},$a=function(t){return t.getParam("table_class_list",[],"array")},Xa=function(t){return!1===t.getParam("table_responsive_width")},Ga=function(t,e){return t.fire("newrow",{node:e})},Ja=function(t,e){return t.fire("newcell",{node:e})},Ka=function(t,e,n,r){t.fire("ObjectResizeStart",{target:e,width:n,height:r})},Qa=function(t,e,n,r){t.fire("ObjectResized",{target:e,width:n,height:r})},Za=function(t,e){var r=function(t){return"table"===tt(ka(t))},i=function(t){var e=t.getParam("table_clone_elements");return g(e)?h.some(e.split(/[ ,]/)):Array.isArray(e)?h.some(e):h.none()}(t),o=function(e,n,r,o){return function(a,s){Da(a);var u=o(),c=vt.fromDom(t.getDoc()),l=ri(Ma),f=Cn(r,c,i);return n(a)?e(u,a,s,f,l).bind((function(e){return k(e.newRows(),(function(e){Ga(t,e.dom())})),k(e.newCells(),(function(e){Ja(t,e.dom())})),e.cursor().map((function(e){var n=t.dom.createRng();return n.setStart(e.dom(),0),n.setEnd(e.dom(),0),n}))})):h.none()}};return{deleteRow:o(_a.eraseRows,(function(e){var n=ii(e);return!1===r(t)||n.rows()>1}),n,e),deleteColumn:o(_a.eraseColumns,(function(e){var n=ii(e);return!1===r(t)||n.columns()>1}),n,e),insertRowsBefore:o(_a.insertRowsBefore,c,n,e),insertRowsAfter:o(_a.insertRowsAfter,c,n,e),insertColumnsBefore:o(_a.insertColumnsBefore,c,Lr,e),insertColumnsAfter:o(_a.insertColumnsAfter,c,Lr,e),mergeCells:o(_a.mergeCells,c,n,e),unmergeCells:o(_a.unmergeCells,c,n,e),pasteRowsBefore:o(_a.pasteRowsBefore,c,n,e),pasteRowsAfter:o(_a.pasteRowsAfter,c,n,e),pasteCells:o(_a.pasteCells,c,n,e)}},ts=function(t,e,n){var r=Ge(t),i=Ze.generate(r);return Qi(i,e).map((function(t){var e=Vi(i,n,!1).slice(t[0].row(),t[t.length-1].row()+t[t.length-1].rowspan()),r=$i(e,n);return li(r)}))},es=tinymce.util.Tools.resolve("tinymce.util.Tools"),ns=function(t,e,n){n&&t.formatter.apply("align"+n,{},e)},rs=function(t,e,n){n&&t.formatter.apply("valign"+n,{},e)},is=function(t,e){es.each("left center right".split(" "),(function(n){t.formatter.remove("align"+n,{},e)}))},os=function(t,e){es.each("top middle bottom".split(" "),(function(n){t.formatter.remove("valign"+n,{},e)}))},as=function(t,e,n){var r;return r=function(e,r){for(var i=0;i<r.length;i++){var o=t.getStyle(r[i],n);if(void 0===e&&(e=o),e!==o)return""}return e}(r,t.select("td,th",e))},ss=function(t,e){var n=t.dom,r=e.control.rootControl,i=r.toJSON(),o=n.parseStyle(i.style);o["border-style"]=i.borderStyle,o["border-color"]=i.borderColor,o["background-color"]=i.backgroundColor,o.width=i.width?Oa(i.width):"",o.height=i.height?Oa(i.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(o))))},us=function(t,e){var n=t.dom,r=e.control.rootControl,i=r.toJSON(),o=n.parseStyle(i.style);r.find("#borderStyle").value(o["border-style"]||""),r.find("#borderColor").value(o["border-color"]||""),r.find("#backgroundColor").value(o["background-color"]||""),r.find("#width").value(o.width||""),r.find("#height").value(o.height||"")},cs={createStyleForm:function(t){var e=function(){var e=function(t){return t.getParam("color_picker_callback")}(t);if(e)return function(n){return e.call(t,(function(t){n.control.value(t).fire("change")}),n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:a(ss,t)},items:[{label:"Style",name:"style",type:"textbox",onchange:a(us,t)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:a(ss,t),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:e()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:e()}]}]}},buildListItems:function(t,e,n){var r=function(t,n){return n=n||[],es.each(t,(function(t){var i={text:t.text||t.title};t.menu?i.menu=r(t.menu):(i.value=t.value,e&&e(i)),n.push(i)})),n};return r(t,n||[])},updateStyleField:ss,extractAdvancedStyles:function(t,e){var n=t.parseStyle(t.getAttrib(e,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=t.serializeStyle(n),r},updateAdvancedFields:us,syncAdvancedStyleFields:function(e,n){n.control.rootControl.find("#style")[0].getEl().isEqualNode(t.document.activeElement)?us(e,n):ss(e,n)}},ls=function(t,e,n){var r,i=t.dom;function o(t,n,r){(1===e.length||r)&&i.setAttrib(t,n,r)}function a(t,n,r){(1===e.length||r)&&i.setStyle(t,n,r)}za(t)&&cs.syncAdvancedStyleFields(t,n),r=n.control.rootControl.toJSON(),t.undoManager.transact((function(){es.each(e,(function(n){var s,u;o(n,"scope",r.scope),1===e.length?o(n,"style",r.style):(s=n,u=r.style,delete s.dataset.mceStyle,s.style.cssText+=";"+u),o(n,"class",r.class),a(n,"width",Oa(r.width)),a(n,"height",Oa(r.height)),r.type&&n.nodeName.toLowerCase()!==r.type&&(n=i.rename(n,r.type)),1===e.length&&(is(t,n),os(t,n)),r.align&&ns(t,n,r.align),r.valign&&rs(t,n,r.valign)})),t.focus()}))},fs=function(t){var e,n,r,i=[];if(i=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),e=t.dom.getParent(t.selection.getStart(),"td,th"),!i.length&&e&&i.push(e),e=e||i[0]){n=i.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:e.nodeName.toLowerCase()}:function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),type:e.nodeName.toLowerCase(),style:"",align:"",valign:""};return es.each("left center right".split(" "),(function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)})),es.each("top middle bottom".split(" "),(function(n){t.formatter.matchNode(e,"valign"+n)&&(r.valign=n)})),za(t)&&es.extend(r,cs.extractAdvancedStyles(n,e)),r}(t,e),Va(t).length>0&&(r={name:"class",type:"listbox",label:"Class",values:cs.buildListItems(Va(t),(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[e.value]})})}))});var o={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:a(cs.updateStyleField,t)},{label:"Height",name:"height",onchange:a(cs.updateStyleField,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};za(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:o},cs.createStyleForm(t)],onsubmit:a(ls,t,i)}):t.windowManager.open({title:"Cell properties",data:n,body:o,onsubmit:a(ls,t,i)})}};function ds(t,e,n,r){var i=t.dom;function o(t,n,r){(1===e.length||r)&&i.setAttrib(t,n,r)}Fa(t)&&cs.syncAdvancedStyleFields(t,r);var a=r.control.rootControl.toJSON();t.undoManager.transact((function(){es.each(e,(function(r){o(r,"scope",a.scope),o(r,"style",a.style),o(r,"class",a.class),function(t,n,r){(1===e.length||r)&&i.setStyle(t,n,r)}(r,"height",Oa(a.height)),a.type!==r.parentNode.nodeName.toLowerCase()&&function(t,e,n){var r=t.getParent(e,"table"),i=e.parentNode,o=t.select(n,r)[0];o||(o=t.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?t.insertAfter(o,r.firstChild):r.insertBefore(o,r.firstChild):r.appendChild(o)),o.appendChild(e),i.hasChildNodes()||t.remove(i)}(t.dom,r,a.type),a.align!==n.align&&(is(t,r),ns(t,r,a.align))})),t.focus()}))}var hs=function(t){var e,n,r,i,o,s,u=t.dom,c=[];e=u.getParent(t.selection.getStart(),"table"),n=u.getParent(t.selection.getStart(),"td,th"),es.each(e.rows,(function(t){es.each(t.cells,(function(e){if(u.getAttrib(e,"data-mce-selected")||e===n)return c.push(t),!1}))})),(r=c[0])&&(o=c.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:function(t,e){var n=t.dom,r={height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),align:"",style:"",type:e.parentNode.nodeName.toLowerCase()};return es.each("left center right".split(" "),(function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)})),Fa(t)&&es.extend(r,cs.extractAdvancedStyles(n,e)),r}(t,r),Ya(t).length>0&&(i={name:"class",type:"listbox",label:"Class",values:cs.buildListItems(Ya(t),(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})}))}),s={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},i]},Fa(t)?t.windowManager.open({title:"Row properties",data:o,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},cs.createStyleForm(t)],onsubmit:a(ds,t,c,o)}):t.windowManager.open({title:"Row properties",data:o,body:s,onsubmit:a(ds,t,c,o)}))},ms=tinymce.util.Tools.resolve("tinymce.Env"),gs={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},ps=function(t,e,n,r,i){void 0===i&&(i=gs);var o=vt.fromTag("table");Rt(o,i.styles),ut(o,i.attributes);var a=vt.fromTag("tbody");he(o,a);for(var s=[],u=0;u<t;u++){for(var c=vt.fromTag("tr"),l=0;l<e;l++){var f=u<n||l<r?vt.fromTag("th"):vt.fromTag("td");l<r&&st(f,"scope","row"),u<n&&st(f,"scope","col"),he(f,vt.fromTag("br")),i.percentages&&Ct(f,"width",100/e+"%"),he(c,f)}s.push(c)}return pe(a,s),o},vs=function(t,e){t.selection.select(e.dom(),!0),t.selection.collapse(!0)},bs=function(t,e,n){var r,i=La(t),o={styles:i,attributes:Wa(t),percentages:(r=i.width,g(r)&&-1!==r.indexOf("%")&&!Xa(t))},s=ps(n,e,0,0,o);st(s,"data-mce-id","__mce");var u=function(t){var e=vt.fromTag("div"),n=vt.fromDom(t.dom().cloneNode(!0));return he(e,n),function(t){return t.dom().innerHTML}(e)}(s);return t.insertContent(u),Le(ka(t),'table[data-mce-id="__mce"]').map((function(e){return Xa(t)&&Ct(e,"width",St(e,"width")),ft(e,"data-mce-id"),function(t,e){k(Me(e,"tr"),(function(e){Ga(t,e.dom()),k(Me(e,"th,td"),(function(e){Ja(t,e.dom())}))}))}(t,e),function(t,e){Le(e,"td,th").each(a(vs,t))}(t,e),e.dom()})).getOr(null)};function ys(t,e,n,r){if("TD"===e.tagName||"TH"===e.tagName)t.setStyle(e,n,r);else if(e.children)for(var i=0;i<e.children.length;i++)ys(t,e.children[i],n,r)}var ws,xs=function(t,e,n){var r,i,o=t.dom;Ua(t)&&cs.syncAdvancedStyleFields(t,n),!1===(i=n.control.rootControl.toJSON()).class&&delete i.class,t.undoManager.transact((function(){e||(e=bs(t,i.cols||1,i.rows||1)),function(t,e,n){var r,i=t.dom,o={},a={};if(o.class=n.class,a.height=Oa(n.height),i.getAttrib(e,"width")&&!qa(t)?o.width=(r=n.width)?r.replace(/px$/,""):"":a.width=Oa(n.width),qa(t)?(a["border-width"]=Oa(n.border),a["border-spacing"]=Oa(n.cellspacing),es.extend(o,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):es.extend(o,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),qa(t)&&e.children)for(var s=0;s<e.children.length;s++)ys(i,e.children[s],{"border-width":Oa(n.border),"border-color":n.borderColor,padding:Oa(n.cellpadding)});n.style?es.extend(a,i.parseStyle(n.style)):a=es.extend({},i.parseStyle(i.getAttrib(e,"style")),a),o.style=i.serializeStyle(a),i.setAttribs(e,o)}(t,e,i),(r=o.select("caption",e)[0])&&!i.caption&&o.remove(r),!r&&i.caption&&((r=o.create("caption")).innerHTML=ms.ie?"":'<br data-mce-bogus="1"/>',e.insertBefore(r,e.firstChild)),is(t,e),i.align&&ns(t,e,i.align),t.focus(),t.addVisual()}))},Cs=function(t,e){var n,r,i,o,s,u=t.dom,c={};!0===e?(n=u.getParent(t.selection.getStart(),"table"))&&(c=function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),cellspacing:n.getStyle(e,"border-spacing")||n.getAttrib(e,"cellspacing"),cellpadding:n.getAttrib(e,"data-mce-cell-padding")||n.getAttrib(e,"cellpadding")||as(t.dom,e,"padding"),border:n.getAttrib(e,"data-mce-border")||n.getAttrib(e,"border")||as(t.dom,e,"border"),borderColor:n.getAttrib(e,"data-mce-border-color"),caption:!!n.select("caption",e)[0],class:n.getAttrib(e,"class")};return es.each("left center right".split(" "),(function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)})),Ua(t)&&es.extend(r,cs.extractAdvancedStyles(n,e)),r}(t,n)):(r={label:"Cols",name:"cols"},i={label:"Rows",name:"rows"}),$a(t).length>0&&(c.class&&(c.class=c.class.replace(/\s*mce\-item\-table\s*/g,"")),o={name:"class",type:"listbox",label:"Class",values:cs.buildListItems($a(t),(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})}))}),s={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:ja(t)?[r,i,{label:"Width",name:"width",onchange:a(cs.updateStyleField,t)},{label:"Height",name:"height",onchange:a(cs.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,i,{label:"Width",name:"width",onchange:a(cs.updateStyleField,t)},{label:"Height",name:"height",onchange:a(cs.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},o]},Ua(t)?t.windowManager.open({title:"Table properties",data:c,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},cs.createStyleForm(t)],onsubmit:a(xs,t,n)}):t.windowManager.open({title:"Table properties",data:c,body:s,onsubmit:a(xs,t,n)})},Rs=es.each,Ss=function(t,e,r,i,o){var u=Na(t),c=function(e){return function(){return h.from(t.dom.getParent(t.selection.getStart(),e)).map(vt.fromDom)}},l=c("caption"),f=c("th,td"),d=function(t){return $e(t,u)},m=function(t){return{width:Ta(t.dom()),height:Ta(t.dom())}},g=function(e){f().each((function(n){d(n).each((function(o){var a=vr.forMenu(i,o,n),s=m(o);e(o,a).each((function(e){!function(t,e,n){var r=m(n);e.width===r.width&&e.height===r.height||(Ka(t,n.dom(),e.width,e.height),Qa(t,n.dom(),r.width,r.height))}(t,s,o),t.selection.setRng(e),t.focus(),r.clear(o),Da(o)}))}))}))},p=function(e){return f().bind((function(e){return d(e).bind((function(r){var o=vt.fromDom(t.getDoc()),a=vr.forMenu(i,r,e),s=Cn(n,o,h.none());return ts(r,a,s)}))}))},v=function(e){o.get().each((function(n){var o=_(n,(function(t){return pn(t)}));f().each((function(n){d(n).each((function(a){var s=vt.fromDom(t.getDoc()),u=Rn(s),c=vr.pasteRows(i,a,n,o,u);e(a,c).each((function(e){t.selection.setRng(e),t.focus(),r.clear(a)}))}))}))}))};Rs({mceTableSplitCells:function(){g(e.unmergeCells)},mceTableMergeCells:function(){g(e.mergeCells)},mceTableInsertRowBefore:function(){g(e.insertRowsBefore)},mceTableInsertRowAfter:function(){g(e.insertRowsAfter)},mceTableInsertColBefore:function(){g(e.insertColumnsBefore)},mceTableInsertColAfter:function(){g(e.insertColumnsAfter)},mceTableDeleteCol:function(){g(e.deleteColumn)},mceTableDeleteRow:function(){g(e.deleteRow)},mceTableCutRow:function(t){o.set(p()),g(e.deleteRow)},mceTableCopyRow:function(t){o.set(p())},mceTablePasteRowBefore:function(t){v(e.pasteRowsBefore)},mceTablePasteRowAfter:function(t){v(e.pasteRowsAfter)},mceTableDelete:function(){f().orThunk(l).each((function(e){$e(e,u).filter(s(u)).each((function(e){var n=vt.fromText("");fe(e,n),be(e);var r=t.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),t.selection.setRng(r)}))}))}},(function(e,n){t.addCommand(n,e)})),Rs({mceInsertTable:a(Cs,t),mceTableProps:a(Cs,t,!0),mceTableRowProps:a(hs,t),mceTableCellProps:a(fs,t)},(function(e,n){t.addCommand(n,(function(t,n){e(n)}))}))},_s=function(t){var e=h.from(t.dom().documentElement).map(vt.fromDom).getOr(t);return{parent:i(e),view:i(t),origin:i(Fr(0,0))}},ks=function(t,e){return{parent:i(e),view:i(t),origin:i(Fr(0,0))}},Ts=function(t){var e=z.apply(null,t),n=[];return{bind:function(t){if(void 0===t)throw new Error("Event bind error: undefined handler");n.push(t)},unbind:function(t){n=T(n,(function(e){return e!==t}))},trigger:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.apply(null,t);k(n,(function(t){t(i)}))}}},Es=function(t){return{registry:W(t,(function(t){return{bind:t.bind,unbind:t.unbind}})),trigger:W(t,(function(t){return t.trigger}))}},Ns=function(t,e){return function(n){if(t(n)){var o=vt.fromDom(n.target),a=function(){n.stopPropagation()},s=function(){n.preventDefault()},u=r(s,a),c=function(t,e,n,r,o,a,s){return{target:i(t),x:i(e),y:i(n),stop:r,prevent:o,kill:a,raw:i(s)}}(o,n.clientX,n.clientY,a,s,u,n);e(c)}}},Os=function(t,e,n,r){return function(t,e,n,r,i){var o=Ns(n,r);return t.dom().addEventListener(e,o,i),{unbind:a(Ds,t,e,o,i)}}(t,e,n,r,!1)},Ds=function(t,e,n,r){t.dom().removeEventListener(e,n,r)},As=i(!0),Ps=function(t,e,n){return Os(t,e,As,n)},Ms=Object.prototype.hasOwnProperty,Hs=(ws=function(t,e){return e},function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<t.length;r++){var i=t[r];for(var o in i)Ms.call(i,o)&&(n[o]=ws(n[o],i[o]))}return n}),Bs={resolve:xi("ephox-dragster").resolve},Is=Zo(["compare","extract","mutate","sink"]),Ws=Zo(["element","start","stop","destroy"]),Ls=Zo(["forceDrop","drop","move","delayDrop"]),zs=Is({compare:function(t,e){return Fr(e.left()-t.left(),e.top()-t.top())},extract:function(t){return h.some(Fr(t.x(),t.y()))},sink:function(t,e){var n=function(t){var e=Hs({layerClass:Bs.resolve("blocker")},t),n=vt.fromTag("div");return st(n,"role","presentation"),Rt(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),mi(n,Bs.resolve("blocker")),mi(n,e.layerClass),{element:function(){return n},destroy:function(){be(n)}}}(e),r=Ps(n.element(),"mousedown",t.forceDrop),i=Ps(n.element(),"mouseup",t.drop),o=Ps(n.element(),"mousemove",t.move),a=Ps(n.element(),"mouseout",t.delayDrop);return Ws({element:n.element,start:function(t){he(t,n.element())},stop:function(){be(n.element())},destroy:function(){n.destroy(),i.unbind(),o.unbind(),a.unbind(),r.unbind()}})},mutate:function(t,e){t.mutate(e.left(),e.top())}});function Fs(){var t=h.none(),e=Es({move:Ts(["info"])});return{onEvent:function(n,r){r.extract(n).each((function(n){(function(e,n){var r=t.map((function(t){return e.compare(t,n)}));return t=h.some(n),r})(r,n).each((function(t){e.trigger.move(t)}))}))},reset:function(){t=h.none()},events:e.registry}}function Us(){var t={onEvent:n,reset:n},e=Fs(),r=t;return{on:function(){r.reset(),r=e},off:function(){r.reset(),r=t},isOn:function(){return r===e},onEvent:function(t,e){r.onEvent(t,e)},events:e.events}}var js=function(e,n,r){var i,o,a,s=!1,u=Es({start:Ts([]),stop:Ts([])}),c=Us(),l=function(){h.stop(),c.isOn()&&(c.off(),u.trigger.stop())},f=(i=l,o=200,a=null,{cancel:function(){null!==a&&(t.clearTimeout(a),a=null)},throttle:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null!==a&&t.clearTimeout(a),a=t.setTimeout((function(){i.apply(null,e),a=null}),o)}});c.events.move.bind((function(t){n.mutate(e,t.info())}));var d=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];s&&t.apply(null,e)}},h=n.sink(Ls({forceDrop:l,drop:d(l),move:d((function(t){f.cancel(),c.onEvent(t,n)})),delayDrop:d(f.throttle)}),r);return{element:h.element,go:function(t){h.start(t),c.on(),u.trigger.start()},on:function(){s=!0},off:function(){s=!1},destroy:function(){h.destroy()},events:u.registry}},qs=function(t,e){void 0===e&&(e={});var n=void 0!==e.mode?e.mode:zs;return js(t,n,e)},Vs=function(){var t=Es({drag:Ts(["xDelta","yDelta","target"])}),e=h.none(),n=function(){var t=Es({drag:Ts(["xDelta","yDelta"])});return{mutate:function(e,n){t.trigger.drag(e,n)},events:t.registry}}();return n.events.drag.bind((function(n){e.each((function(e){t.trigger.drag(n.xDelta(),n.yDelta(),e)}))})),{assign:function(t){e=h.some(t)},get:function(){return e},mutate:n.mutate,events:t.registry}},Ys=function(t){return"true"===ct(t,"contenteditable")},$s=Ri.resolve("resizer-bar-dragging"),Xs=function(t,e,n){var r=Vs(),i=qs(r,{}),o=h.none(),s=function(t,e){return h.from(ct(t,e))};r.events.drag.bind((function(t){s(t.target(),"data-row").each((function(e){var n=Oo.getInt(t.target(),"top");Ct(t.target(),"top",n+t.yDelta()+"px")})),s(t.target(),"data-column").each((function(e){var n=Oo.getInt(t.target(),"left");Ct(t.target(),"left",n+t.xDelta()+"px")}))}));var u=function(t,e){return Oo.getInt(t,e)-parseInt(ct(t,"data-initial-"+e),10)};i.events.stop.bind((function(){r.get().each((function(r){o.each((function(i){s(r,"data-row").each((function(t){var e=u(r,"top");ft(r,"data-initial-top"),g.trigger.adjustHeight(i,e,parseInt(t,10))})),s(r,"data-column").each((function(t){var e=u(r,"left");ft(r,"data-initial-left"),g.trigger.adjustWidth(i,e,parseInt(t,10))})),Pi(t,i,n,e)}))}))}));var c=function(e,n){g.trigger.startAdjust(),r.assign(e),st(e,"data-initial-"+n,parseInt(St(e,n),10)),mi(e,$s),Ct(e,"opacity","0.2"),i.go(t.parent())},l=Ps(t.parent(),"mousedown",(function(t){Ii(t.target())&&c(t.target(),"top"),Wi(t.target())&&c(t.target(),"left")})),f=function(e){return te(e,t.view())},d=function(t){return ze(t,"table",f).filter((function(t){return function(t,e){return ze(t,"[contenteditable]",e)}(t,f).exists(Ys)}))},m=Ps(t.view(),"mouseover",(function(r){d(r.target()).fold((function(){bt(r.target())&&Bi(t)}),(function(r){o=h.some(r),Pi(t,r,n,e)}))})),g=Es({adjustHeight:Ts(["table","delta","row"]),adjustWidth:Ts(["table","delta","column"]),startAdjust:Ts([])});return{destroy:function(){l.unbind(),m.unbind(),i.destroy(),Bi(t)},refresh:function(r){Pi(t,r,n,e)},on:i.on,off:i.off,hideBars:a(Mi,t),showBars:a(Hi,t),events:g.registry}},Gs=function(t,e){var n=ei.height,r=Xs(t,e,n),i=Es({beforeResize:Ts(["table"]),afterResize:Ts(["table"]),startDrag:Ts([])});return r.events.adjustHeight.bind((function(t){i.trigger.beforeResize(t.table());var e=n.delta(t.delta(),t.table());Xo(t.table(),e,t.row(),n),i.trigger.afterResize(t.table())})),r.events.startAdjust.bind((function(t){i.trigger.startDrag()})),r.events.adjustWidth.bind((function(t){i.trigger.beforeResize(t.table());var n=e.delta(t.delta(),t.table());$o(t.table(),n,t.column(),e),i.trigger.afterResize(t.table())})),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:i.registry}},Js=function(t,e){return t.inline?ks(ka(t),function(){var t=vt.fromTag("div");return Rt(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),he(yt(),t),t}()):_s(vt.fromDom(t.getDoc()))},Ks=function(t,e){t.inline&&be(e.parent())},Qs=function(t){var e,n,r=h.none(),i=h.none(),o=h.none(),a=/(\d+(\.\d+)?)%/,s=function(t){return"TABLE"===t.nodeName};return t.on("init",(function(){var e=ri(Ma),n=Js(t);if(o=h.some(n),function(t){var e=t.getParam("object_resizing",!0);return"table"===e||e}(t)&&function(t){return t.getParam("table_resize_bars",!0,"boolean")}(t)){var a=Gs(n,e);a.on(),a.events.startDrag.bind((function(e){r=h.some(t.selection.getRng())})),a.events.beforeResize.bind((function(e){var n=e.table().dom();Ka(t,n,Ta(n),Ea(n))})),a.events.afterResize.bind((function(e){var n=e.table(),i=n.dom();Da(n),r.each((function(e){t.selection.setRng(e),t.focus()})),Qa(t,i,Ta(i),Ea(i)),t.undoManager.add()})),i=h.some(a)}})),t.on("ObjectResizeStart",(function(r){var i,o=r.target;s(o)&&(e=r.width,i=o,n=t.dom.getStyle(i,"width")||t.dom.getAttrib(i,"width"))})),t.on("ObjectResized",(function(r){var i=r.target;if(s(i)){var o=i;if(a.test(n)){var u=parseFloat(a.exec(n)[1]),c=r.width*u/e;t.dom.setStyle(o,"width",c+"%")}else{var l=[];es.each(o.rows,(function(e){es.each(e.cells,(function(e){var n=t.dom.getStyle(e,"width",!0);l.push({cell:e,width:n})}))})),es.each(l,(function(e){t.dom.setStyle(e.cell,"width",e.width),t.dom.setAttrib(e.cell,"width",null)}))}}})),{lazyResize:function(){return i},lazyWire:function(){return o.getOr(_s(vt.fromDom(t.getBody())))},destroy:function(){i.each((function(t){t.destroy()})),o.each((function(e){Ks(t,e)}))}}},Zs=ur([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),tu=oi(oi({},Zs),{none:function(t){return void 0===t&&(t=void 0),Zs.none(t)}}),eu=function(t,e){return $e(t,e).bind((function(e){var n=Ye(e);return D(n,(function(e){return te(t,e)})).map((function(t){return{index:i(t),all:i(n)}}))}))},nu=function(t,e){return eu(t,e).fold((function(){return tu.none(t)}),(function(e){return e.index()+1<e.all().length?tu.middle(t,e.all()[e.index()+1]):tu.last(t)}))},ru=function(t,e){return eu(t,e).fold((function(){return tu.none()}),(function(e){return e.index()-1>=0?tu.middle(t,e.all()[e.index()-1]):tu.first(t)}))},iu={create:z("start","soffset","finish","foffset")},ou=ur([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),au={before:ou.before,on:ou.on,after:ou.after,cata:function(t,e,n,r){return t.fold(e,n,r)},getStart:function(t){return t.fold(o,o,o)}},su=ur([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),uu={domRange:su.domRange,relative:su.relative,exact:su.exact,exactFromRange:function(t){return su.exact(t.start(),t.soffset(),t.finish(),t.foffset())},getWin:function(t){var e,n=function(t){return t.match({domRange:function(t){return vt.fromDom(t.startContainer)},relative:function(t,e){return au.getStart(t)},exact:function(t,e,n,r){return t}})}(t);return e=n,vt.fromDom(e.dom().ownerDocument.defaultView)},range:iu.create},cu=function(t,e){t.selectNodeContents(e.dom())},lu=function(t,e,n){var r,i=t.document.createRange();return r=i,e.fold((function(t){r.setStartBefore(t.dom())}),(function(t,e){r.setStart(t.dom(),e)}),(function(t){r.setStartAfter(t.dom())})),function(t,e){e.fold((function(e){t.setEndBefore(e.dom())}),(function(e,n){t.setEnd(e.dom(),n)}),(function(e){t.setEndAfter(e.dom())}))}(i,n),i},fu=function(t,e,n,r,i){var o=t.document.createRange();return o.setStart(e.dom(),n),o.setEnd(r.dom(),i),o},du=function(t){return{left:i(t.left),top:i(t.top),right:i(t.right),bottom:i(t.bottom),width:i(t.width),height:i(t.height)}},hu=ur([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),mu=function(t,e,n){return e(vt.fromDom(n.startContainer),n.startOffset,vt.fromDom(n.endContainer),n.endOffset)},gu=function(t,e){return function(t,e){var n=e.ltr();return n.collapsed?e.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return hu.rtl(vt.fromDom(t.endContainer),t.endOffset,vt.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return mu(0,hu.ltr,n)})):mu(0,hu.ltr,n)}(0,function(t,e){return e.match({domRange:function(t){return{ltr:i(t),rtl:h.none}},relative:function(e,n){return{ltr:gt((function(){return lu(t,e,n)})),rtl:gt((function(){return h.some(lu(t,n,e))}))}},exact:function(e,n,r,i){return{ltr:gt((function(){return fu(t,e,n,r,i)})),rtl:gt((function(){return h.some(fu(t,r,i,e,n))}))}}})}(t,e))},pu=function(t,e){return gu(t,e).match({ltr:function(e,n,r,i){var o=t.document.createRange();return o.setStart(e.dom(),n),o.setEnd(r.dom(),i),o},rtl:function(e,n,r,i){var o=t.document.createRange();return o.setStart(r.dom(),i),o.setEnd(e.dom(),n),o}})},vu=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},bu=function(t,e,n,r,i){var o=function(n){var r=t.dom().createRange();return r.setStart(e.dom(),n),r.collapse(!0),r},a=on(e).length,s=function(t,e,n,r,i){if(0===i)return 0;if(e===r)return i-1;for(var o=r,a=1;a<i;a++){var s=t(a),u=Math.abs(e-s.left);if(n<=s.bottom){if(n<s.top||u>o)return a-1;o=u}}return 0}((function(t){return o(t).getBoundingClientRect()}),n,r,i.right,a);return o(s)},yu=function(t,e,n,r){return ot(e)?function(t,e,n,r){var i=t.dom().createRange();i.selectNode(e.dom());var o=i.getClientRects();return si(o,(function(t){return vu(t,n,r)?h.some(t):h.none()})).map((function(i){return bu(t,e,n,r,i)}))}(t,e,n,r):function(t,e,n,r){var i=t.dom().createRange(),o=ue(e);return si(o,(function(e){return i.selectNode(e.dom()),vu(i.getBoundingClientRect(),n,r)?yu(t,e,n,r):h.none()}))}(t,e,n,r)},wu=function(t,e){return e-t.left<t.right-e},xu=function(t,e,n){var r=t.dom().createRange();return r.selectNode(e.dom()),r.collapse(n),r},Cu=function(t,e,n){var r=t.dom().createRange();r.selectNode(e.dom());var i=r.getBoundingClientRect(),o=wu(i,n);return(!0===o?fn:dn)(e).map((function(e){return xu(t,e,o)}))},Ru=function(t,e,n){var r=e.dom().getBoundingClientRect(),i=wu(r,n);return h.some(xu(t,e,i))},Su=function(t,e,n,r){var i=t.dom().createRange();i.selectNode(e.dom());var o=i.getBoundingClientRect();return function(t,e,n,r){var i=t.dom().createRange();i.selectNode(e.dom());var o=i.getBoundingClientRect(),a=Math.max(o.left,Math.min(o.right,n)),s=Math.max(o.top,Math.min(o.bottom,r));return yu(t,e,a,s)}(t,e,Math.max(o.left,Math.min(o.right,n)),Math.max(o.top,Math.min(o.bottom,r)))},_u=document.caretPositionFromPoint?function(t,e,n){return h.from(t.dom().caretPositionFromPoint(e,n)).bind((function(e){if(null===e.offsetNode)return h.none();var n=t.dom().createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),h.some(n)}))}:document.caretRangeFromPoint?function(t,e,n){return h.from(t.dom().caretRangeFromPoint(e,n))}:function(t,e,n){return vt.fromPoint(t,e,n).bind((function(r){var i=function(){return function(t,e,n){return(0===ue(e).length?Ru:Cu)(t,e,n)}(t,r,e)};return 0===ue(r).length?i():Su(t,r,e,n).orThunk(i)}))},ku=function(t,e){var n=tt(t);return"input"===n?au.after(t):R(["br","img"],n)?0===e?au.before(t):au.after(t):au.on(t,e)},Tu=function(t,e){var n=t.fold(au.before,ku,au.after),r=e.fold(au.before,ku,au.after);return uu.relative(n,r)},Eu=function(t,e,n,r){var i=ku(t,e),o=ku(n,r);return uu.relative(i,o)},Nu=function(t,e,n,r){var i=function(t,e,n,r){var i=re(t).dom().createRange();return i.setStart(t.dom(),e),i.setEnd(n.dom(),r),i}(t,e,n,r),o=te(t,n)&&e===r;return i.collapsed&&!o},Ou=function(t,e){h.from(t.getSelection()).each((function(t){t.removeAllRanges(),t.addRange(e)}))},Du=function(t,e,n,r,i){var o=fu(t,e,n,r,i);Ou(t,o)},Au=function(t,e){return gu(t,e).match({ltr:function(e,n,r,i){Du(t,e,n,r,i)},rtl:function(e,n,r,i){var o=t.getSelection();if(o.setBaseAndExtent)o.setBaseAndExtent(e.dom(),n,r.dom(),i);else if(o.extend)try{!function(t,e,n,r,i,o){e.collapse(n.dom(),r),e.extend(i.dom(),o)}(0,o,e,n,r,i)}catch(o){Du(t,r,i,e,n)}else Du(t,r,i,e,n)}})},Pu=function(t){var e=uu.getWin(t).dom(),n=function(t,n,r,i){return fu(e,t,n,r,i)},r=function(t){return t.match({domRange:function(t){var e=vt.fromDom(t.startContainer),n=vt.fromDom(t.endContainer);return Eu(e,t.startOffset,n,t.endOffset)},relative:Tu,exact:Eu})}(t);return gu(e,r).match({ltr:n,rtl:n})},Mu=function(t){var e=vt.fromDom(t.anchorNode),n=vt.fromDom(t.focusNode);return Nu(e,t.anchorOffset,n,t.focusOffset)?h.some(iu.create(e,t.anchorOffset,n,t.focusOffset)):function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return h.some(iu.create(vt.fromDom(e.startContainer),e.startOffset,vt.fromDom(n.endContainer),n.endOffset))}return h.none()}(t)},Hu=function(t,e){var n=function(t,e){var n=t.document.createRange();return cu(n,e),n}(t,e);Ou(t,n)},Bu=function(t){return function(t){return h.from(t.getSelection()).filter((function(t){return t.rangeCount>0})).bind(Mu)}(t).map((function(t){return uu.exact(t.start(),t.soffset(),t.finish(),t.foffset())}))},Iu=function(t,e){return function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?h.some(n).map(du):h.none()}(pu(t,e))},Wu=function(t,e,n){return function(t,e,n){var r=vt.fromDom(t.document);return _u(r,e,n).map((function(t){return iu.create(vt.fromDom(t.startContainer),t.startOffset,vt.fromDom(t.endContainer),t.endOffset)}))}(t,e,n)},Lu=tinymce.util.Tools.resolve("tinymce.util.VK"),zu=function(t,e,n,r){return qu(t,e,nu(n),r)},Fu=function(t,e,n,r){return qu(t,e,ru(n),r)},Uu=function(t,e){var n=uu.exact(e,0,e,0);return Pu(n)},ju=function(t,e){var n,r=Me(e,"tr");return(n=r,0===n.length?h.none():h.some(n[n.length-1])).bind((function(t){return Le(t,"td,th").map((function(t){return Uu(0,t)}))}))},qu=function(t,e,n,r,i){return n.fold(h.none,h.none,(function(t,e){return fn(e).map((function(t){return Uu(0,t)}))}),(function(n){return $e(n,e).bind((function(e){var i=vr.noMenu(n);return t.undoManager.transact((function(){r.insertRowsAfter(e,i)})),ju(0,e)}))}))},Vu=["table","li","dl"],Yu=function(t,e,n,r){if(t.keyCode===Lu.TAB){var i=ka(e),o=function(t){var e=tt(t);return te(t,i)||R(Vu,e)},a=e.selection.getRng();if(a.collapsed){var s=vt.fromDom(a.startContainer);Ve(s,o).each((function(i){t.preventDefault(),(t.shiftKey?Fu:zu)(e,o,i,n,r).each((function(t){e.selection.setRng(t)}))}))}}},$u={create:z("selection","kill")},Xu=function(t,e,n,r){return{start:i(au.on(t,e)),finish:i(au.on(n,r))}},Gu={convertToRange:function(t,e){var n=pu(t,e);return iu.create(vt.fromDom(n.startContainer),n.startOffset,vt.fromDom(n.endContainer),n.endOffset)},makeSitus:Xu},Ju=function(t,e,n,r,i){return te(n,r)?h.none():tr(n,r,e).bind((function(e){var r=e.boxes().getOr([]);return r.length>0?(i(t,r,e.start(),e.finish()),h.some($u.create(h.some(Gu.makeSitus(n,0,n,un(n))),!0))):h.none()}))},Ku={sync:function(t,e,n,r,i,o,a){return te(n,i)&&r===o?h.none():ze(n,"td,th",e).bind((function(n){return ze(i,"td,th",e).bind((function(r){return Ju(t,e,n,r,a)}))}))},detect:Ju,update:function(t,e,n,r,i){return nr(r,t,e,i.firstSelectedSelector(),i.lastSelectedSelector()).map((function(t){return i.clear(n),i.selectRange(n,t.boxes(),t.start(),t.finish()),t.boxes()}))}},Qu=z("item","mode"),Zu=function(t,e,n,r){return void 0===r&&(r=tc),t.property().parent(e).map((function(t){return Qu(t,r)}))},tc=function(t,e,n,r){return void 0===r&&(r=ec),n.sibling(t,e).map((function(t){return Qu(t,r)}))},ec=function(t,e,n,r){void 0===r&&(r=ec);var i=t.property().children(e);return n.first(i).map((function(t){return Qu(t,r)}))},nc=[{current:Zu,next:tc,fallback:h.none()},{current:tc,next:ec,fallback:h.some(Zu)},{current:ec,next:ec,fallback:h.some(tc)}],rc=function(t,e,n,r,i){return void 0===i&&(i=nc),O(i,(function(t){return t.current===n})).bind((function(n){return n.current(t,e,r,n.next).orThunk((function(){return n.fallback.bind((function(n){return rc(t,e,n,r)}))}))}))},ic=function(){return{sibling:function(t,e){return t.query().prevSibling(e)},first:function(t){return t.length>0?h.some(t[t.length-1]):h.none()}}},oc=function(){return{sibling:function(t,e){return t.query().nextSibling(e)},first:function(t){return t.length>0?h.some(t[0]):h.none()}}},ac=function(t,e,n,r,i,o){return rc(t,e,r,i).bind((function(e){return o(e.item())?h.none():n(e.item())?h.some(e.item()):ac(t,e.item(),n,e.mode(),i,o)}))},sc=function(t){return function(e){return 0===t.property().children(e).length}},uc=function(t,e,n,r){return ac(t,e,n,tc,ic(),r)},cc=function(t,e,n,r){return ac(t,e,n,tc,oc(),r)},lc=Ln(),fc=function(t,e){return function(t,e,n){return uc(t,e,sc(t),n)}(lc,t,e)},dc=function(t,e){return function(t,e,n){return cc(t,e,sc(t),n)}(lc,t,e)},hc=z("element","offset"),mc=(z("element","deltaOffset"),z("element","start","finish"),z("begin","end"),z("element","text"),ur([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}])),gc=function(t){return ze(t,"tr")},pc=oi(oi({},mc),{verify:function(t,e,n,r,i,o,a){return ze(r,"td,th",a).bind((function(n){return ze(e,"td,th",a).map((function(e){return te(n,e)?te(r,n)&&un(n)===i?o(e):mc.none("in same cell"):Gn(gc,[n,e]).fold((function(){return function(t,e,n){var r=t.getRect(e),i=t.getRect(n);return i.right>r.left&&i.left<r.right}(t,e,n)?mc.success():o(e)}),(function(t){return o(e)}))}))})).getOr(mc.none("default"))},cata:function(t,e,n,r,i){return t.fold(e,n,r,i)}}),vc=(z("ancestor","descendants","element","index"),z("parent","children","element","index")),bc=function(t,e){return D(t,a(te,e))},yc=function(t){return"br"===tt(t)},wc=function(t,e,n){return e(t,n).bind((function(t){return ot(t)&&0===on(t).trim().length?wc(t,e,n):h.some(t)}))},xc=function(t,e,n,r){return function(t,e){return ce(t,e).filter(yc).orThunk((function(){return ce(t,e-1).filter(yc)}))}(e,n).bind((function(e){return r.traverse(e).fold((function(){return wc(e,r.gather,t).map(r.relative)}),(function(t){return function(t){return ie(t).bind((function(e){var n=ue(e);return bc(n,t).map((function(r){return vc(e,n,t,r)}))}))}(t).map((function(t){return au.on(t.parent(),t.index())}))}))}))},Cc=function(t,e,n,r){return(yc(e)?function(t,e,n){return n.traverse(e).orThunk((function(){return wc(e,n.gather,t)})).map(n.relative)}(t,e,r):xc(t,e,n,r)).map((function(t){return{start:i(t),finish:i(t)}}))},Rc=function(t){return pc.cata(t,(function(t){return h.none()}),(function(){return h.none()}),(function(t){return h.some(hc(t,0))}),(function(t){return h.some(hc(t,un(t)))}))},Sc=Y(["left","top","right","bottom"],[]),_c={nu:Sc,moveUp:function(t,e){return Sc({left:t.left(),top:t.top()-e,right:t.right(),bottom:t.bottom()-e})},moveDown:function(t,e){return Sc({left:t.left(),top:t.top()+e,right:t.right(),bottom:t.bottom()+e})},moveBottomTo:function(t,e){var n=t.bottom()-t.top();return Sc({left:t.left(),top:e-n,right:t.right(),bottom:e})},moveTopTo:function(t,e){var n=t.bottom()-t.top();return Sc({left:t.left(),top:e,right:t.right(),bottom:e+n})},getTop:function(t){return t.top()},getBottom:function(t){return t.bottom()},translate:function(t,e,n){return Sc({left:t.left()+e,top:t.top()+n,right:t.right()+e,bottom:t.bottom()+n})},toString:function(t){return"("+t.left()+", "+t.top()+") -> ("+t.right()+", "+t.bottom()+")"}},kc=function(t){return _c.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},Tc=function(t,e){return h.some(t.getRect(e))},Ec=function(t,e,n){return it(e)?Tc(t,e).map(kc):ot(e)?function(t,e,n){return n>=0&&n<un(e)?t.getRangedRect(e,n,e,n+1):n>0?t.getRangedRect(e,n-1,e,n):h.none()}(t,e,n).map(kc):h.none()},Nc=function(t,e){return it(e)?Tc(t,e).map(kc):ot(e)?t.getRangedRect(e,0,e,un(e)).map(kc):h.none()},Oc=ur([{none:[]},{retry:["caret"]}]),Dc=function(t,e,n){return(r=e,o=da,He((function(t,e){return e(t)}),Be,r,o,a)).fold(i(!1),(function(e){return Nc(t,e).exists((function(t){return function(t,e){return t.left()<e.left()||Math.abs(e.right()-t.left())<1||t.left()>e.right()}(n,t)}))}));var r,o,a},Ac={point:_c.getTop,adjuster:function(t,e,n,r,i){var o=_c.moveUp(i,5);return Math.abs(n.top()-r.top())<1||n.bottom()<i.top()?Oc.retry(o):n.bottom()===i.top()?Oc.retry(_c.moveUp(i,1)):Dc(t,e,i)?Oc.retry(_c.translate(o,5,0)):Oc.none()},move:_c.moveUp,gather:fc},Pc={point:_c.getBottom,adjuster:function(t,e,n,r,i){var o=_c.moveDown(i,5);return Math.abs(n.bottom()-r.bottom())<1||n.top()>i.bottom()?Oc.retry(o):n.top()===i.bottom()?Oc.retry(_c.moveDown(i,1)):Dc(t,e,i)?Oc.retry(_c.translate(o,5,0)):Oc.none()},move:_c.moveDown,gather:dc},Mc=function(t,e,n,r,i){return 0===i?h.some(r):function(t,e,n){return t.elementFromPoint(e,n).filter((function(t){return"table"===tt(t)})).isSome()}(t,r.left(),e.point(r))?function(t,e,n,r,i){return Mc(t,e,n,e.move(r,5),i)}(t,e,n,r,i-1):t.situsFromPoint(r.left(),e.point(r)).bind((function(o){return o.start().fold(h.none,(function(o){return Nc(t,o).bind((function(a){return e.adjuster(t,o,a,n,r).fold(h.none,(function(r){return Mc(t,e,n,r,i-1)}))})).orThunk((function(){return h.some(r)}))}),h.none)}))},Hc=function(t,e,n){var r=t.move(n,5),i=Mc(e,t,n,r,100).getOr(r);return function(t,e,n){return t.point(e)>n.getInnerHeight()?h.some(t.point(e)-n.getInnerHeight()):t.point(e)<0?h.some(-t.point(e)):h.none()}(t,i,e).fold((function(){return e.situsFromPoint(i.left(),t.point(i))}),(function(n){return e.scrollBy(0,n),e.situsFromPoint(i.left(),t.point(i)-n)}))},Bc={tryUp:a(Hc,Ac),tryDown:a(Hc,Pc),ieTryUp:function(t,e){return t.situsFromPoint(e.left(),e.top()-5)},ieTryDown:function(t,e){return t.situsFromPoint(e.left(),e.bottom()+5)},getJumpSize:i(5)},Ic=Gt.detect(),Wc=function(t,e,n,r,i,o){return 0===o?h.none():Fc(t,e,n,r,i).bind((function(a){var s=t.fromSitus(a),u=pc.verify(t,n,r,s.finish(),s.foffset(),i.failure,e);return pc.cata(u,(function(){return h.none()}),(function(){return h.some(a)}),(function(a){return te(n,a)&&0===r?Lc(t,n,r,_c.moveUp,i):Wc(t,e,a,0,i,o-1)}),(function(a){return te(n,a)&&r===un(a)?Lc(t,n,r,_c.moveDown,i):Wc(t,e,a,un(a),i,o-1)}))}))},Lc=function(t,e,n,r,i){return Ec(t,e,n).bind((function(e){return zc(t,i,r(e,Bc.getJumpSize()))}))},zc=function(t,e,n){return Ic.browser.isChrome()||Ic.browser.isSafari()||Ic.browser.isFirefox()||Ic.browser.isEdge()?e.otherRetry(t,n):Ic.browser.isIE()?e.ieRetry(t,n):h.none()},Fc=function(t,e,n,r,i){return Ec(t,n,r).bind((function(e){return zc(t,i,e)}))},Uc=function(t,e,n){return function(t,e,n){return t.getSelection().bind((function(r){return Cc(e,r.finish(),r.foffset(),n).fold((function(){return h.some(hc(r.finish(),r.foffset()))}),(function(i){var o=t.fromSitus(i),a=pc.verify(t,r.finish(),r.foffset(),o.finish(),o.foffset(),n.failure,e);return Rc(a)}))}))}(t,e,n).bind((function(r){return Wc(t,e,r.element(),r.offset(),n,20).map(t.fromSitus)}))},jc=Gt.detect(),qc=function(t,e){return Be(t,(function(t){return ie(t).exists((function(t){return te(t,e)}))}),n).isSome();var n},Vc=function(t,e,n,r,o){return ze(r,"td,th",e).bind((function(r){return ze(r,"table",e).bind((function(a){return qc(o,a)?Uc(t,e,n).bind((function(t){return ze(t.finish(),"td,th",e).map((function(e){return{start:i(r),finish:i(e),range:i(t)}}))})):h.none()}))}))},Yc=function(t,e,n,r,i,o){return jc.browser.isIE()?h.none():o(r,e).orThunk((function(){return Vc(t,e,n,r,i).map((function(t){var e=t.range();return $u.create(h.some(Gu.makeSitus(e.start(),e.soffset(),e.finish(),e.foffset())),!0)}))}))},$c=function(t,e,n,r,i,o,a){return Vc(t,n,r,i,o).bind((function(t){return Ku.detect(e,n,t.start(),t.finish(),a)}))},Xc=function(t,e){return ze(t,"tr",e).bind((function(t){return ze(t,"table",e).bind((function(n){var r=Me(n,"tr");return te(t,r[0])?function(t,e,n){return uc(lc,t,e,n)}(n,(function(t){return dn(t).isSome()}),e).map((function(t){var e=un(t);return $u.create(h.some(Gu.makeSitus(t,e,t,e)),!0)})):h.none()}))}))},Gc=function(t,e){return ze(t,"tr",e).bind((function(t){return ze(t,"table",e).bind((function(n){var r=Me(n,"tr");return te(t,r[r.length-1])?function(t,e,n){return cc(lc,t,e,n)}(n,(function(t){return fn(t).isSome()}),e).map((function(t){return $u.create(h.some(Gu.makeSitus(t,0,t,0)),!0)})):h.none()}))}))},Jc=function(t,e){return ze(t,"td,th",e)},Kc={down:{traverse:se,gather:dc,relative:au.before,otherRetry:Bc.tryDown,ieRetry:Bc.ieTryDown,failure:pc.failedDown},up:{traverse:ae,gather:fc,relative:au.before,otherRetry:Bc.tryUp,ieRetry:Bc.ieTryUp,failure:pc.failedUp}},Qc=function(t){return function(e){return e===t}},Zc=Qc(38),tl=Qc(40),el={ltr:{isBackward:Qc(37),isForward:Qc(39)},rtl:{isBackward:Qc(39),isForward:Qc(37)},isUp:Zc,isDown:tl,isNavigation:function(t){return t>=37&&t<=40}},nl=function(t){return{left:t.left(),top:t.top(),right:t.right(),bottom:t.bottom(),width:t.width(),height:t.height()}},rl=(Gt.detect().browser.isSafari(),function(e){return{elementFromPoint:function(t,n){return vt.fromPoint(vt.fromDom(e.document),t,n)},getRect:function(t){return t.dom().getBoundingClientRect()},getRangedRect:function(t,n,r,i){var o=uu.exact(t,n,r,i);return Iu(e,o).map(nl)},getSelection:function(){return Bu(e).map((function(t){return Gu.convertToRange(e,t)}))},fromSitus:function(t){var n=uu.relative(t.start(),t.finish());return Gu.convertToRange(e,n)},situsFromPoint:function(t,n){return Wu(e,t,n).map((function(t){return Xu(t.start(),t.soffset(),t.finish(),t.foffset())}))},clearSelection:function(){!function(t){t.getSelection().removeAllRanges()}(e)},setSelection:function(t){!function(t,e,n,r,i){var o=Eu(e,n,r,i);Au(t,o)}(e,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,n){!function(t,e,n){var r=Tu(e,n);Au(t,r)}(e,t,n)},selectContents:function(t){Hu(e,t)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){var n,r,i,o;return(n=vt.fromDom(e.document),r=void 0!==n?n.dom():t.document,i=r.body.scrollLeft||r.documentElement.scrollLeft,o=r.body.scrollTop||r.documentElement.scrollTop,Fr(i,o)).top()},scrollBy:function(n,r){!function(e,n,r){(void 0!==r?r.dom():t.document).defaultView.scrollBy(e,n)}(n,r,vt.fromDom(e.document))}}}),il=z("rows","cols"),ol=function(t,e,n,r){var i=function(t,e,n,r){var i=h.none(),o=function(){i=h.none()};return{mousedown:function(t){r.clear(e),i=Jc(t.target(),n)},mouseover:function(o){i.each((function(i){r.clear(e),Jc(o.target(),n).each((function(o){tr(i,o,n).each((function(n){var a=n.boxes().getOr([]);(a.length>1||1===a.length&&!te(i,o))&&(r.selectRange(e,a,n.start(),n.finish()),t.selectContents(o))}))}))}))},mouseup:function(t){i.each(o)}}}(rl(t),e,n,r);return{mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},al=function(t,e,n,r){var i=rl(t),o=function(){return r.clear(e),h.none()};return{keydown:function(t,s,u,c,l,f){var d=t.raw(),m=d.which,g=!0===d.shiftKey;return er(e,r.selectedSelector()).fold((function(){return el.isDown(m)&&g?a($c,i,e,n,Kc.down,c,s,r.selectRange):el.isUp(m)&&g?a($c,i,e,n,Kc.up,c,s,r.selectRange):el.isDown(m)?a(Yc,i,n,Kc.down,c,s,Gc):el.isUp(m)?a(Yc,i,n,Kc.up,c,s,Xc):h.none}),(function(t){var n=function(n){return function(){return si(n,(function(n){return Ku.update(n.rows(),n.cols(),e,t,r)})).fold((function(){return rr(e,r.firstSelectedSelector(),r.lastSelectedSelector()).map((function(t){var n=el.isDown(m)||f.isForward(m)?au.after:au.before;return i.setRelativeSelection(au.on(t.first(),0),n(t.table())),r.clear(e),$u.create(h.none(),!0)}))}),(function(t){return h.some($u.create(h.none(),!0))}))}};return el.isDown(m)&&g?n([il(1,0)]):el.isUp(m)&&g?n([il(-1,0)]):f.isBackward(m)&&g?n([il(0,-1),il(-1,0)]):f.isForward(m)&&g?n([il(0,1),il(1,0)]):el.isNavigation(m)&&!1===g?o:h.none}))()},keyup:function(t,i,o,a,s){return er(e,r.selectedSelector()).fold((function(){var u=t.raw(),c=u.which;return!1==(!0===u.shiftKey)?h.none():el.isNavigation(c)?Ku.sync(e,n,i,o,a,s,r.selectRange):h.none()}),h.none)}}},sl=function(t){var e=function(e){ft(e,t.selected()),ft(e,t.firstSelected()),ft(e,t.lastSelected())},n=function(e){st(e,t.selected(),"1")},r=function(n){var r=Me(n,t.selectedSelector());k(r,e)};return{clear:r,selectRange:function(e,i,o,a){r(e),k(i,n),st(o,t.firstSelected(),"1"),st(a,t.lastSelected(),"1")},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},ul=function(t){return!1===gi(vt.fromDom(t.target),"ephox-snooker-resizer-bar")};function cl(t,e){var o=Y(["mousedown","mouseover","mouseup","keyup","keydown"],[]),a=h.none(),s=sl(sr);return t.on("init",(function(u){var c=t.getWin(),l=ka(t),f=Na(t),d=ol(c,l,f,s),m=al(c,l,f,s),g=function(e,n){(function(t){return!0===t.raw().shiftKey})(e)&&(n.kill()&&e.kill(),n.selection().each((function(e){var n=uu.relative(e.start(),e.finish()),r=pu(c,n);t.selection.setRng(r)})))},p=function(e){var n=y(e);if(n.raw().shiftKey&&el.isNavigation(n.raw().which)){var r=t.selection.getRng(),i=vt.fromDom(r.startContainer),o=vt.fromDom(r.endContainer);m.keyup(n,i,r.startOffset,o,r.endOffset).each((function(t){g(n,t)}))}},v=function(n){var r=y(n);e().each((function(t){t.hideBars()}));var i=t.selection.getRng(),o=vt.fromDom(t.selection.getStart()),a=vt.fromDom(i.startContainer),s=vt.fromDom(i.endContainer),u=Ma(o).isRtl()?el.rtl:el.ltr;m.keydown(r,a,i.startOffset,s,i.endOffset,u).each((function(t){g(r,t)})),e().each((function(t){t.showBars()}))},b=function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")},y=function(t){var e=vt.fromDom(t.target),n=function(){t.stopPropagation()},o=function(){t.preventDefault()},a=r(o,n);return{target:i(e),x:i(b(t)?t.x:null),y:i(b(t)?t.y:null),stop:n,prevent:o,kill:a,raw:i(t)}},w=function(t){return 0===t.button},x=function(t){w(t)&&ul(t)&&d.mousedown(y(t))},C=function(t){var e;(void 0===(e=t).buttons||ms.ie&&ms.ie>=12&&0===e.buttons||0!=(1&e.buttons))&&ul(t)&&d.mouseover(y(t))},R=function(t){w(t)&&ul(t)&&d.mouseup(y(t))};t.on("mousedown",x),t.on("mouseover",C),t.on("mouseup",R),t.on("keyup",p),t.on("keydown",v),t.on("nodechange",(function(){var e=t.selection,r=vt.fromDom(e.getStart()),i=vt.fromDom(e.getEnd());Gn($e,[r,i]).fold((function(){s.clear(l)}),n)})),a=h.some(o({mousedown:x,mouseover:C,mouseup:R,keyup:p,keydown:v}))})),{clear:s.clear,destroy:function(){a.each((function(t){}))}}}var ll=es.each,fl=function(t){var e=[];function n(e){return function(){t.execCommand(e)}}ll("inserttable tableprops deletetable | cell row column".split(" "),(function(n){"|"===n?e.push({text:"-"}):e.push(t.menuItems[n])})),t.addButton("table",{type:"menubutton",title:"Table",menu:e}),t.addButton("tableprops",{title:"Table properties",onclick:n("mceTableProps"),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})},dl=function(t){var e=function(t){var e=t.getParam("table_toolbar",Ha);return""===e||!1===e?[]:g(e)?e.split(/[ ,]/):p(e)?e:[]}(t);e.length>0&&t.addContextToolbar((function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)}),e.join(" "))},hl=function(t,e){var n=h.none(),r=[],i=[],o=[],a=[],s=function(t){t.disabled(!0)},u=function(t){t.disabled(!1)},c=function(){var t=this;r.push(t),n.fold((function(){s(t)}),(function(e){u(t)}))},l=function(){var t=this;i.push(t),n.fold((function(){s(t)}),(function(e){u(t)}))};t.on("init",(function(){t.on("nodechange",(function(c){var l=h.from(t.dom.getParent(t.selection.getStart(),"th,td"));(n=l.bind((function(t){var n=vt.fromDom(t);return $e(n).map((function(t){return vr.forMenu(e,t,n)}))}))).fold((function(){k(r,s),k(i,s),k(o,s),k(a,s)}),(function(t){k(r,u),k(i,u),k(o,(function(e){e.disabled(t.mergable().isNone())})),k(a,(function(e){e.disabled(t.unmergable().isNone())}))}))}))}));var f=function(t,e,n,r){var i,o,a,s,u,c=r.getEl().getElementsByTagName("table")[0],l=r.isRtl()||"tl-tr"===r.parent().rel;for(c.nextSibling.innerHTML=e+1+" x "+(n+1),l&&(e=9-e),o=0;o<10;o++)for(i=0;i<10;i++)s=c.rows[o].childNodes[i].firstChild,u=(l?i>=e:i<=e)&&o<=n,t.dom.toggleClass(s,"mce-active",u),u&&(a=s);return a.parentNode},d=!1===function(t){return t.getParam("table_grid",!0,"boolean")}(t)?{text:"Table",icon:"table",context:"table",onclick:m("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),t.execCommand("mceInsertTable"))},onshow:function(){f(t,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");t.dom.removeClass(e,"mce-active"),t.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){var t="";t='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var e=0;e<10;e++){t+="<tr>";for(var n=0;n<10;n++)t+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+e+'"></a></td>';t+="</tr>"}return t+="</table>",t+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var n,r,i=e.target;"A"===i.tagName.toUpperCase()&&(n=parseInt(i.getAttribute("data-mce-x"),10),r=parseInt(i.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(f(t,n,r,e.control),this.lastX=n,this.lastY=r))},onclick:function(e){var n=this;"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),n.parent().cancel(),t.undoManager.transact((function(){bs(t,n.lastX+1,n.lastY+1)})),t.addVisual())}}]};function m(e){return function(){t.execCommand(e)}}var g={text:"Table properties",context:"table",onPostRender:c,onclick:m("mceTableProps")},p={text:"Delete table",context:"table",onPostRender:c,cmd:"mceTableDelete"},v={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:m("mceTableInsertRowBefore"),onPostRender:l},{text:"Insert row after",onclick:m("mceTableInsertRowAfter"),onPostRender:l},{text:"Delete row",onclick:m("mceTableDeleteRow"),onPostRender:l},{text:"Row properties",onclick:m("mceTableRowProps"),onPostRender:l},{text:"-"},{text:"Cut row",onclick:m("mceTableCutRow"),onPostRender:l},{text:"Copy row",onclick:m("mceTableCopyRow"),onPostRender:l},{text:"Paste row before",onclick:m("mceTablePasteRowBefore"),onPostRender:l},{text:"Paste row after",onclick:m("mceTablePasteRowAfter"),onPostRender:l}]},b={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:m("mceTableInsertColBefore"),onPostRender:l},{text:"Insert column after",onclick:m("mceTableInsertColAfter"),onPostRender:l},{text:"Delete column",onclick:m("mceTableDeleteCol"),onPostRender:l}]},y={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:m("mceTableCellProps"),onPostRender:l},{text:"Merge cells",onclick:m("mceTableMergeCells"),onPostRender:function(){var t=this;o.push(t),n.fold((function(){s(t)}),(function(e){t.disabled(e.mergable().isNone())}))}},{text:"Split cell",onclick:m("mceTableSplitCells"),onPostRender:function(){var t=this;a.push(t),n.fold((function(){s(t)}),(function(e){t.disabled(e.unmergable().isNone())}))}}]};t.addMenuItem("inserttable",d),t.addMenuItem("tableprops",g),t.addMenuItem("deletetable",p),t.addMenuItem("row",v),t.addMenuItem("column",b),t.addMenuItem("cell",y)},ml=function(t,e){return{insertTable:function(e,n){return bs(t,e,n)},setClipboardRows:function(t){return function(t,e){var n=_(t,vt.fromDom);e.set(h.from(n))}(t,e)},getClipboardRows:function(){return function(t){return t.get().fold((function(){}),(function(t){return _(t,(function(t){return t.dom()}))}))}(e)}}};e.add("table",(function(t){var e=Qs(t),n=cl(t,e.lazyResize),r=Za(t,e.lazyWire),i=function(t){return{get:function(){var e=ka(t);return ir(e,sr.selectedSelector()).fold((function(){return void 0===t.selection.getStart()?lr.none():lr.single(t.selection)}),(function(t){return lr.multiple(t)}))}}}(t),o=Jo(h.none());return Ss(t,r,n,i,o),br(t,i,r,n),hl(t,i),fl(t),dl(t),t.on("PreInit",(function(){t.serializer.addTempAttr(sr.firstSelected()),t.serializer.addTempAttr(sr.lastSelected())})),function(t){return t.getParam("table_tab_navigation",!0,"boolean")}(t)&&t.on("keydown",(function(n){Yu(n,t,r,e.lazyWire)})),t.on("remove",(function(){e.destroy(),n.destroy()})),ml(t,o)}))}(window)}).call(window)},"vn/0":function(t,e){(function(){!function(t){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),r=function(t){return t.target_list},i=function(t){return t.rel_list},o=function(t){return t.link_class_list},a=function(t){return"boolean"==typeof t.link_assume_external_targets&&t.link_assume_external_targets},s=function(t){return"boolean"==typeof t.link_context_toolbar&&t.link_context_toolbar},u=function(t){return t.link_list},c=function(t){return"string"==typeof t.default_link_target},l=function(t){return t.default_link_target},f=r,d=function(t,e){t.settings.target_list=e},h=function(t){return!1!==r(t)},m=i,g=function(t){return void 0!==i(t)},p=o,v=function(t){return void 0!==o(t)},b=function(t){return!1!==t.link_title},y=function(t){return"boolean"==typeof t.allow_unsafe_link_target&&t.allow_unsafe_link_target},w=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),x=tinymce.util.Tools.resolve("tinymce.Env"),C=function(e){if(!x.ie||x.ie>10){var n=t.document.createElement("a");n.target="_blank",n.href=e,n.rel="noreferrer noopener";var r=t.document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,t.window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(e,n){t.document.body.appendChild(e),e.dispatchEvent(n),t.document.body.removeChild(e)}(n,r)}else{var i=t.window.open("","_blank");if(i){i.opener=null;var o=i.document;o.open(),o.write('<meta http-equiv="refresh" content="0; url='+w.DOM.encode(e)+'">'),o.close()}}},R=tinymce.util.Tools.resolve("tinymce.util.Tools"),S=function(t,e){var n=["noopener"],r=t?t.split(/\s+/):[],i=function(t){return t.filter((function(t){return-1===R.inArray(n,t)}))};return(r=e?function(t){return(t=i(t)).length?t.concat(n):n}(r):i(r)).length?function(t){return R.trim(t.sort().join(" "))}(r):null},_=function(t,e){return e=e||t.selection.getNode(),T(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")},k=function(t){return t&&"A"===t.nodeName&&t.href},T=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},E=function(t,e){var n,r;(r=t.dom.select("img",e)[0])&&(n=t.dom.getParents(r,"a[href]",e)[0])&&(n.parentNode.insertBefore(r,n),t.dom.remove(n))},N=function(t,e,n){var r,i;(i=t.dom.select("img",e)[0])&&(r=t.dom.create("a",n),i.parentNode.insertBefore(r,i),r.appendChild(i))},O=function(t,e){return function(n){t.undoManager.transact((function(){var r=t.selection.getNode(),i=_(t,r),o={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};g(t.settings)||!1!==y(t.settings)||(o.rel=S(o.rel,"_blank"===o.target)),n.href===e.href&&(e.attach(),e={}),i?(t.focus(),n.hasOwnProperty("text")&&("innerText"in i?i.innerText=n.text:i.textContent=n.text),t.dom.setAttribs(i,o),t.selection.select(i),t.undoManager.add()):T(r)?N(t,r,o):n.hasOwnProperty("text")?t.insertContent(t.dom.createHTML("a",o,t.dom.encode(n.text))):t.execCommand("mceInsertLink",!1,o)}))}},D=function(t){return function(){t.undoManager.transact((function(){var e=t.selection.getNode();T(e)?E(t,e):t.execCommand("unlink")}))}},A=k,P=function(t){return R.grep(t,k).length>0},M=function(t){return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1===t.indexOf("href=")))},H=_,B=function(t,e){return function(t){return t.replace(/\uFEFF/g,"")}(e?e.innerText||e.textContent:t.getContent({format:"text"}))},I=S,W=tinymce.util.Tools.resolve("tinymce.util.Delay"),L=tinymce.util.Tools.resolve("tinymce.util.XHR"),z={},F=function(t,e,n){var r=function(t,n){return n=n||[],R.each(t,(function(t){var i={text:t.text||t.title};t.menu?i.menu=r(t.menu):(i.value=t.value,e&&e(i)),n.push(i)})),n};return r(t,n||[])},U=function(t,e,n){var r=t.selection.getRng();W.setEditorTimeout(t,(function(){t.windowManager.confirm(e,(function(e){t.selection.setRng(r),n(e)}))}))},j=function(t,e){var n,r,i,o,s,u,w,x,C,S,_,k={},T=t.selection,E=t.dom,N=function(t){var e=i.find("#text");(!e.value()||t.lastControl&&e.value()===t.lastControl.text())&&e.value(t.control.text()),i.find("#href").value(t.control.value())},A=function(){r||!o||k.text||this.parent().parent().find("#text")[0].value(this.value())};o=M(T.getContent()),n=H(t),k.text=r=B(t.selection,n),k.href=n?E.getAttrib(n,"href"):"",n?k.target=E.getAttrib(n,"target"):c(t.settings)&&(k.target=l(t.settings)),(_=E.getAttrib(n,"rel"))&&(k.rel=_),(_=E.getAttrib(n,"class"))&&(k.class=_),(_=E.getAttrib(n,"title"))&&(k.title=_),o&&(s={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){k.text=this.value()}}),e&&(u={type:"listbox",label:"Link list",values:F(e,(function(e){e.value=t.convertURL(e.value||e.url,"href")}),[{text:"None",value:""}]),onselect:N,value:t.convertURL(k.href,"href"),onPostRender:function(){u=this}}),h(t.settings)&&(void 0===f(t.settings)&&d(t,[{text:"None",value:""},{text:"New window",value:"_blank"}]),x={name:"target",type:"listbox",label:"Target",values:F(f(t.settings))}),g(t.settings)&&(w={name:"rel",type:"listbox",label:"Rel",values:F(m(t.settings),(function(e){!1===y(t.settings)&&(e.value=I(e.value,"_blank"===k.target))}))}),v(t.settings)&&(C={name:"class",type:"listbox",label:"Class",values:F(p(t.settings),(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"a",classes:[e.value]})})}))}),b(t.settings)&&(S={name:"title",type:"textbox",label:"Title",value:k.title}),i=t.windowManager.open({title:"Insert link",data:k,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(e){var n=e.meta||{};u&&u.value(t.convertURL(this.value(),"href")),R.each(e.meta,(function(t,e){var n=i.find("#"+e);"text"===e?0===r.length&&(n.value(t),k.text=t):n.value(t)})),n.attach&&(z={href:this.value(),attach:n.attach}),n.text||A.call(this)},onkeyup:A,onpaste:A,onbeforecall:function(t){t.meta=i.toJSON()}},s,S,function(e){var n=[];if(R.each(t.dom.select("a:not([href])"),(function(t){var r=t.name||t.id;r&&n.push({text:r,value:"#"+r,selected:-1!==e.indexOf("#"+r)})})),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:N}}(k.href),u,w,x,C],onSubmit:function(e){var n=a(t.settings),i=O(t,z),s=D(t),u=R.extend({},k,e.data),c=u.href;c?(o&&u.text!==r||delete u.text,c.indexOf("@")>0&&-1===c.indexOf("//")&&-1===c.indexOf("mailto:")?U(t,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",(function(t){t&&(u.href="mailto:"+c),i(u)})):!0===n&&!/^\w+:/i.test(c)||!1===n&&/^\s*www[\.|\d\.]/i.test(c)?U(t,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",(function(t){t&&(u.href="http://"+c),i(u)})):i(u)):s()}})},q=function(t){!function(t,e){var n=u(t.settings);"string"==typeof n?L.send({url:n,success:function(n){e(t,JSON.parse(n))}}):"function"==typeof n?n((function(n){e(t,n)})):e(t,n)}(t,j)},V=function(t,e){return t.dom.getParent(e,"a[href]")},Y=function(t){return V(t,t.selection.getStart())},$=function(t,e){if(e){var n=function(t){var e=t.getAttribute("data-mce-href");return e||t.getAttribute("href")}(e);if(/^#/.test(n)){var r=t.$(n);r.length&&t.selection.scrollIntoView(r[0],!0)}else C(e.href)}},X=function(t){return function(){q(t)}},G=function(t){return function(){$(t,Y(t))}},J=function(t){return function(e){var n,r,i;return!!(s(t.settings)&&!function(t){var e=t.plugins.contextmenu;return!!e&&e.isContextMenuVisible()}(t)&&A(e)&&3===(i=(r=(n=t.selection).getRng()).startContainer).nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<i.data.length)}},K=function(t){t.on("click",(function(e){var r=V(t,e.target);r&&n.metaKeyPressed(e)&&(e.preventDefault(),$(t,r))})),t.on("keydown",(function(e){var n=Y(t);n&&13===e.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(e)&&(e.preventDefault(),$(t,n))}))},Q=function(t){return function(){var e=this;t.on("nodechange",(function(n){e.active(!t.readonly&&!!H(t,n.element))}))}},Z=function(t){return function(){var e=this,n=function(t){P(t.parents)?e.show():e.hide()};P(t.dom.getParents(t.selection.getStart()))||e.hide(),t.on("nodechange",n),e.on("remove",(function(){t.off("nodechange",n)}))}},tt=function(t){t.addCommand("mceLink",X(t))},et=function(t){t.addShortcut("Meta+K","",X(t))},nt=function(t){t.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:X(t),onpostrender:Q(t)}),t.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:D(t),onpostrender:Q(t)}),t.addContextToolbar&&t.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:G(t)})},rt=function(t){t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:G(t),onPostRender:Z(t),prependToContext:!0}),t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:X(t),stateSelector:"a[href]",context:"insert",prependToContext:!0}),t.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:D(t),stateSelector:"a[href]"})},it=function(t){t.addContextToolbar&&t.addContextToolbar(J(t),"openlink | link unlink")};e.add("link",(function(t){nt(t),rt(t),it(t),K(t),tt(t),et(t)}))}(window)}).call(window)}}]);