webpackJsonp([3],{"+uI+":function(t,e){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t,e){return t.fire("insertCustomChar",{chr:e})},n=function(t,n){var r=e(t,n).chr;t.execCommand("mceInsertContent",!1,r)},r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(t){return t.settings.charmap},i=function(t){return t.settings.charmap_append},a=r.isArray,s=function(t){return a(t)?[].concat((e=t,r.grep(e,function(t){return a(t)&&2===t.length}))):"function"==typeof t?t():[];var e},u=function(t){return function(t,e){var n=o(t);n&&(e=s(n));var r=i(t);return r?[].concat(e).concat(s(r)):e}(t,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},c=function(t){return{getCharMap:function(){return u(t)},insertChar:function(e){n(t,e)}}},l=function(t){var e,n,r,o=Math.min(t.length,25),i=Math.ceil(t.length/o);for(e='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<i;r++){for(e+="<tr>",n=0;n<o;n++){var a=r*o+n;if(a<t.length){var s=t[a],u=parseInt(s[0],10),c=s?String.fromCharCode(u):"&nbsp;";e+='<td title="'+s[1]+'"><div tabindex="-1" title="'+s[1]+'" role="button" data-chr="'+u+'">'+c+"</div></td>"}else e+="<td />"}e+="</tr>"}return e+="</tbody></table>"},f=function(t){for(;t;){if("TD"===t.nodeName)return t;t=t.parentNode}},d=function(t){var e,r={type:"container",html:l(u(t)),onclick:function(r){var o=r.target;if(/^(TD|DIV)$/.test(o.nodeName)){var i=f(o).firstChild;if(i&&i.hasAttribute("data-chr")){var a=i.getAttribute("data-chr"),s=parseInt(a,10);isNaN(s)||n(t,String.fromCharCode(s)),r.ctrlKey||e.close()}}},onmouseover:function(t){var n=f(t.target);n&&n.firstChild?(e.find("#preview").text(n.firstChild.firstChild.data),e.find("#previewTitle").text(n.title)):(e.find("#preview").text(" "),e.find("#previewTitle").text(" "))}};e=t.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){e.close()}}]})},h=function(t){t.addCommand("mceShowCharmap",function(){d(t)})},m=function(t){t.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),t.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})};t.add("charmap",function(t){return h(t),m(t),c(t)})}()},BzBW:function(t,e){!function(){"use strict";var t,e,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(t){return function(){return t}},o={noop:function(){},noarg:function(t){return function(){return t()}},compose:function(t,e){return function(){return t(e.apply(null,arguments))}},constant:r,identity:function(t){return t},tripleEquals:function(t,e){return t===e},curry:function(t){for(var e=new Array(arguments.length-1),n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];var o=e.concat(n);return t.apply(null,o)}},not:function(t){return function(){return!t.apply(null,arguments)}},die:function(t){return function(){throw new Error(t)}},apply:function(t){return t()},call:function(t){t()},never:r(!1),always:r(!0)},i=o.never,a=o.always,s=function(){return u},u=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:i,isSome:i,isNone:a,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},or:n,orThunk:e,map:s,ap:s,each:function(){},bind:s,flatten:s,exists:i,forall:a,filter:s,equals:t,equals_:t,toArray:function(){return[]},toString:o.constant("none()")};return Object.freeze&&Object.freeze(r),r}(),c=function(t){var e=function(){return t},n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:a,isNone:i,getOr:e,getOrThunk:e,getOrDie:e,or:n,orThunk:n,map:function(e){return c(e(t))},ap:function(e){return e.fold(s,function(e){return c(e(t))})},each:function(e){e(t)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(t)?o:u},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(i,function(e){return n(t,e)})},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},l={some:c,none:s,from:function(t){return null===t||void 0===t?u:c(t)}},f=void 0===(t=Array.prototype.indexOf)?function(t,e){return b(t,e)}:function(e,n){return t.call(e,n)},d=function(t,e){return f(t,e)>-1},h=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o,t)}return r},m=function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n,t)},g=function(t,e){for(var n=t.length-1;n>=0;n--)e(t[n],n,t)},p=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r,t)&&n.push(i)}return n},v=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n,t))return l.some(n);return l.none()},b=function(t,e){for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return n;return-1},y=Array.prototype.push,w=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!Array.prototype.isPrototypeOf(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);y.apply(e,t[n])}return e},x=function(t,e){for(var n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n,t))return!1;return!0},C=Array.prototype.slice,R={map:h,each:m,eachr:g,partition:function(t,e){for(var n=[],r=[],o=0,i=t.length;o<i;o++){var a=t[o];(e(a,o,t)?n:r).push(a)}return{pass:n,fail:r}},filter:p,groupBy:function(t,e){if(0===t.length)return[];for(var n=e(t[0]),r=[],o=[],i=0,a=t.length;i<a;i++){var s=t[i],u=e(s);u!==n&&(r.push(o),o=[]),n=u,o.push(s)}return 0!==o.length&&r.push(o),r},indexOf:function(t,e){var n=f(t,e);return-1===n?l.none():l.some(n)},foldr:function(t,e,n){return g(t,function(t){n=e(n,t)}),n},foldl:function(t,e,n){return m(t,function(t){n=e(n,t)}),n},find:function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n,t))return l.some(o)}return l.none()},findIndex:v,flatten:w,bind:function(t,e){var n=h(t,e);return w(n)},forall:x,exists:function(t,e){return v(t,e).isSome()},contains:d,equal:function(t,e){return t.length===e.length&&x(t,function(t,n){return t===e[n]})},reverse:function(t){var e=C.call(t,0);return e.reverse(),e},chunk:function(t,e){for(var n=[],r=0;r<t.length;r+=e){var o=t.slice(r,r+e);n.push(o)}return n},difference:function(t,e){return p(t,function(t){return!d(e,t)})},mapToObject:function(t,e){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];n[String(i)]=e(i,r)}return n},pure:function(t){return[t]},sort:function(t,e){var n=C.call(t,0);return n.sort(e),n},range:function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},head:function(t){return 0===t.length?l.none():l.some(t[0])},last:function(t){return 0===t.length?l.none():l.some(t[t.length-1])}},S=void 0===(e=Object.keys)?function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}:e,k=function(t,e){for(var n=S(t),r=0,o=n.length;r<o;r++){var i=n[r];e(t[i],i,t)}},_=function(t,e){var n={};return k(t,function(r,o){var i=e(r,o,t);n[i.k]=i.v}),n},T=function(t,e){var n=[];return k(t,function(t,r){n.push(e(t,r))}),n},E=function(t){return T(t,function(t){return t})},N={bifilter:function(t,e){var n={},r={};return k(t,function(t,o){(e(t,o)?n:r)[o]=t}),{t:n,f:r}},each:k,map:function(t,e){return _(t,function(t,n,r){return{k:n,v:e(t,n,r)}})},mapToArray:T,tupleMap:_,find:function(t,e){for(var n=S(t),r=0,o=n.length;r<o;r++){var i=n[r],a=t[i];if(e(a,i,t))return l.some(a)}return l.none()},keys:S,values:E,size:function(t){return E(t).length}},D=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&Array.prototype.isPrototypeOf(t)?"array":"object"===e&&String.prototype.isPrototypeOf(t)?"string":e}(e)===t}},A={isString:D("string"),isObject:D("object"),isArray:D("array"),isNull:D("null"),isBoolean:D("boolean"),isUndefined:D("undefined"),isFunction:D("function"),isNumber:D("number")},P=function(t){return t.slice(0).sort()},O={sort:P,reqMessage:function(t,e){throw new Error("All required keys ("+P(t).join(", ")+") were not specified. Specified keys were: "+P(e).join(", ")+".")},unsuppMessage:function(t){throw new Error("Unsupported keys for object: "+P(t).join(", "))},validateStrArr:function(t,e){if(!A.isArray(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");R.each(e,function(e){if(!A.isString(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},invalidTypeMessage:function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+P(t).join(", ")+") were not.")},checkDupes:function(t){var e=P(t);R.find(e,function(t,n){return n<e.length-1&&t===e[n+1]}).each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")})}},M={immutable:function(){var t=arguments;return function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return R.each(t,function(t,n){r[t]=o.constant(e[n])}),r}},immutableBag:function(t,e){var n=t.concat(e);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return O.validateStrArr("required",t),O.validateStrArr("optional",e),O.checkDupes(n),function(r){var i=N.keys(r);R.forall(t,function(t){return R.contains(i,t)})||O.reqMessage(t,i);var a=R.filter(i,function(t){return!R.contains(n,t)});a.length>0&&O.unsuppMessage(a);var s={};return R.each(t,function(t){s[t]=o.constant(r[t])}),R.each(e,function(t){s[t]=o.constant(Object.prototype.hasOwnProperty.call(r,t)?l.some(r[t]):l.none())}),s}}},B=M.immutable("width","height"),H=M.immutable("rows","columns"),W=M.immutable("row","column"),I=M.immutable("x","y"),L=M.immutable("element","rowspan","colspan"),z=M.immutable("element","rowspan","colspan","isNew"),F={dimensions:B,grid:H,address:W,coords:I,extended:M.immutable("element","rowspan","colspan","row","column"),detail:L,detailnew:z,rowdata:M.immutable("element","cells","section"),elementnew:M.immutable("element","isNew"),rowdatanew:M.immutable("element","cells","section","isNew"),rowcells:M.immutable("cells","section"),rowdetails:M.immutable("details","section"),bounds:M.immutable("startRow","startCol","finishRow","finishCol")},q=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:o.constant(t)}},j={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),"HTML must have a single root node";return q(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return q(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return q(n)},fromDom:q,fromPoint:function(t,e,n){return l.from(t.dom().elementFromPoint(e,n)).map(q)}},U=8,V=9,$=1,Y=3,X=$,K=V,J=function(t){return t.nodeType!==X&&t.nodeType!==K||0===t.childElementCount},G={all:function(t,e){var n=void 0===e?document:e.dom();return J(n)?[]:R.map(n.querySelectorAll(t),j.fromDom)},is:function(t,e){var n=t.dom();if(n.nodeType!==X)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},one:function(t,e){var n=void 0===e?document:e.dom();return J(n)?l.none():l.from(n.querySelector(t)).map(j.fromDom)}},Z=function(t,e){var n=[],r=function(t){return n.push(t),e(t)},o=e(t);do{o=o.bind(r)}while(o.isSome());return n},Q="undefined"!=typeof window?window:Function("return this;")(),tt=function(t,e){for(var n=void 0!==e&&null!==e?e:Q,r=0;r<t.length&&void 0!==n&&null!==n;++r)n=n[t[r]];return n},et=function(t,e){var n=t.split(".");return tt(n,e)},nt=function(t,e){var n=function(t,e){return et(t,e)}(t,e);if(void 0===n||null===n)throw t+" not available on this browser";return n},rt=function(){return nt("Node")},ot=function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)},it=function(t,e){return ot(t,e,rt().DOCUMENT_POSITION_CONTAINED_BY)},at=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(null,arguments)),e}},st=function(){return ut(0,0)},ut=function(t,e){return{major:t,minor:e}},ct={nu:ut,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?st():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return ut(r(1),r(2))}(t,n)},unknown:st},lt=function(t,e){return function(){return e===t}},ft=function(t){var e=t.current;return{current:e,version:t.version,isEdge:lt("Edge",e),isChrome:lt("Chrome",e),isIE:lt("IE",e),isOpera:lt("Opera",e),isFirefox:lt("Firefox",e),isSafari:lt("Safari",e)}},dt={unknown:function(){return ft({current:void 0,version:ct.unknown()})},nu:ft,edge:o.constant("Edge"),chrome:o.constant("Chrome"),ie:o.constant("IE"),opera:o.constant("Opera"),firefox:o.constant("Firefox"),safari:o.constant("Safari")},ht=function(t,e){return function(){return e===t}},mt=function(t){var e=t.current;return{current:e,version:t.version,isWindows:ht("Windows",e),isiOS:ht("iOS",e),isAndroid:ht("Android",e),isOSX:ht("OSX",e),isLinux:ht("Linux",e),isSolaris:ht("Solaris",e),isFreeBSD:ht("FreeBSD",e)}},gt={unknown:function(){return mt({current:void 0,version:ct.unknown()})},nu:mt,windows:o.constant("Windows"),ios:o.constant("iOS"),android:o.constant("Android"),linux:o.constant("Linux"),osx:o.constant("OSX"),solaris:o.constant("Solaris"),freebsd:o.constant("FreeBSD")},pt=function(t,e){var n=String(e).toLowerCase();return R.find(t,function(t){return t.search(n)})},vt=function(t,e){return pt(t,e).map(function(t){var n=ct.detect(t.versionRegexes,e);return{current:t.name,version:n}})},bt=function(t,e){return pt(t,e).map(function(t){var n=ct.detect(t.versionRegexes,e);return{current:t.name,version:n}})},yt=function(t,e){return e+t},wt=function(t,e){return t+e},xt=function(t,e){return t.substring(e)},Ct=function(t,e){return t.substring(0,t.length-e)},Rt=function(t){return""===t?l.none():l.some(t.substr(0,1))},St=function(t){return""===t?l.none():l.some(t.substring(1))},kt=function(t,e,n){return""===e||!(t.length<e.length)&&t.substr(n,n+e.length)===e},_t=function(t,e){return kt(t,e,0)},Tt=function(t,e){return kt(t,e,t.length-e.length)},Et={supplant:function(t,e){return t.replace(/\${([^{}]*)}/g,function(t,n){var r=e[n];return function(t){var e=typeof t;return"string"===e||"number"===e}(r)?r:t})},startsWith:_t,removeLeading:function(t,e){return _t(t,e)?xt(t,e.length):t},removeTrailing:function(t,e){return Tt(t,e)?Ct(t,e.length):t},ensureLeading:function(t,e){return _t(t,e)?t:yt(t,e)},ensureTrailing:function(t,e){return Tt(t,e)?t:wt(t,e)},endsWith:Tt,contains:function(t,e){return-1!==t.indexOf(e)},trim:function(t){return t.replace(/^\s+|\s+$/g,"")},lTrim:function(t){return t.replace(/^\s+/g,"")},rTrim:function(t){return t.replace(/\s+$/g,"")},capitalize:function(t){return Rt(t).bind(function(e){return St(t).map(function(t){return e.toUpperCase()+t})}).getOr(t)}},Nt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Dt=function(t){return function(e){return Et.contains(e,t)}},At=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Et.contains(t,"edge/")&&Et.contains(t,"chrome")&&Et.contains(t,"safari")&&Et.contains(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Nt],search:function(t){return Et.contains(t,"chrome")&&!Et.contains(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Et.contains(t,"msie")||Et.contains(t,"trident")}},{name:"Opera",versionRegexes:[Nt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Dt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Dt("firefox")},{name:"Safari",versionRegexes:[Nt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Et.contains(t,"safari")||Et.contains(t,"mobile/"))&&Et.contains(t,"applewebkit")}}],Pt=[{name:"Windows",search:Dt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Et.contains(t,"iphone")||Et.contains(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Dt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Dt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Dt("linux"),versionRegexes:[]},{name:"Solaris",search:Dt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Dt("freebsd"),versionRegexes:[]}],Ot={browsers:o.constant(At),oses:o.constant(Pt)},Mt=function(t){var e=Ot.browsers(),n=Ot.oses(),r=vt(e,t).fold(dt.unknown,dt.nu),i=bt(n,t).fold(gt.unknown,gt.nu);return{browser:r,os:i,deviceType:function(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!r,a=t.isAndroid()&&3===t.version.major,s=t.isAndroid()&&4===t.version.major,u=r||a||s&&!0===/mobile/i.test(n),c=t.isiOS()||t.isAndroid(),l=c&&!u,f=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:o.constant(r),isiPhone:o.constant(i),isTablet:o.constant(u),isPhone:o.constant(l),isTouch:o.constant(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:o.constant(f)}}(i,r,t)}},Bt={detect:at(function(){var t=navigator.userAgent;return Mt(t)})},Ht=function(t,e){return t.dom()===e.dom()},Wt=Bt.detect().browser.isIE()?function(t,e){return it(t.dom(),e.dom())}:function(t,e){var n=t.dom(),r=e.dom();return n!==r&&n.contains(r)},It={eq:Ht,isEqualNode:function(t,e){return t.dom().isEqualNode(e.dom())},member:function(t,e){return R.exists(e,o.curry(Ht,t))},contains:Wt,is:G.is},Lt=function(t){return j.fromDom(t.dom().ownerDocument)},zt=function(t){var e=t.dom();return l.from(e.parentNode).map(j.fromDom)},Ft=function(t){var e=t.dom();return l.from(e.previousSibling).map(j.fromDom)},qt=function(t){var e=t.dom();return l.from(e.nextSibling).map(j.fromDom)},jt=function(t){var e=t.dom();return R.map(e.childNodes,j.fromDom)},Ut=function(t,e){var n=t.dom().childNodes;return l.from(n[e]).map(j.fromDom)},Vt=M.immutable("element","offset"),$t={owner:Lt,defaultView:function(t){var e=t.dom().ownerDocument.defaultView;return j.fromDom(e)},documentElement:function(t){var e=Lt(t);return j.fromDom(e.dom().documentElement)},parent:zt,findIndex:function(t){return zt(t).bind(function(e){var n=jt(e);return R.findIndex(n,function(e){return It.eq(t,e)})})},parents:function(t,e){for(var n=A.isFunction(e)?e:o.constant(!1),r=t.dom(),i=[];null!==r.parentNode&&void 0!==r.parentNode;){var a=r.parentNode,s=j.fromDom(a);if(i.push(s),!0===n(s))break;r=a}return i},siblings:function(t){return zt(t).map(jt).map(function(e){return R.filter(e,function(e){return!It.eq(t,e)})}).getOr([])},prevSibling:Ft,offsetParent:function(t){var e=t.dom();return l.from(e.offsetParent).map(j.fromDom)},prevSiblings:function(t){return R.reverse(Z(t,Ft))},nextSibling:qt,nextSiblings:function(t){return Z(t,qt)},children:jt,child:Ut,firstChild:function(t){return Ut(t,0)},lastChild:function(t){return Ut(t,t.dom().childNodes.length-1)},childNodesCount:function(t){return t.dom().childNodes.length},hasChildNodes:function(t){return t.dom().hasChildNodes()},leaf:function(t,e){var n=jt(t);return n.length>0&&e<n.length?Vt(n[e],0):Vt(t,e)}},Yt=function(t,e,n){return R.bind($t.children(t),function(t){return G.is(t,e)?n(t)?[t]:[]:Yt(t,e,n)})},Xt={firstLayer:function(t,e){return Yt(t,e,o.constant(!0))},filterFirstLayer:Yt},Kt=function(t){return t.dom().nodeName.toLowerCase()},Jt=function(t){return t.dom().nodeType},Gt=function(t){return function(e){return Jt(e)===t}},Zt=Gt($),Qt=Gt(Y),te=Gt(V),ee={name:Kt,type:Jt,value:function(t){return t.dom().nodeValue},isElement:Zt,isText:Qt,isDocument:te,isComment:function(t){return Jt(t)===U||"#comment"===Kt(t)}},ne=function(t,e,n){if(!(A.isString(n)||A.isBoolean(n)||A.isNumber(n)))throw console.error("Invalid call to Attr.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},re=function(t,e,n){ne(t.dom(),e,n)},oe=function(t,e){var n=t.dom().getAttribute(e);return null===n?void 0:n},ie=function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},ae={clone:function(t){return R.foldl(t.dom().attributes,function(t,e){return t[e.name]=e.value,t},{})},set:re,setAll:function(t,e){var n=t.dom();N.each(e,function(t,e){ne(n,e,t)})},get:oe,has:ie,remove:function(t,e){t.dom().removeAttribute(e)},hasNone:function(t){var e=t.dom().attributes;return void 0===e||null===e||0===e.length},transfer:function(t,e,n){ee.isElement(t)&&ee.isElement(e)&&R.each(n,function(n){!function(t,e,n){ie(t,n)&&!ie(e,n)&&re(e,n,oe(t,n))}(t,e,n)})}},se=at(function(){return ue(j.fromDom(document))}),ue=function(t){var e=t.dom().body;if(null===e||void 0===e)throw"Body is not available yet";return j.fromDom(e)},ce={body:se,getBody:ue,inBody:function(t){var e=ee.isText(t)?t.dom().parentNode:t.dom();return void 0!==e&&null!==e&&e.ownerDocument.body.contains(e)}},le=function(t,e){var n=[];return R.each($t.children(t),function(t){e(t)&&(n=n.concat([t])),n=n.concat(le(t,e))}),n},fe={all:function(t){return le(ce.body(),t)},ancestors:function(t,e,n){return R.filter($t.parents(t,n),e)},siblings:function(t,e){return R.filter($t.siblings(t),e)},children:function(t,e){return R.filter($t.children(t),e)},descendants:le},de={all:function(t){return G.all(t)},ancestors:function(t,e,n){return fe.ancestors(t,function(t){return G.is(t,e)},n)},siblings:function(t,e){return fe.siblings(t,function(t){return G.is(t,e)})},children:function(t,e){return fe.children(t,function(t){return G.is(t,e)})},descendants:function(t,e){return G.all(e,t)}};function he(t,e,n,r,o){return t(n,r)?l.some(n):A.isFunction(o)&&o(n)?l.none():e(n,r,o)}var me=function(t,e,n){for(var r=t.dom(),i=A.isFunction(n)?n:o.constant(!1);r.parentNode;){r=r.parentNode;var a=j.fromDom(r);if(e(a))return l.some(a);if(i(a))break}return l.none()},ge=function(t,e){return R.find(t.dom().childNodes,o.compose(e,j.fromDom)).map(j.fromDom)},pe=function(t,e){var n=function(t){for(var r=0;r<t.childNodes.length;r++){if(e(j.fromDom(t.childNodes[r])))return l.some(j.fromDom(t.childNodes[r]));var o=n(t.childNodes[r]);if(o.isSome())return o}return l.none()};return n(t.dom())},ve={first:function(t){return pe(ce.body(),t)},ancestor:me,closest:function(t,e,n){return he(function(t){return e(t)},me,t,e,n)},sibling:function(t,e){var n=t.dom();return n.parentNode?ge(j.fromDom(n.parentNode),function(n){return!It.eq(t,n)&&e(n)}):l.none()},child:ge,descendant:pe},be=function(t,e,n){return ve.ancestor(t,function(t){return G.is(t,e)},n)},ye={first:function(t){return G.one(t)},ancestor:be,sibling:function(t,e){return ve.sibling(t,function(t){return G.is(t,e)})},child:function(t,e){return ve.child(t,function(t){return G.is(t,e)})},descendant:function(t,e){return G.one(e,t)},closest:function(t,e,n){return he(G.is,be,t,e,n)}},we=function(t,e,n){var r=void 0!==n?n:o.constant(!1);return r(e)?l.none():R.contains(t,ee.name(e))?l.some(e):ye.ancestor(e,t.join(","),function(t){return G.is(t,"table")||r(t)})},xe=function(t,e){return $t.parent(e).map(function(e){return de.children(e,t)})},Ce=function(t,e){return parseInt(ae.get(t,e),10)},Re={cell:function(t,e){return we(["td","th"],t,e)},firstCell:function(t){return ye.descendant(t,"th,td")},cells:function(t){return Xt.firstLayer(t,"th,td")},neighbourCells:o.curry(xe,"th,td"),table:function(t,e){return ye.closest(t,"table",e)},row:function(t,e){return we(["tr"],t,e)},rows:function(t){return Xt.firstLayer(t,"tr")},notCell:function(t,e){return we(["caption","tr","tbody","tfoot","thead"],t,e)},neighbourRows:o.curry(xe,"tr"),attr:Ce,grid:function(t,e,n){var r=Ce(t,e),o=Ce(t,n);return F.grid(r,o)}},Se=function(t){var e=Re.rows(t);return R.map(e,function(t){var e=t,n=$t.parent(e).bind(function(t){var e=ee.name(t);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"}),r=R.map(Re.cells(t),function(t){var e=ae.has(t,"rowspan")?parseInt(ae.get(t,"rowspan"),10):1,n=ae.has(t,"colspan")?parseInt(ae.get(t,"colspan"),10):1;return F.detail(t,e,n)});return F.rowdata(e,r,n)})},ke=function(t,e){return R.map(t,function(t){var n=R.map(Re.cells(t),function(t){var e=ae.has(t,"rowspan")?parseInt(ae.get(t,"rowspan"),10):1,n=ae.has(t,"colspan")?parseInt(ae.get(t,"colspan"),10):1;return F.detail(t,e,n)});return F.rowdata(t,n,e.section())})},_e=function(t,e){return t+","+e},Te=function(t,e){var n=R.bind(t.all(),function(t){return t.cells()});return R.filter(n,e)},Ee={generate:function(t){var e={},n=[],r=t.length,i=0;R.each(t,function(t,r){var o=[];R.each(t.cells(),function(t,n){for(var a=0;void 0!==e[_e(r,a)];)a++;for(var s=F.extended(t.element(),t.rowspan(),t.colspan(),r,a),u=0;u<t.colspan();u++)for(var c=0;c<t.rowspan();c++){var l=a+u,f=_e(r+c,l);e[f]=s,i=Math.max(i,l+1)}o.push(s)}),n.push(F.rowdata(t.element(),o,t.section()))});var a=F.grid(r,i);return{grid:o.constant(a),access:o.constant(e),all:o.constant(n)}},getAt:function(t,e,n){var r=t.access()[_e(e,n)];return void 0!==r?l.some(r):l.none()},findItem:function(t,e,n){var r=Te(t,function(t){return n(e,t.element())});return r.length>0?l.some(r[0]):l.none()},filterItems:Te,justCells:function(t){var e=R.map(t.all(),function(t){return t.cells()});return R.flatten(e)}},Ne={isSupported:function(t){return void 0!==t.style}},De=function(t,e,n){if(!A.isString(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Ne.isSupported(t)&&t.style.setProperty(e,n)},Ae=function(t,e){Ne.isSupported(t)&&t.style.removeProperty(e)},Pe=function(t,e,n){var r=t.dom();De(r,e,n)},Oe=function(t,e){return Ne.isSupported(t)?t.style.getPropertyValue(e):""},Me=function(t,e){var n=t.dom(),r=Oe(n,e);return l.from(r).filter(function(t){return t.length>0})},Be={copy:function(t,e){var n=t.dom(),r=e.dom();Ne.isSupported(n)&&Ne.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:Pe,preserve:function(t,e){var n=ae.get(t,"style"),r=e(t);return(void 0===n?ae.remove:ae.set)(t,"style",n),r},setAll:function(t,e){var n=t.dom();N.each(e,function(t,e){De(n,e,t)})},setOptions:function(t,e){var n=t.dom();N.each(e,function(t,e){t.fold(function(){Ae(n,e)},function(t){De(n,e,t)})})},remove:function(t,e){var n=t.dom();Ae(n,e),ae.has(t,"style")&&""===Et.trim(ae.get(t,"style"))&&ae.remove(t,"style")},get:function(t,e){var n=t.dom(),r=window.getComputedStyle(n).getPropertyValue(e),o=""!==r||ce.inBody(t)?r:Oe(n,e);return null===o?void 0:o},getRaw:Me,getAllRaw:function(t){var e={},n=t.dom();if(Ne.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);e[o]=n.style[o]}return e},isValidValue:function(t,e,n){var r=j.fromTag(t);return Pe(r,e,n),Me(r,e).isSome()},reflow:function(t){return t.dom().offsetWidth},transfer:function(t,e,n){ee.isElement(t)&&ee.isElement(e)&&R.each(n,function(n){!function(t,e,n){Me(t,n).each(function(t){Me(e,n).isNone()&&Pe(e,n,t)})}(t,e,n)})}},He=function(t,e){$t.parent(t).each(function(n){n.dom().insertBefore(e.dom(),t.dom())})},We=function(t,e){t.dom().appendChild(e.dom())},Ie={before:He,after:function(t,e){$t.nextSibling(t).fold(function(){$t.parent(t).each(function(t){We(t,e)})},function(t){He(t,e)})},prepend:function(t,e){$t.firstChild(t).fold(function(){We(t,e)},function(n){t.dom().insertBefore(e.dom(),n.dom())})},append:We,appendAt:function(t,e,n){$t.child(t,n).fold(function(){We(t,e)},function(t){He(t,e)})},wrap:function(t,e){He(t,e),We(e,t)}},Le={before:function(t,e){R.each(e,function(e){Ie.before(t,e)})},after:function(t,e){R.each(e,function(n,r){var o=0===r?t:e[r-1];Ie.after(o,n)})},prepend:function(t,e){R.each(e.slice().reverse(),function(e){Ie.prepend(t,e)})},append:function(t,e){R.each(e,function(e){Ie.append(t,e)})}},ze=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},Fe={empty:function(t){t.dom().textContent="",R.each($t.children(t),function(t){ze(t)})},remove:ze,unwrap:function(t){var e=$t.children(t);e.length>0&&Le.before(t,e),ze(t)}},qe=M.immutable("minRow","minCol","maxRow","maxCol"),je=function(t,e){var n=t.grid().columns(),r=t.grid().rows(),o=n,i=0,a=0;return N.each(t.access(),function(t){if(e(t)){var n=t.row(),s=n+t.rowspan()-1,u=t.column(),c=u+t.colspan()-1;n<r?r=n:s>i&&(i=s),u<o?o=u:c>a&&(a=c)}}),qe(r,o,i,a)},Ue=function(t,e,n){var r=t[n].element(),o=j.fromTag("td");Ie.append(o,j.fromTag("br")),(e?Ie.append:Ie.prepend)(r,o)},Ve=function(t,e){var n=function(t){return G.is(t.element(),e)},r=Se(t),o=Ee.generate(r),i=je(o,n),a="th:not("+e+"),td:not("+e+")",s=Xt.filterFirstLayer(t,"th,td",function(t){return G.is(t,a)});return R.each(s,Fe.remove),function(t,e,n,r){for(var o=e.grid().columns(),i=e.grid().rows(),a=0;a<i;a++)for(var s=!1,u=0;u<o;u++)a<n.minRow()||a>n.maxRow()||u<n.minCol()||u>n.maxCol()||(Ee.getAt(e,a,u).filter(r).isNone()?Ue(t,s,a):s=!0)}(r,o,i,n),function(t,e){var n=R.filter(Xt.firstLayer(t,"tr"),function(t){return 0===t.dom().childElementCount});R.each(n,Fe.remove),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||R.each(Xt.firstLayer(t,"th,td"),function(t){ae.remove(t,"rowspan"),ae.remove(t,"colspan")}),ae.remove(t,"width"),ae.remove(t,"height"),Be.remove(t,"width"),Be.remove(t,"height")}(t,i),t},$e=function(t,e){return j.fromDom(t.dom().cloneNode(e))},Ye=function(t){return $e(t,!0)},Xe=function(t,e){var n=j.fromTag(e),r=ae.clone(t);return ae.setAll(n,r),n},Ke=function(t){return $e(t,!1)},Je=Ye,Ge=function(t,e){var n=Xe(t,e),r=$t.children(Ye(t));return Le.append(n,r),n},Ze=function(t,e){var n=function(e){return t(e)?l.from(e.dom().nodeValue):l.none()},r=Bt.detect().browser,o=r.isIE()&&10===r.version.major?function(t){try{return n(t)}catch(t){return l.none()}}:n;return{get:function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return o(n).getOr("")},getOption:o,set:function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom().nodeValue=r}}}(ee.isText,"text"),Qe={get:function(t){return Ze.get(t)},getOption:function(t){return Ze.getOption(t)},set:function(t,e){Ze.set(t,e)}},tn=function(t){return"img"===ee.name(t)?1:Qe.getOption(t).fold(function(){return $t.children(t).length},function(t){return t.length})},en=["img","br"],nn=tn,rn=function(t){var e;return e=t,Qe.getOption(e).filter(function(t){return 0!==t.trim().length||t.indexOf("Â ")>-1}).isSome()||R.contains(en,ee.name(t))},on=function(t,e){var n=function(t){for(var r=$t.children(t),o=r.length-1;o>=0;o--){var i=r[o];if(e(i))return l.some(i);var a=n(i);if(a.isSome())return a}return l.none()};return n(t)},an={first:function(t){return ve.descendant(t,rn)},last:function(t){return on(t,rn)}},sn=function(){var t=j.fromTag("td");return Ie.append(t,j.fromTag("br")),t},un=function(t,e,n){var r=Ge(t,e);return N.each(n,function(t,e){null===t?ae.remove(r,e):ae.set(r,e,t)}),r},cn=function(t){return t},ln=function(t){return function(){return j.fromTag("tr",t.dom())}},fn={cellOperations:function(t,e,n){return{row:ln(e),cell:function(e){var r=$t.owner(e.element()),o=j.fromTag(ee.name(e.element()),r.dom()),i=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=i.length>0?function(t,e,n){return an.first(t).map(function(r){var o=n.join(","),i=de.ancestors(r,o,function(e){return It.eq(e,t)});return R.foldr(i,function(t,e){var n=Ke(e);return Ie.append(t,n),n},e)}).getOr(e)}(e.element(),o,i):o;return Ie.append(a,j.fromTag("br")),Be.copy(e.element(),o),Be.remove(o,"height"),1!==e.colspan()&&Be.remove(e.element(),"width"),t(e.element(),o),o},replace:un,gap:sn}},paste:function(t){return{row:ln(t),cell:sn,replace:cn,gap:sn}}},dn=function(t,e){var n=(e||document).createElement("div");return n.innerHTML=t,$t.children(j.fromDom(n))},hn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function mn(){return{up:o.constant({selector:ye.ancestor,closest:ye.closest,predicate:ve.ancestor,all:$t.parents}),down:o.constant({selector:de.descendants,predicate:fe.descendants}),styles:o.constant({get:Be.get,getRaw:Be.getRaw,set:Be.set,remove:Be.remove}),attrs:o.constant({get:ae.get,set:ae.set,remove:ae.remove,copyTo:function(t,e){var n=ae.clone(t);ae.setAll(e,n)}}),insert:o.constant({before:Ie.before,after:Ie.after,afterAll:Le.after,append:Ie.append,appendAll:Le.append,prepend:Ie.prepend,wrap:Ie.wrap}),remove:o.constant({unwrap:Fe.unwrap,remove:Fe.remove}),create:o.constant({nu:j.fromTag,clone:function(t){return j.fromDom(t.dom().cloneNode(!1))},text:j.fromText}),query:o.constant({comparePosition:function(t,e){return t.dom().compareDocumentPosition(e.dom())},prevSibling:$t.prevSibling,nextSibling:$t.nextSibling}),property:o.constant({children:$t.children,name:ee.name,parent:$t.parent,isText:ee.isText,isComment:ee.isComment,isElement:ee.isElement,getText:Qe.get,setText:Qe.set,isBoundary:function(t){return!!ee.isElement(t)&&("body"===ee.name(t)||R.contains(hn,ee.name(t)))},isEmptyTag:function(t){return!!ee.isElement(t)&&R.contains(["br","img","hr","input"],ee.name(t))}}),eq:It.eq,is:It.is}}M.immutable("left","right");var gn=function(t,e,n,r){var o=e(t,n);return R.foldr(r,function(n,r){var o=e(t,r);return pn(t,n,o)},o)},pn=function(t,e,n){return e.bind(function(e){return n.filter(o.curry(t.eq,e))})},vn=function(t,e,n){return n.length>0?function(t,e,n,r){return r(t,e,n[0],n.slice(1))}(t,e,n,gn):l.none()},bn=function(t,e){return o.curry(t.eq,e)},yn=function(t,e,n,r){var i=void 0!==r?r:o.constant(!1),a=[e].concat(t.up().all(e)),s=[n].concat(t.up().all(n)),u=function(t){return R.findIndex(t,i).fold(function(){return t},function(e){return t.slice(0,e+1)})},c=u(a),l=u(s),f=R.find(c,function(e){return R.exists(l,bn(t,e))});return{firstpath:o.constant(c),secondpath:o.constant(l),shared:o.constant(f)}},wn=yn,xn=function(t,e,n){return vn(t,e,n)},Cn=function(t,e,n,r){return wn(t,e,n,r)},Rn=mn(),Sn=function(t,e){return xn(Rn,function(e,n){return t(n)},e)},kn=function(t,e,n){return Cn(Rn,t,e,n)},_n=function(t,e){return e.column()>=t.startCol()&&e.column()+e.colspan()-1<=t.finishCol()&&e.row()>=t.startRow()&&e.row()+e.rowspan()-1<=t.finishRow()},Tn=function(t,e){var n=e.column(),r=e.column()+e.colspan()-1,o=e.row(),i=e.row()+e.rowspan()-1;return n<=t.finishCol()&&r>=t.startCol()&&o<=t.finishRow()&&i>=t.startRow()},En=function(t,e){for(var n=!0,r=o.curry(_n,e),i=e.startRow();i<=e.finishRow();i++)for(var a=e.startCol();a<=e.finishCol();a++)n=n&&Ee.getAt(t,i,a).exists(r);return n?l.some(e):l.none()},Nn=function(t,e,n){var r=Ee.findItem(t,e,It.eq),o=Ee.findItem(t,n,It.eq);return r.bind(function(t){return o.map(function(e){return n=t,r=e,F.bounds(Math.min(n.row(),r.row()),Math.min(n.column(),r.column()),Math.max(n.row()+n.rowspan()-1,r.row()+r.rowspan()-1),Math.max(n.column()+n.colspan()-1,r.column()+r.colspan()-1));var n,r})})},Dn=Nn,An=function(t,e,n){return Nn(t,e,n).bind(function(e){return En(t,e)})},Pn=function(t,e,n,r){return Ee.findItem(t,e,It.eq).bind(function(e){var o=n>0?e.row()+e.rowspan()-1:e.row(),i=r>0?e.column()+e.colspan()-1:e.column();return Ee.getAt(t,o+n,i+r).map(function(t){return t.element()})})},On=function(t,e,n){return Dn(t,e,n).map(function(e){var n=Ee.filterItems(t,o.curry(Tn,e));return R.map(n,function(t){return t.element()})})},Mn=function(t,e){return Ee.findItem(t,e,function(t,e){return It.contains(e,t)}).bind(function(t){return t.element()})},Bn=function(t){var e=Se(t);return Ee.generate(e)},Hn=function(t,e,n){return Re.table(t).bind(function(r){var o=Bn(r);return Pn(o,t,e,n)})},Wn=function(t,e,n){var r=Bn(t);return On(r,e,n)},In=function(t,e,n,r,o){var i=Bn(t),a=It.eq(t,n)?e:Mn(i,e),s=It.eq(t,o)?r:Mn(i,r);return On(i,a,s)},Ln=function(t,e,n){var r=Bn(t);return An(r,e,n)},zn=function(t,e){return ye.ancestor(t,"table")},Fn=M.immutableBag(["boxes","start","finish"],[]),qn=function(t,e,n){var r=function(t){return function(e){return n(e)||It.eq(e,t)}};return It.eq(t,e)?l.some(Fn({boxes:l.some([t]),start:t,finish:e})):zn(t).bind(function(o){return zn(e).bind(function(i){if(It.eq(o,i))return l.some(Fn({boxes:Wn(o,t,e),start:t,finish:e}));if(It.contains(o,i)){var a=(s=de.ancestors(e,"td,th",r(o))).length>0?s[s.length-1]:e;return l.some(Fn({boxes:In(o,t,o,e,i),start:t,finish:a}))}if(It.contains(i,o)){var s,u=(s=de.ancestors(t,"td,th",r(i))).length>0?s[s.length-1]:t;return l.some(Fn({boxes:In(i,t,o,e,i),start:t,finish:u}))}return kn(t,e).shared().bind(function(a){return ye.closest(a,"table",n).bind(function(n){var a=de.ancestors(e,"td,th",r(n)),s=a.length>0?a[a.length-1]:e,u=de.ancestors(t,"td,th",r(n)),c=u.length>0?u[u.length-1]:t;return l.some(Fn({boxes:In(n,t,o,e,i),start:c,finish:s}))})})})})},jn={identify:qn,retrieve:function(t,e){var n=de.descendants(t,e);return n.length>0?l.some(n):l.none()},shiftSelection:function(t,e,n,r,i){return function(t,e){return R.find(t,function(t){return G.is(t,e)})}(t,i).bind(function(t){return Hn(t,e,n).bind(function(t){return function(t,e){return ye.ancestor(t,"table").bind(function(n){return ye.descendant(n,e).bind(function(e){return qn(e,t).bind(function(t){return t.boxes().map(function(e){return{boxes:o.constant(e),start:o.constant(t.start()),finish:o.constant(t.finish())}})})})})}(t,r)})})},getEdges:function(t,e,n){return ye.descendant(t,e).bind(function(e){return ye.descendant(t,n).bind(function(t){return Sn(zn,[e,t]).map(function(n){return{first:o.constant(e),last:o.constant(t),table:o.constant(n)}})})})}},Un={retrieve:function(t,e){return jn.retrieve(t,e)},retrieveBox:function(t,e,n){return jn.getEdges(t,e,n).bind(function(e){var n=function(e){return It.eq(t,e)},r=ye.ancestor(e.first(),"thead,tfoot,tbody,table",n),o=ye.ancestor(e.last(),"thead,tfoot,tbody,table",n);return r.bind(function(t){return o.bind(function(n){return It.eq(t,n)?Ln(e.table(),e.first(),e.last()):l.none()})})})}},Vn="data-mce-selected",$n={selected:o.constant(Vn),selectedSelector:o.constant("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:o.constant("[data-mce-selected]"),firstSelected:o.constant("data-mce-first-selected"),firstSelectedSelector:o.constant("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:o.constant("data-mce-last-selected"),lastSelectedSelector:o.constant("td[data-mce-last-selected],th[data-mce-last-selected]")},Yn=function(t){if(!A.isArray(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return R.each(t,function(r,o){var i=N.keys(r);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!A.isArray(s))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),i=0;i<r.length;i++)r[i]=arguments[i];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[o].apply(null,r)},match:function(t){var n=N.keys(t);if(e.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+n.join(","));if(!R.forall(e,function(t){return R.contains(n,t)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,r)},log:function(t){console.log(t,{constructors:e,constructor:a,params:r})}}}}),n},Xn=Yn([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Kn={cata:function(t,e,n,r){return t.fold(e,n,r)},none:Xn.none,multiple:Xn.multiple,single:Xn.single},Jn=function(t,e){return Kn.cata(e.get(),o.constant([]),o.identity,o.constant([t]))},Gn=function(t,e){return Kn.cata(e.get(),l.none,function(e,n){return 0===e.length?l.none():Un.retrieveBox(t,$n.firstSelectedSelector(),$n.lastSelectedSelector()).bind(function(t){return e.length>1?l.some({bounds:o.constant(t),cells:o.constant(e)}):l.none()})},l.none)},Zn=function(t,e){var n=Jn(t,e);return n.length>0&&R.forall(n,function(t){return ae.has(t,"rowspan")&&parseInt(ae.get(t,"rowspan"),10)>1||ae.has(t,"colspan")&&parseInt(ae.get(t,"colspan"),10)>1})?l.some(n):l.none()},Qn=Jn,tr=function(t){return{element:o.constant(t),mergable:l.none,unmergable:l.none,selection:o.constant([t])}},er=M.immutable("element","clipboard","generators"),nr={noMenu:tr,forMenu:function(t,e,n){return{element:o.constant(n),mergable:o.constant(Gn(e,t)),unmergable:o.constant(Zn(n,t)),selection:o.constant(Qn(n,t))}},notCell:function(t){return tr(t)},paste:er,pasteRows:function(t,e,n,r,i){return{element:o.constant(n),mergable:l.none,unmergable:l.none,selection:o.constant(Qn(n,t)),clipboard:o.constant(r),generators:o.constant(i)}}},rr={registerEvents:function(t,e,n,r){t.on("BeforeGetContent",function(n){!0===n.selection&&Kn.cata(e.get(),o.noop,function(e){n.preventDefault(),function(t){return Re.table(t[0]).map(Je).map(function(t){return[Ve(t,$n.attributeSelector())]})}(e).each(function(e){n.content=R.map(e,function(e){return function(t,e){return t.selection.serializer.serialize(e.dom(),{})}(t,e)}).join("")})},o.noop)}),t.on("BeforeSetContent",function(e){!0===e.selection&&!0===e.paste&&l.from(t.dom.getParent(t.selection.getStart(),"th,td")).each(function(o){var i=j.fromDom(o);Re.table(i).bind(function(o){var a=R.filter(dn(e.content),function(t){return"meta"!==ee.name(t)});if(1===a.length&&"table"===ee.name(a[0])){e.preventDefault();var s=j.fromDom(t.getDoc()),u=fn.paste(s),c=nr.paste(i,a[0],u);n.pasteCells(o,c).each(function(e){t.selection.setRng(e),t.focus(),r.clear(o)})}})})})}};function or(t,e){var n=function(n){var r=e(n);if(r<=0||null===r){var o=Be.get(n,t);return parseFloat(o)||0}return r},r=function(t,e){return R.foldl(e,function(e,n){var r=Be.get(t,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o},0)};return{set:function(e,n){if(!A.isNumber(n)&&!n.match(/^[0-9]+$/))throw t+".set accepts only positive integer values. Value was "+n;var r=e.dom();Ne.isSupported(r)&&(r.style[t]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(t,e,n){var o=r(t,n);return e>o?e-o:0}}}var ir=or("height",function(t){return ce.inBody(t)?t.dom().getBoundingClientRect().height:t.dom().offsetHeight}),ar=function(t){return ir.get(t)},sr=function(t){return ir.getOuter(t)},ur=or("width",function(t){return t.dom().offsetWidth}),cr=function(t){return ur.get(t)},lr=function(t){return ur.getOuter(t)},fr=Bt.detect(),dr=function(t,e,n){return function(t,e){var n=parseFloat(t);return isNaN(n)?e:n}(Be.get(t,e),n)},hr=function(t){return fr.browser.isIE()||fr.browser.isEdge()?function(t){var e=dr(t,"padding-top",0),n=dr(t,"padding-bottom",0),r=dr(t,"border-top-width",0),o=dr(t,"border-bottom-width",0),i=t.dom().getBoundingClientRect().height;return"border-box"===Be.get(t,"box-sizing")?i:i-e-n-(r+o)}(t):dr(t,"height",ar(t))},mr=/(\d+(\.\d+)?)(\w|%)*/,gr=/(\d+(\.\d+)?)%/,pr=/(\d+(\.\d+)?)px|em/,vr=function(t,e){Be.set(t,"height",e+"px")},br=function(t,e,n,r){var o=parseInt(t,10);return Et.endsWith(t,"%")&&"table"!==ee.name(e)?function(t,e,n,r){var o=Re.table(t).map(function(t){var r=n(t);return Math.floor(e/100*r)}).getOr(e);return r(t,o),o}(e,o,n,r):o},yr=function(t){var e=function(t){return Be.getRaw(t,"height").getOrThunk(function(){return hr(t)+"px"})}(t);return e?br(e,t,ar,vr):ar(t)},wr=function(t,e){return ae.has(t,e)?parseInt(ae.get(t,e),10):1},xr=function(t){return Be.getRaw(t,"width").fold(function(){return l.from(ae.get(t,"width"))},function(t){return l.some(t)})},Cr=function(t,e){return t/e.pixelWidth()*100},Rr={percentageBasedSizeRegex:o.constant(gr),pixelBasedSizeRegex:o.constant(pr),setPixelWidth:function(t,e){Be.set(t,"width",e+"px")},setPercentageWidth:function(t,e){Be.set(t,"width",e+"%")},setHeight:vr,getPixelWidth:function(t,e){return xr(t).fold(function(){var e=cr(t);return parseInt(e,10)},function(n){return function(t,e,n){if(pr.test(e)){var r=pr.exec(e);return parseInt(r[1],10)}if(gr.test(e)){var o=gr.exec(e);return function(t,e){return t/100*e.pixelWidth()}(parseFloat(o[1]),n)}var i=cr(t);return parseInt(i,10)}(t,n,e)})},getPercentageWidth:function(t,e){return xr(t).fold(function(){var n=cr(t),r=parseInt(n,10);return Cr(r,e)},function(n){return function(t,e,n){if(gr.test(e)){var r=gr.exec(e);return parseFloat(r[1])}var o=cr(t),i=parseInt(o,10);return Cr(i,n)}(t,n,e)})},getGenericWidth:function(t){return xr(t).bind(function(t){if(mr.test(t)){var e=mr.exec(t);return l.some({width:o.constant(e[1]),unit:o.constant(e[3])})}return l.none()})},setGenericWidth:function(t,e,n){Be.set(t,"width",e+n)},getHeight:function(t){return function(t,e,n){return n(t)/wr(t,e)}(t,"rowspan",yr)},getRawWidth:xr},Sr={halve:function(t,e){Rr.getGenericWidth(t).each(function(n){var r=n.width()/2;Rr.setGenericWidth(t,r,n.unit()),Rr.setGenericWidth(e,r,n.unit())})}},kr=function(t,e){var n=e||j.fromDom(document.documentElement);return ve.ancestor(t,o.curry(It.eq,n)).isSome()},_r=function(t){var e=t.dom();return e===e.window?t:ee.isDocument(t)?e.defaultView||e.parentWindow:null},Tr=function(t,e){return{left:o.constant(t),top:o.constant(e),translate:function(n,r){return Tr(t+n,e+r)}}},Er=function(t,e){return void 0!==t?t:void 0!==e?e:0},Nr=function(t){var e=t.dom(),n=e.ownerDocument,r=n.body,o=j.fromDom(n.documentElement);return r===e?Tr(r.offsetLeft,r.offsetTop):kr(t,o)?function(t){var e=t.getBoundingClientRect();return Tr(e.left,e.top)}(e):Tr(0,0)},Dr=function(t){var e=t.dom().ownerDocument,n=e.body,r=_r(j.fromDom(e)),o=e.documentElement,i=Er(r.pageYOffset,o.scrollTop),a=Er(r.pageXOffset,o.scrollLeft),s=Er(o.clientTop,n.clientTop),u=Er(o.clientLeft,n.clientLeft);return Nr(t).translate(a-u,i-s)},Ar=M.immutable("row","y"),Pr=M.immutable("col","x"),Or=function(t){return Dr(t).left()+lr(t)},Mr=function(t){return Dr(t).left()},Br=function(t,e){return Pr(t,Mr(e))},Hr=function(t,e){return Pr(t,Or(e))},Wr=function(t){return Dr(t).top()},Ir=function(t,e,n){if(0===n.length)return[];var r=R.map(n.slice(1),function(e,n){return e.map(function(e){return t(n,e)})}),o=n[n.length-1].map(function(t){return e(n.length-1,t)});return r.concat([o])},Lr={delta:o.identity,positions:o.curry(Ir,function(t,e){return Ar(t,Wr(e))},function(t,e){return Ar(t,Wr(e)+sr(e))}),edge:Wr},zr={delta:o.identity,edge:Mr,positions:o.curry(Ir,Br,Hr)},Fr={height:Lr,rtl:{delta:function(t,e){return-t},edge:Or,positions:o.curry(Ir,Hr,Br)},ltr:zr},qr={ltr:Fr.ltr,rtl:Fr.rtl};function jr(t){var e=function(e){return t(e).isRtl()?qr.rtl:qr.ltr};return{delta:function(t,n){return e(n).delta(t,n)},edge:function(t){return e(t).edge(t)},positions:function(t,n){return e(n).positions(t,n)}}}var Ur={getGridSize:function(t){var e=Se(t);return Ee.generate(e).grid()}},Vr=function(t){var e=t,n=function(){return e};return{get:n,set:function(t){e=t},clone:function(){return Vr(n())}}},$r=function(t,e){return Yr(t,e,{validate:A.isFunction,label:"function"})},Yr=function(t,e,n){if(0===e.length)throw new Error("You must specify at least one required field.");return O.validateStrArr("required",e),O.checkDupes(e),function(r){var o=N.keys(r);R.forall(e,function(t){return R.contains(o,t)})||O.reqMessage(e,o),t(e,o);var i=R.filter(e,function(t){return!n.validate(r[t],t)});return i.length>0&&O.invalidTypeMessage(i,n.label),r}},Xr=o.noop,Kr={exactly:o.curry($r,function(t,e){var n=R.filter(e,function(e){return!R.contains(t,e)});n.length>0&&O.unsuppMessage(n)}),ensure:o.curry($r,Xr),ensureWith:o.curry(Yr,Xr)},Jr=function(t){var e=ae.has(t,"colspan")?parseInt(ae.get(t,"colspan"),10):1,n=ae.has(t,"rowspan")?parseInt(ae.get(t,"rowspan"),10):1;return{element:o.constant(t),colspan:o.constant(e),rowspan:o.constant(n)}},Gr=Kr.exactly(["cell","row","replace","gap"]),Zr=function(t,e){Gr(t);var n=Vr(l.none()),r=void 0!==e?e:Jr,o=function(e){return function(e){return t.cell(e)}(r(e))},i=function(t){var e=o(t);return n.get().isNone()&&n.set(l.some(e)),a=l.some({item:t,replacement:e}),e},a=l.none();return{getOrInit:function(t,e){return a.fold(function(){return i(t)},function(n){return e(t,n.item)?n.replacement:i(t)})},cursor:n.get}},Qr=function(t,e){return function(n){var r=Vr(l.none());Gr(n);var o=[],i=function(i){var a=n.replace(i,e,{scope:t});return o.push({item:i,sub:a}),r.get().isNone()&&r.set(l.some(a)),a};return{replaceOrInit:function(t,e){return function(t,e){return R.find(o,function(n){return e(n.item,t)})}(t,e).fold(function(){return i(t)},function(n){return e(t,n.item)?n.sub:i(t)})},cursor:r.get}}},to=function(t){Gr(t);var e=Vr(l.none());return{combine:function(n){return e.get().isNone()&&e.set(l.some(n)),function(){var e=t.cell({element:o.constant(n),colspan:o.constant(1),rowspan:o.constant(1)});return Be.remove(e,"width"),Be.remove(n,"width"),e}},cursor:e.get}},eo=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],no=function(t,e){var n=t.property().name(e);return R.contains(eo,n)},ro=function(t,e){return R.contains(["br","img","hr","input"],t.property().name(e))},oo=no,io=function(t,e){var n=t.property().name(e);return R.contains(["ol","ul"],n)},ao=ro,so=mn(),uo=function(t){return oo(so,t)},co=function(t){return io(so,t)},lo=function(t){return ao(so,t)},fo=function(t){var e,n=function(t){return"br"===ee.name(t)},r=function(t){return an.last(t).bind(function(e){var r,o=(r=e,$t.nextSibling(r).map(function(t){return!!uo(t)||(lo(t)?"img"!==ee.name(t):void 0)}).getOr(!1));return $t.parent(e).map(function(r){return!0===o||(i=r,"li"===ee.name(i)||ve.ancestor(i,co).isSome())||n(e)||uo(r)&&!It.eq(t,r)?[]:[j.fromTag("br")];var i})}).getOr([])},o=0===(e=R.bind(t,function(t){var e=$t.children(t);return function(t){return R.forall(t,function(t){return n(t)||ee.isText(t)&&0===Qe.get(t).trim().length})}(e)?[]:e.concat(r(t))})).length?[j.fromTag("br")]:e;Fe.empty(t[0]),Le.append(t[0],o)},ho=function(t){return function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<e.length;o++){var i=e[o];for(var a in i)i.hasOwnProperty(a)&&(r[a]=t(r[a],i[a]))}return r}},mo=ho(function(t,e){return A.isObject(t)&&A.isObject(e)?mo(t,e):e}),go=ho(function(t,e){return e}),po={deepMerge:mo,merge:go},vo=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},bo=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return l.none()},yo=function(t,e){return F.rowcells(e,t.section())},wo=function(t,e){return t.cells()[e]},xo={addCell:function(t,e,n){var r=t.cells(),o=r.slice(0,e),i=r.slice(e),a=o.concat([n]).concat(i);return yo(t,a)},setCells:yo,mutateCell:function(t,e,n){t.cells()[e]=n},getCell:wo,getCellElement:function(t,e){return wo(t,e).element()},mapCells:function(t,e){var n=t.cells(),r=R.map(n,e);return F.rowcells(r,t.section())},cellLength:function(t){return t.cells().length}},Co=function(t,e){if(0===t.length)return 0;var n=t[0];return R.findIndex(t,function(t){return!e(n.element(),t.element())}).fold(function(){return t.length},function(t){return t})},Ro=function(t,e,n,r){var i=function(t,e){return t[e]}(t,e).cells().slice(n),a=Co(i,r),s=function(t,e){return R.map(t,function(t){return xo.getCell(t,e)})}(t,n).slice(e),u=Co(s,r);return{colspan:o.constant(a),rowspan:o.constant(u)}},So=function(t,e){var n=R.map(t,function(t,e){return R.map(t.cells(),function(t,e){return!1})});return R.map(t,function(r,o){var i=R.bind(r.cells(),function(r,i){if(!1===n[o][i]){var a=Ro(t,o,i,e);return function(t,e,r,o){for(var i=t;i<t+r;i++)for(var a=e;a<e+o;a++)n[i][a]=!0}(o,i,a.rowspan(),a.colspan()),[F.detailnew(r.element(),a.rowspan(),a.colspan(),r.isNew())]}return[]});return F.rowdetails(i,r.section())})},ko=function(t,e,n){for(var r=[],o=0;o<t.grid().rows();o++){for(var i=[],a=0;a<t.grid().columns();a++){var s=Ee.getAt(t,o,a).map(function(t){return F.elementnew(t.element(),n)}).getOrThunk(function(){return F.elementnew(e.gap(),!0)});i.push(s)}var u=F.rowcells(i,t.all()[o].section());r.push(u)}return r},_o=function(t,e,n,r){n===r?ae.remove(t,e):ae.set(t,e,n)},To=function(t,e){var n=[],r=[],i=function(e,o){e.length>0?function(e,o){var i=ye.child(t,o).getOrThunk(function(){var e=j.fromTag(o,$t.owner(t).dom());return Ie.append(t,e),e});Fe.empty(i);var a=R.map(e,function(t){t.isNew()&&n.push(t.element());var e=t.element();return Fe.empty(e),R.each(t.cells(),function(t){t.isNew()&&r.push(t.element()),_o(t.element(),"colspan",t.colspan(),1),_o(t.element(),"rowspan",t.rowspan(),1),Ie.append(e,t.element())}),e});Le.append(i,a)}(e,o):function(e){ye.child(t,e).bind(Fe.remove)}(o)},a=[],s=[],u=[];return R.each(e,function(t){switch(t.section()){case"thead":a.push(t);break;case"tbody":s.push(t);break;case"tfoot":u.push(t)}}),i(a,"thead"),i(s,"tbody"),i(u,"tfoot"),{newRows:o.constant(n),newCells:o.constant(r)}},Eo=function(t){return R.map(t,function(t){var e=Ke(t.element());return R.each(t.cells(),function(t){var n=Je(t.element());_o(n,"colspan",t.colspan(),1),_o(n,"rowspan",t.rowspan(),1),Ie.append(e,n)}),e})},No=function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},Do=function(t,e){for(var n=[],r=t;r<e;r++)n.push(r);return n},Ao=function(t,e){if(e<0||e>=t.length-1)return l.none();var n=t[e].fold(function(){var n=R.reverse(t.slice(0,e));return bo(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return l.some({value:t,delta:0})}),r=t[e+1].fold(function(){var n=t.slice(e+1);return bo(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return l.some({value:t,delta:1})});return n.bind(function(t){return r.map(function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n})})},Po=function(t,e,n){var r=t();return R.find(r,e).orThunk(function(){return l.from(r[0]).orThunk(n)}).map(function(t){return t.element()})},Oo=function(t){var e=t.grid(),n=Do(0,e.columns()),r=Do(0,e.rows());return R.map(n,function(e){return Po(function(){return R.bind(r,function(n){return Ee.getAt(t,n,e).filter(function(t){return t.column()===e}).fold(o.constant([]),function(t){return[t]})})},function(t){return 1===t.colspan()},function(){return Ee.getAt(t,0,e)})})},Mo=function(t){var e=t.grid(),n=Do(0,e.rows()),r=Do(0,e.columns());return R.map(n,function(e){return Po(function(){return R.bind(r,function(n){return Ee.getAt(t,e,n).filter(function(t){return t.row()===e}).fold(o.constant([]),function(t){return[t]})})},function(t){return 1===t.rowspan()},function(){return Ee.getAt(t,e,0)})})},Bo=function(t,e,n,r,o){var i=j.fromTag("div");return Be.setAll(i,{position:"absolute",left:e-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),ae.setAll(i,{"data-column":t,role:"presentation"}),i},Ho=function(t,e,n,r,o){var i=j.fromTag("div");return Be.setAll(i,{position:"absolute",left:e+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),ae.setAll(i,{"data-row":t,role:"presentation"}),i},Wo=function(t){var e=t.replace(/\./g,"-");return{resolve:function(t){return e+"-"+t}}},Io={resolve:Wo("ephox-snooker").resolve},Lo=function(t,e){var n=ae.get(t,e);return void 0===n||""===n?[]:n.split(" ")},zo=Lo,Fo=function(t,e,n){var r=Lo(t,e).concat([n]);ae.set(t,e,r.join(" "))},qo=function(t,e,n){var r=R.filter(Lo(t,e),function(t){return t!==n});r.length>0?ae.set(t,e,r.join(" ")):ae.remove(t,e)},jo=function(t){return zo(t,"class")},Uo=function(t,e){return Fo(t,"class",e)},Vo=function(t,e){return qo(t,"class",e)},$o=jo,Yo=Uo,Xo=Vo,Ko=function(t,e){R.contains(jo(t),e)?Vo(t,e):Uo(t,e)},Jo=function(t){return void 0!==t.dom().classList},Go=function(t,e){return Jo(t)&&t.dom().classList.contains(e)},Zo={add:function(t,e){Jo(t)?t.dom().classList.add(e):Yo(t,e)},remove:function(t,e){Jo(t)?t.dom().classList.remove(e):Xo(t,e),function(t){0===(Jo(t)?t.dom().classList:$o(t)).length&&ae.remove(t,"class")}(t)},toggle:function(t,e){return Jo(t)?t.dom().classList.toggle(e):Ko(t,e)},toggler:function(t,e){var n=Jo(t),r=t.dom().classList;return function(t,e,n){var r=n||!1,o=function(){e(),r=!0},i=function(){t(),r=!1};return{on:o,off:i,toggle:function(){(r?i:o)()},isOn:function(){return r}}}(function(){n?r.remove(e):Xo(t,e)},function(){n?r.add(e):Yo(t,e)},Go(t,e))},has:Go},Qo=Io.resolve("resizer-bar"),ti=Io.resolve("resizer-rows"),ei=Io.resolve("resizer-cols"),ni=function(t){var e=de.descendants(t.parent(),"."+Qo);R.each(e,Fe.remove)},ri=function(t,e,n){var r=t.origin();R.each(e,function(e,o){e.each(function(e){var o=n(r,e);Zo.add(o,Qo),Ie.append(t.parent(),o)})})},oi=function(t,e,n,r,o,i){var a=Dr(e);!function(t,e,n,r){ri(t,e,function(t,e){var o=Ho(e.row(),n.left()-t.left(),e.y()-t.top(),r,7);return Zo.add(o,ti),o})}(t,n.length>0?o.positions(n,e):[],a,lr(e)),function(t,e,n,r){ri(t,e,function(t,e){var o=Bo(e.col(),e.x()-t.left(),n.top()-t.top(),7,r);return Zo.add(o,ei),o})}(t,r.length>0?i.positions(r,e):[],a,sr(e))},ii=function(t,e){var n=de.descendants(t.parent(),"."+Qo);R.each(n,e)},ai={refresh:function(t,e,n,r){ni(t);var o=Se(e),i=Ee.generate(o),a=Mo(i),s=Oo(i);oi(t,e,a,s,n,r)},hide:function(t){ii(t,function(t){Be.set(t,"display","none")})},show:function(t){ii(t,function(t){Be.set(t,"display","block")})},destroy:ni,isRowBar:function(t){return Zo.has(t,ti)},isColBar:function(t){return Zo.has(t,ei)}},si=function(t,e){return R.map(t,function(t){var n=function(t){return bo(t,function(t){return $t.parent(t.element()).map(function(t){var e=$t.parent(t).isNone();return F.elementnew(t,e)})}).getOrThunk(function(){return F.elementnew(e.row(),!0)})}(t.details());return F.rowdatanew(n.element(),t.details(),t.section(),n.isNew())})},ui=function(t,e){var n=So(t,It.eq);return si(n,e)},ci=function(t,e){var n=R.flatten(R.map(t.all(),function(t){return t.cells()}));return R.find(n,function(t){return It.eq(e,t.element())})},li=function(t,e,n,r,i){return function(a,s,u,c,f){var d=Se(s),h=Ee.generate(d);return e(h,u).map(function(e){var n=function(t,e){return ko(t,e,!1)}(h,c),r=t(n,e,It.eq,i(c)),a=ui(r.grid(),c);return{grid:o.constant(a),cursor:r.cursor}}).fold(function(){return l.none()},function(t){var e=To(s,t.grid());return n(s,t.grid(),f),r(s),ai.refresh(a,s,Fr.height,f),l.some({cursor:t.cursor,newRows:e.newRows,newCells:e.newCells})})}},fi=ui,di=function(t,e){return Re.cell(e.element()).bind(function(e){return ci(t,e)})},hi=function(t,e){var n=R.map(e.selection(),function(e){return Re.cell(e).bind(function(e){return ci(t,e)})}),r=vo(n);return r.length>0?l.some(r):l.none()},mi=function(t,e){return Re.cell(e.element()).bind(function(n){return ci(t,n).map(function(t){return po.merge(t,{generators:e.generators,clipboard:e.clipboard})})})},gi=function(t,e){var n=R.map(e.selection(),function(e){return Re.cell(e).bind(function(e){return ci(t,e)})}),r=vo(n);return r.length>0?l.some(po.merge({cells:r},{generators:e.generators,clipboard:e.clipboard})):l.none()},pi=function(t,e){return e.mergable()},vi=function(t,e){return e.unmergable()},bi=function(t){return{is:function(e){return t===e},isValue:o.always,isError:o.never,getOr:o.constant(t),getOrThunk:o.constant(t),getOrDie:o.constant(t),or:function(e){return bi(t)},orThunk:function(e){return bi(t)},fold:function(e,n){return n(t)},map:function(e){return bi(e(t))},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOption:function(){return l.some(t)}}},yi=function(t){return{is:o.never,isValue:o.never,isError:o.always,getOr:o.identity,getOrThunk:function(t){return t()},getOrDie:function(){return o.die(t)()},or:function(t){return t},orThunk:function(t){return t()},fold:function(e,n){return e(t)},map:function(e){return yi(t)},each:o.noop,bind:function(e){return yi(t)},exists:o.never,forall:o.always,toOption:l.none}},wi={value:bi,error:yi},xi=function(t,e){return R.map(t,function(){return F.elementnew(e.cell(),!0)})},Ci=function(t,e,n){return t.concat(No(e,function(e){return xo.setCells(t[t.length-1],xi(t[t.length-1].cells(),n))}))},Ri=function(t,e,n){return R.map(t,function(t){return xo.setCells(t,t.cells().concat(xi(Do(0,e),n)))})},Si=function(t,e,n){if(t.row()>=e.length||t.column()>xo.cellLength(e[0]))return wi.error("invalid start address out of table bounds, row: "+t.row()+", column: "+t.column());var r=e.slice(t.row()),i=r[0].cells().slice(t.column()),a=xo.cellLength(n[0]),s=n.length;return wi.value({rowDelta:o.constant(r.length-s),colDelta:o.constant(i.length-a)})},ki=function(t,e){var n=xo.cellLength(t[0]),r=xo.cellLength(e[0]);return{rowDelta:o.constant(0),colDelta:o.constant(n-r)}},_i=function(t,e,n){var r=e.colDelta()<0?Ri:o.identity;return(e.rowDelta()<0?Ci:o.identity)(r(t,Math.abs(e.colDelta()),n),Math.abs(e.rowDelta()),n)},Ti=function(t,e,n,r){if(0===t.length)return t;for(var o=e.startRow();o<=e.finishRow();o++)for(var i=e.startCol();i<=e.finishCol();i++)xo.mutateCell(t[o],i,F.elementnew(r(),!1));return t},Ei=function(t,e,n,r){for(var o=!0,i=0;i<t.length;i++)for(var a=0;a<xo.cellLength(t[0]);a++){var s=n(xo.getCellElement(t[i],a),e);!0===s&&!1===o?xo.mutateCell(t[i],a,F.elementnew(r(),!0)):!0===s&&(o=!1)}return t},Ni=function(t,e,n,r){if(e>0&&e<t.length){var o=function(t,e){return R.foldl(t,function(t,n){return R.exists(t,function(t){return e(t.element(),n.element())})?t:t.concat([n])},[])}(t[e-1].cells(),n);R.each(o,function(o){for(var i=l.none(),a=e;a<t.length;a++)for(var s=0;s<xo.cellLength(t[0]);s++){var u=t[a].cells()[s];n(u.element(),o.element())&&(i.isNone()&&(i=l.some(r())),i.each(function(e){xo.mutateCell(t[a],s,F.elementnew(e,!0))}))}})}return t},Di=function(t,e,n,r){var i=xo.getCell(t[e],n),a=o.curry(r,i.element()),s=t[e];return t.length>1&&xo.cellLength(s)>1&&(n>0&&a(xo.getCellElement(s,n-1))||n<s.length-1&&a(xo.getCellElement(s,n+1))||e>0&&a(xo.getCellElement(t[e-1],n))||e<t.length-1&&a(xo.getCellElement(t[e+1],n)))},Ai=function(t,e,n,r,o){return Si(t,e,n).map(function(i){var a=_i(e,i,r);return function(t,e,n,r,o){for(var i=t.row(),a=t.column(),s=i+n.length,u=a+xo.cellLength(n[0]),c=i;c<s;c++)for(var l=a;l<u;l++){Di(e,c,l,o)&&Ei(e,xo.getCellElement(e[c],l),o,r.cell);var f=xo.getCellElement(n[c-i],l-a),d=r.replace(f);xo.mutateCell(e[c],l,F.elementnew(d,!0))}return e}(t,a,n,r,o)})},Pi=function(t,e,n,r,o){Ni(e,t,o,r.cell);var i=ki(n,e),a=_i(n,i,r),s=ki(e,a),u=_i(e,s,r);return u.slice(0,t).concat(a).concat(u.slice(t,u.length))},Oi=function(t,e,n,r,o){var i=t.slice(0,e),a=t.slice(e),s=xo.mapCells(t[n],function(n,i){return e>0&&e<t.length&&r(xo.getCellElement(t[e-1],i),xo.getCellElement(t[e],i))?xo.getCell(t[e],i):F.elementnew(o(n.element(),r),!0)});return i.concat([s]).concat(a)},Mi=function(t,e,n,r,o){return R.map(t,function(t){var i=e>0&&e<xo.cellLength(t)&&r(xo.getCellElement(t,e-1),xo.getCellElement(t,e))?xo.getCell(t,e):F.elementnew(o(xo.getCellElement(t,n),r),!0);return xo.addCell(t,e,i)})},Bi=function(t,e,n,r,o){var i=n+1;return R.map(t,function(t,a){var s=a===e?F.elementnew(o(xo.getCellElement(t,n),r),!0):xo.getCell(t,n);return xo.addCell(t,i,s)})},Hi=function(t,e,n,r,o){var i=e+1,a=t.slice(0,i),s=t.slice(i),u=xo.mapCells(t[e],function(t,e){return e===n?F.elementnew(o(t.element(),r),!0):t});return a.concat([u]).concat(s)},Wi=function(t,e,n){return t.slice(0,e).concat(t.slice(n+1))},Ii=function(t,e,n){var r=R.map(t,function(t){var r=t.cells().slice(0,e).concat(t.cells().slice(n+1));return F.rowcells(r,t.section())});return R.filter(r,function(t){return t.cells().length>0})},Li=function(t,e,n,r){return R.map(t,function(t){return xo.mapCells(t,function(t){return function(t){return R.exists(e,function(e){return n(t.element(),e.element())})}(t)?F.elementnew(r(t.element(),n),!0):t})})},zi=function(t,e,n,r){return void 0!==xo.getCellElement(t[e],n)&&e>0&&r(xo.getCellElement(t[e-1],n),xo.getCellElement(t[e],n))},Fi=function(t,e,n){return e>0&&n(xo.getCellElement(t,e-1),xo.getCellElement(t,e))},qi=function(t,e,n,r){var o=R.bind(t,function(r,o){return zi(t,o,e,n)||Fi(r,e,n)?[]:[xo.getCell(r,e)]});return Li(t,o,n,r)},ji=function(t,e,n,r){var o=t[e],i=R.bind(o.cells(),function(r,i){return zi(t,e,i,n)||Fi(o,i,n)?[]:[r]});return Li(t,i,n,r)},Ui=function(t){return{fold:t}},Vi=function(){return Ui(function(t,e,n,r,o){return t()})},$i=function(t){return Ui(function(e,n,r,o,i){return n(t)})},Yi=function(t,e){return Ui(function(n,r,o,i,a){return o(t,e)})},Xi=function(t,e,n){return Ui(function(r,o,i,a,s){return a(t,e,n)})},Ki=function(t,e){return Ui(function(n,r,o,i,a){return a(t,e)})},Ji=function(t,e,n,r){var i=t.slice(0),a=function(t,e){return 0===t.length?Vi():1===t.length?$i(0):0===e?Yi(0,1):e===t.length-1?Ki(e-1,e):e>0&&e<t.length-1?Xi(e-1,e,e+1):Vi()}(t,e),s=function(t){return R.map(t,o.constant(0))},u=o.constant(s(i)),c=function(t,e){if(n>=0){var o=Math.max(r.minCellWidth(),i[e]-n);return s(i.slice(0,t)).concat([n,o-i[e]]).concat(s(i.slice(e+1)))}var a=Math.max(r.minCellWidth(),i[t]+n),u=i[t]-a;return s(i.slice(0,t)).concat([a-i[t],u]).concat(s(i.slice(e+1)))},l=c;return a.fold(u,function(t){return r.singleColumnWidth(i[t],n)},l,function(t,e,n){return c(e,n)},function(t,e){if(n>=0)return s(i.slice(0,e)).concat([n]);var o=Math.max(r.minCellWidth(),i[e]+n);return s(i.slice(0,e)).concat([o-i[e]])})},Gi=function(t,e){return ae.has(t,e)&&parseInt(ae.get(t,e),10)>1},Zi={hasColspan:function(t){return Gi(t,"colspan")},hasRowspan:function(t){return Gi(t,"rowspan")},minWidth:o.constant(10),minHeight:o.constant(10),getInt:function(t,e){return parseInt(Be.get(t,e),10)}},Qi=function(t,e,n){return Be.getRaw(t,e).fold(function(){return n(t)+"px"},function(t){return t})},ta=function(t){return Qi(t,"width",Rr.getPixelWidth)},ea=function(t){return Qi(t,"height",Rr.getHeight)},na=function(t,e,n,r,i){var a=Oo(t),s=R.map(a,function(t){return t.map(e.edge)});return R.map(a,function(t,e){return t.filter(o.not(Zi.hasColspan)).fold(function(){var t=Ao(s,e);return r(t)},function(t){return n(t,i)})})},ra=function(t){return t.map(function(t){return t+"px"}).getOr("")},oa=function(t,e,n,r){var i=Mo(t),a=R.map(i,function(t){return t.map(e.edge)});return R.map(i,function(t,e){return t.filter(o.not(Zi.hasRowspan)).fold(function(){var t=Ao(a,e);return r(t)},function(t){return n(t)})})},ia={getRawWidths:function(t,e){return na(t,e,ta,ra)},getPixelWidths:function(t,e,n){return na(t,e,Rr.getPixelWidth,function(t){return t.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(t,e,n){return na(t,e,Rr.getPercentageWidth,function(t){return t.fold(function(){return n.minCellWidth()},function(t){return t/n.pixelWidth()*100})},n)},getPixelHeights:function(t,e){return oa(t,e,Rr.getHeight,function(t){return t.getOrThunk(Zi.minHeight)})},getRawHeights:function(t,e){return oa(t,e,ea,ra)}},aa=function(t,e,n){for(var r=0,o=t;o<e;o++)r+=void 0!==n[o]?n[o]:0;return r},sa=function(t,e){var n=Ee.justCells(t);return R.map(n,function(t){var n=aa(t.column(),t.column()+t.colspan(),e);return{element:t.element,width:o.constant(n),colspan:t.colspan}})},ua=function(t,e){var n=Ee.justCells(t);return R.map(n,function(t){var n=aa(t.row(),t.row()+t.rowspan(),e);return{element:t.element,height:o.constant(n),rowspan:t.rowspan}})},ca=function(t,e){return R.map(t.all(),function(t,n){return{element:t.element,height:o.constant(e[n])}})},la=function(t){var e=parseInt(t,10),n=o.identity;return{width:o.constant(e),pixelWidth:o.constant(e),getWidths:ia.getPixelWidths,getCellDelta:n,singleColumnWidth:function(t,e){return[Math.max(Zi.minWidth(),t+e)-t]},minCellWidth:Zi.minWidth,setElementWidth:Rr.setPixelWidth,setTableWidth:function(t,e,n){var r=R.foldr(e,function(t,e){return t+e},0);Rr.setPixelWidth(t,r)}}},fa=function(t,e){if(Rr.percentageBasedSizeRegex().test(e))return function(t,e){var n=parseFloat(t),r=cr(e);return{width:o.constant(n),pixelWidth:o.constant(r),getWidths:ia.getPercentageWidths,getCellDelta:function(t){return t/r*100},singleColumnWidth:function(t,e){return[100-t]},minCellWidth:function(){return Zi.minWidth()/r*100},setElementWidth:Rr.setPercentageWidth,setTableWidth:function(t,e,r){var o=n+r;Rr.setPercentageWidth(t,o)}}}(Rr.percentageBasedSizeRegex().exec(e)[1],t);if(Rr.pixelBasedSizeRegex().test(e)){var n=Rr.pixelBasedSizeRegex().exec(e);return la(n[1])}var r=cr(t);return la(r)},da=function(t){return Rr.getRawWidth(t).fold(function(){var e=cr(t);return la(e)},function(e){return fa(t,e)})},ha=function(t){return Ee.generate(t)},ma=function(t){var e=Se(t);return ha(e)},ga={adjustWidth:function(t,e,n,r){var o=da(t),i=o.getCellDelta(e),a=ma(t),s=o.getWidths(a,r,o),u=Ji(s,n,i,o),c=R.map(u,function(t,e){return t+s[e]}),l=sa(a,c);R.each(l,function(t){o.setElementWidth(t.element(),t.width())}),n===a.grid().columns()-1&&o.setTableWidth(t,c,i)},adjustHeight:function(t,e,n,r){var o=ma(t),i=ia.getPixelHeights(o,r),a=R.map(i,function(t,r){return n===r?Math.max(e+t,Zi.minHeight()):t}),s=ua(o,a),u=ca(o,a);R.each(u,function(t){Rr.setHeight(t.element(),t.height())}),R.each(s,function(t){Rr.setHeight(t.element(),t.height())});var c,l=(c=a,R.foldr(c,function(t,e){return t+e},0));Rr.setHeight(t,l)},adjustWidthTo:function(t,e,n){var r=da(t),o=ha(e),i=r.getWidths(o,n,r),a=sa(o,i);R.each(a,function(t){r.setElementWidth(t.element(),t.width())});var s=R.foldr(i,function(t,e){return e+t},0);a.length>0&&r.setElementWidth(t,s)}},pa=function(t){0===Re.cells(t).length&&Fe.remove(t)},va=M.immutable("grid","cursor"),ba=function(t,e,n){return ya(t,e,n).orThunk(function(){return ya(t,0,0)})},ya=function(t,e,n){return l.from(t[e]).bind(function(t){return l.from(t.cells()[n]).bind(function(t){return l.from(t.element())})})},wa=function(t,e,n){return va(t,ya(t,e,n))},xa=function(t){return R.foldl(t,function(t,e){return R.exists(t,function(t){return t.row()===e.row()})?t:t.concat([e])},[]).sort(function(t,e){return t.row()-e.row()})},Ca=function(t){return R.foldl(t,function(t,e){return R.exists(t,function(t){return t.column()===e.column()})?t:t.concat([e])},[]).sort(function(t,e){return t.column()-e.column()})},Ra=function(t,e,n){var r=ke(t,n),o=Ee.generate(r);return ko(o,e,!0)},Sa=ga.adjustWidthTo,ka={insertRowBefore:li(function(t,e,n,r){var o=e.row(),i=e.row(),a=Oi(t,i,o,n,r.getOrInit);return wa(a,i,e.column())},di,o.noop,o.noop,Zr),insertRowsBefore:li(function(t,e,n,r){var o=e[0].row(),i=e[0].row(),a=xa(e),s=R.foldl(a,function(t,e){return Oi(t,i,o,n,r.getOrInit)},t);return wa(s,i,e[0].column())},hi,o.noop,o.noop,Zr),insertRowAfter:li(function(t,e,n,r){var o=e.row(),i=e.row()+e.rowspan(),a=Oi(t,i,o,n,r.getOrInit);return wa(a,i,e.column())},di,o.noop,o.noop,Zr),insertRowsAfter:li(function(t,e,n,r){var o=xa(e),i=o[o.length-1].row(),a=o[o.length-1].row()+o[o.length-1].rowspan(),s=R.foldl(o,function(t,e){return Oi(t,a,i,n,r.getOrInit)},t);return wa(s,a,e[0].column())},hi,o.noop,o.noop,Zr),insertColumnBefore:li(function(t,e,n,r){var o=e.column(),i=e.column(),a=Mi(t,i,o,n,r.getOrInit);return wa(a,e.row(),i)},di,Sa,o.noop,Zr),insertColumnsBefore:li(function(t,e,n,r){var o=Ca(e),i=o[0].column(),a=o[0].column(),s=R.foldl(o,function(t,e){return Mi(t,a,i,n,r.getOrInit)},t);return wa(s,e[0].row(),a)},hi,Sa,o.noop,Zr),insertColumnAfter:li(function(t,e,n,r){var o=e.column(),i=e.column()+e.colspan(),a=Mi(t,i,o,n,r.getOrInit);return wa(a,e.row(),i)},di,Sa,o.noop,Zr),insertColumnsAfter:li(function(t,e,n,r){var o=e[e.length-1].column(),i=e[e.length-1].column()+e[e.length-1].colspan(),a=Ca(e),s=R.foldl(a,function(t,e){return Mi(t,i,o,n,r.getOrInit)},t);return wa(s,e[0].row(),i)},hi,Sa,o.noop,Zr),splitCellIntoColumns:li(function(t,e,n,r){var o=Bi(t,e.row(),e.column(),n,r.getOrInit);return wa(o,e.row(),e.column())},di,Sa,o.noop,Zr),splitCellIntoRows:li(function(t,e,n,r){var o=Hi(t,e.row(),e.column(),n,r.getOrInit);return wa(o,e.row(),e.column())},di,o.noop,o.noop,Zr),eraseColumns:li(function(t,e,n,r){var o=Ca(e),i=Ii(t,o[0].column(),o[o.length-1].column()),a=ba(i,e[0].row(),e[0].column());return va(i,a)},hi,Sa,pa,Zr),eraseRows:li(function(t,e,n,r){var o=xa(e),i=Wi(t,o[0].row(),o[o.length-1].row()),a=ba(i,e[0].row(),e[0].column());return va(i,a)},hi,o.noop,pa,Zr),makeColumnHeader:li(function(t,e,n,r){var o=qi(t,e.column(),n,r.replaceOrInit);return wa(o,e.row(),e.column())},di,o.noop,o.noop,Qr("row","th")),unmakeColumnHeader:li(function(t,e,n,r){var o=qi(t,e.column(),n,r.replaceOrInit);return wa(o,e.row(),e.column())},di,o.noop,o.noop,Qr(null,"td")),makeRowHeader:li(function(t,e,n,r){var o=ji(t,e.row(),n,r.replaceOrInit);return wa(o,e.row(),e.column())},di,o.noop,o.noop,Qr("col","th")),unmakeRowHeader:li(function(t,e,n,r){var o=ji(t,e.row(),n,r.replaceOrInit);return wa(o,e.row(),e.column())},di,o.noop,o.noop,Qr(null,"td")),mergeCells:li(function(t,e,n,r){var i=e.cells();fo(i);var a=Ti(t,e.bounds(),n,o.constant(i[0]));return va(a,l.from(i[0]))},pi,o.noop,o.noop,to),unmergeCells:li(function(t,e,n,r){var o=R.foldr(e,function(t,e){return Ei(t,e,n,r.combine(e))},t);return va(o,l.from(e[0]))},vi,Sa,o.noop,to),pasteCells:li(function(t,e,n,r){var o,i,a,s,u=(o=e.clipboard(),i=e.generators(),a=Se(o),s=Ee.generate(a),ko(s,i,!0)),c=F.address(e.row(),e.column());return Ai(c,t,u,e.generators(),n).fold(function(){return va(t,l.some(e.element()))},function(t){var n=ba(t,e.row(),e.column());return va(t,n)})},mi,Sa,o.noop,Zr),pasteRowsBefore:li(function(t,e,n,r){var o=t[e.cells[0].row()],i=e.cells[0].row(),a=Ra(e.clipboard(),e.generators(),o),s=Pi(i,t,a,e.generators(),n),u=ba(s,e.cells[0].row(),e.cells[0].column());return va(s,u)},gi,o.noop,o.noop,Zr),pasteRowsAfter:li(function(t,e,n,r){var o=t[e.cells[0].row()],i=e.cells[e.cells.length-1].row()+e.cells[e.cells.length-1].rowspan(),a=Ra(e.clipboard(),e.generators(),o),s=Pi(i,t,a,e.generators(),n),u=ba(s,e.cells[0].row(),e.cells[0].column());return va(s,u)},gi,o.noop,o.noop,Zr)},_a=function(t){return j.fromDom(t.getBody())},Ta={getBody:_a,getIsRoot:function(t){return function(e){return It.eq(e,_a(t))}},addSizeSuffix:function(t){return/^[0-9]+$/.test(t)&&(t+="px"),t},removePxSuffix:function(t){return t?t.replace(/px$/,""):""}},Ea=function(t){return"rtl"===Be.get(t,"direction")?"rtl":"ltr"},Na={onDirection:function(t,e){return function(n){return"rtl"===Ea(n)?e:t}},getDirection:Ea},Da={isRtl:o.constant(!1)},Aa={isRtl:o.constant(!0)},Pa={directionAt:function(t){return"rtl"===Na.getDirection(t)?Aa:Da}},Oa=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Ma={"border-collapse":"collapse",width:"100%"},Ba={border:"1"},Ha=function(t){return t.getParam("table_default_styles",Ma,"object")},Wa=function(t){return t.getParam("table_resize_bars",!0,"boolean")},Ia=function(t){return t.getParam("table_tab_navigation",!0,"boolean")},La=function(t){return t.getParam("forced_root_block","p","string")},za=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},Fa=function(t){return t.getParam("table_row_advtab",!0,"boolean")},qa=function(t){return t.getParam("table_advtab",!0,"boolean")},ja=function(t){return t.getParam("table_style_by_css",!1,"boolean")},Ua=function(t){return t.getParam("forced_block_attrs",{},"object")},Va=function(t){return t.getParam("table_cell_class_list",[],"array")},$a=function(t){return t.getParam("table_row_class_list",[],"array")},Ya=function(t){return t.getParam("table_class_list",[],"array")},Xa=function(t){return!1===t.getParam("table_responsive_width")},Ka=function(t){var e=t.getParam("table_clone_elements");return A.isString(e)?l.some(e.split(/[ ,]/)):Array.isArray(e)?l.some(e):l.none()},Ja=function(t){var e=t.getParam("object_resizing",!0);return"table"===e||e},Ga=function(t,e){return t.fire("newrow",{node:e})},Za=function(t,e){return t.fire("newcell",{node:e})},Qa=function(t,e,n){var r=Se(t),o=Ee.generate(r);return hi(o,e).map(function(t){var e=ko(o,n,!1).slice(t[0].row(),t[t.length-1].row()+t[t.length-1].rowspan()),r=fi(e,n);return Eo(r)})},ts=tinymce.util.Tools.resolve("tinymce.util.Tools"),es={applyAlign:function(t,e,n){n&&t.formatter.apply("align"+n,{},e)},applyVAlign:function(t,e,n){n&&t.formatter.apply("valign"+n,{},e)},unApplyAlign:function(t,e){ts.each("left center right".split(" "),function(n){t.formatter.remove("align"+n,{},e)})},unApplyVAlign:function(t,e){ts.each("top middle bottom".split(" "),function(n){t.formatter.remove("valign"+n,{},e)})},getTDTHOverallStyle:function(t,e,n){var r;return r=function(e,r){for(var o=0;o<r.length;o++){var i=t.getStyle(r[o],n);if(void 0===e&&(e=i),e!==i)return""}return e}(r,t.select("td,th",e))}},ns=function(t,e){var n=t.dom,r=e.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);"style"===e.control.name()?(r.find("#borderStyle").value(i["border-style"]||"")[0].fire("select"),r.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),r.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change"),r.find("#width").value(i.width||"").fire("change"),r.find("#height").value(i.height||"").fire("change")):(i["border-style"]=o.borderStyle,i["border-color"]=o.borderColor,i["background-color"]=o.backgroundColor,i.width=o.width?Ta.addSizeSuffix(o.width):"",i.height=o.height?Ta.addSizeSuffix(o.height):""),r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))},rs={createStyleForm:function(t){var e=function(){var e=function(t){return t.getParam("color_picker_callback")}(t);if(e)return function(n){return e.call(t,function(t){n.control.value(t).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:o.curry(ns,t)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:o.curry(ns,t),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:e()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:e()}]}]}},buildListItems:function(t,e,n){var r=function(t,n){return n=n||[],ts.each(t,function(t){var o={text:t.text||t.title};t.menu?o.menu=r(t.menu):(o.value=t.value,e&&e(o)),n.push(o)}),n};return r(t,n||[])},updateStyleField:ns,extractAdvancedStyles:function(t,e){var n=t.parseStyle(t.getAttrib(e,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=t.serializeStyle(n),r}},os=function(t,e,n){var r,o=t.dom;function i(t,e,n){n&&o.setAttrib(t,e,n)}function a(t,e,n){n&&o.setStyle(t,e,n)}rs.updateStyleField(t,n),r=n.control.rootControl.toJSON(),t.undoManager.transact(function(){ts.each(e,function(n){var s,u;i(n,"scope",r.scope),1===e.length?i(n,"style",r.style):(s=n,u=r.style,s.style.cssText+=";"+u),i(n,"class",r.class),a(n,"width",Ta.addSizeSuffix(r.width)),a(n,"height",Ta.addSizeSuffix(r.height)),r.type&&n.nodeName.toLowerCase()!==r.type&&(n=o.rename(n,r.type)),1===e.length&&(es.unApplyAlign(t,n),es.unApplyVAlign(t,n)),r.align&&es.applyAlign(t,n,r.align),r.valign&&es.applyVAlign(t,n,r.valign)}),t.focus()})},is=function(t){var e,n,r,i=[];if(i=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),e=t.dom.getParent(t.selection.getStart(),"td,th"),!i.length&&e&&i.push(e),e=e||i[0]){n=i.length>1?{width:"",height:"",scope:"",class:"",align:"",style:"",type:e.nodeName.toLowerCase()}:function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class")};return r.type=e.nodeName.toLowerCase(),ts.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),ts.each("top middle bottom".split(" "),function(n){t.formatter.matchNode(e,"valign"+n)&&(r.valign=n)}),za(t)&&ts.extend(r,rs.extractAdvancedStyles(n,e)),r}(t,e),Va(t).length>0&&(r={name:"class",type:"listbox",label:"Class",values:rs.buildListItems(Va(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[e.value]})})})});var a={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:o.curry(rs.updateStyleField,t)},{label:"Height",name:"height",onchange:o.curry(rs.updateStyleField,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};za(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:a},rs.createStyleForm(t)],onsubmit:o.curry(os,t,i)}):t.windowManager.open({title:"Cell properties",data:n,body:a,onsubmit:o.curry(os,t,i)})}},as=function(t,e,n){var r=t.getParent(e,"table"),o=e.parentNode,i=t.select(n,r)[0];i||(i=t.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?t.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(e),o.hasChildNodes()||t.remove(o)};function ss(t,e,n){var r,o=t.dom;function i(t,e,n){n&&o.setAttrib(t,e,n)}rs.updateStyleField(t,n),r=n.control.rootControl.toJSON(),t.undoManager.transact(function(){ts.each(e,function(n){var a,s,u;i(n,"scope",r.scope),i(n,"style",r.style),i(n,"class",r.class),a=n,s="height",(u=Ta.addSizeSuffix(r.height))&&o.setStyle(a,s,u),r.type!==n.parentNode.nodeName.toLowerCase()&&as(t.dom,n,r.type),1===e.length&&es.unApplyAlign(t,n),r.align&&es.applyAlign(t,n,r.align)}),t.focus()})}var us=function(t){var e,n,r,i,a,s,u=t.dom,c=[];e=u.getParent(t.selection.getStart(),"table"),n=u.getParent(t.selection.getStart(),"td,th"),ts.each(e.rows,function(t){ts.each(t.cells,function(e){if(u.getAttrib(e,"data-mce-selected")||e===n)return c.push(t),!1})}),(r=c[0])&&(a=c.length>1?{height:"",scope:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:function(t,e){var n=t.dom,r={height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class")};return r.type=e.parentNode.nodeName.toLowerCase(),ts.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),Fa(t)&&ts.extend(r,rs.extractAdvancedStyles(n,e)),r}(t,r),$a(t).length>0&&(i={name:"class",type:"listbox",label:"Class",values:rs.buildListItems($a(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})})}),s={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},i]},Fa(t)?t.windowManager.open({title:"Row properties",data:a,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},rs.createStyleForm(t)],onsubmit:o.curry(ss,t,c)}):t.windowManager.open({title:"Row properties",data:a,body:s,onsubmit:o.curry(ss,t,c)}))},cs=tinymce.util.Tools.resolve("tinymce.Env"),ls={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},fs=function(t,e,n,r,o){void 0===o&&(o=ls);var i=j.fromTag("table");Be.setAll(i,o.styles),ae.setAll(i,o.attributes);var a=j.fromTag("tbody");Ie.append(i,a);for(var s=[],u=0;u<t;u++){for(var c=j.fromTag("tr"),l=0;l<e;l++){var f=u<n||l<r?j.fromTag("th"):j.fromTag("td");l<r&&ae.set(f,"scope","row"),u<n&&ae.set(f,"scope","col"),Ie.append(f,j.fromTag("br")),o.percentages&&Be.set(f,"width",100/e+"%"),Ie.append(c,f)}s.push(c)}return Le.append(a,s),i},ds=function(t){return t.dom().innerHTML},hs=function(t){var e=j.fromTag("div"),n=j.fromDom(t.dom().cloneNode(!0));return Ie.append(e,n),ds(e)},ms=function(t,e){t.selection.select(e.dom(),!0),t.selection.collapse(!0)},gs=function(t,e,n){var r,i=Ha(t),a={styles:i,attributes:function(t){return t.getParam("table_default_attributes",Ba,"object")}(t),percentages:(r=i.width,A.isString(r)&&-1!==r.indexOf("%")&&!Xa(t))},s=fs(n,e,0,0,a);ae.set(s,"data-mce-id","__mce");var u=hs(s);return t.insertContent(u),ye.descendant(Ta.getBody(t),'table[data-mce-id="__mce"]').map(function(e){return Xa(t)&&Be.set(e,"width",Be.get(e,"width")),ae.remove(e,"data-mce-id"),function(t,e){R.each(de.descendants(e,"tr"),function(e){Ga(t,e.dom()),R.each(de.descendants(e,"th,td"),function(e){Za(t,e.dom())})})}(t,e),function(t,e){ye.descendant(e,"td,th").each(o.curry(ms,t))}(t,e),e.dom()}).getOr(null)};function ps(t,e,n,r){if("TD"===e.tagName||"TH"===e.tagName)t.setStyle(e,n,r);else if(e.children)for(var o=0;o<e.children.length;o++)ps(t,e.children[o],n,r)}var vs=function(t,e,n){var r,o,i=t.dom;rs.updateStyleField(t,n),!1===(o=n.control.rootControl.toJSON()).class&&delete o.class,t.undoManager.transact(function(){e||(e=gs(t,o.cols||1,o.rows||1)),function(t,e,n){var r=t.dom,o={},i={};if(o.class=n.class,i.height=Ta.addSizeSuffix(n.height),r.getAttrib(e,"width")&&!ja(t)?o.width=Ta.removePxSuffix(n.width):i.width=Ta.addSizeSuffix(n.width),ja(t)?(i["border-width"]=Ta.addSizeSuffix(n.border),i["border-spacing"]=Ta.addSizeSuffix(n.cellspacing),ts.extend(o,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):ts.extend(o,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),ja(t)&&e.children)for(var a=0;a<e.children.length;a++)ps(r,e.children[a],{"border-width":Ta.addSizeSuffix(n.border),"border-color":n.borderColor,padding:Ta.addSizeSuffix(n.cellpadding)});n.style?ts.extend(i,r.parseStyle(n.style)):i=ts.extend({},r.parseStyle(r.getAttrib(e,"style")),i),o.style=r.serializeStyle(i),r.setAttribs(e,o)}(t,e,o),(r=i.select("caption",e)[0])&&!o.caption&&i.remove(r),!r&&o.caption&&((r=i.create("caption")).innerHTML=cs.ie?"Â ":'<br data-mce-bogus="1"/>',e.insertBefore(r,e.firstChild)),es.unApplyAlign(t,e),o.align&&es.applyAlign(t,e,o.align),t.focus(),t.addVisual()})},bs=function(t,e){var n,r,i,a,s,u=t.dom,c={};!0===e?(n=u.getParent(t.selection.getStart(),"table"))&&(c=function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),cellspacing:n.getStyle(e,"border-spacing")||n.getAttrib(e,"cellspacing"),cellpadding:n.getAttrib(e,"data-mce-cell-padding")||n.getAttrib(e,"cellpadding")||es.getTDTHOverallStyle(t.dom,e,"padding"),border:n.getAttrib(e,"data-mce-border")||n.getAttrib(e,"border")||es.getTDTHOverallStyle(t.dom,e,"border"),borderColor:n.getAttrib(e,"data-mce-border-color"),caption:!!n.select("caption",e)[0],class:n.getAttrib(e,"class")};return ts.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),qa(t)&&ts.extend(r,rs.extractAdvancedStyles(n,e)),r}(t,n)):(r={label:"Cols",name:"cols"},i={label:"Rows",name:"rows"}),Ya(t).length>0&&(c.class&&(c.class=c.class.replace(/\s*mce\-item\-table\s*/g,"")),a={name:"class",type:"listbox",label:"Class",values:rs.buildListItems(Ya(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})})}),s={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:function(t){return t.getParam("table_appearance_options",!0,"boolean")}(t)?[r,i,{label:"Width",name:"width",onchange:o.curry(rs.updateStyleField,t)},{label:"Height",name:"height",onchange:o.curry(rs.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,i,{label:"Width",name:"width",onchange:o.curry(rs.updateStyleField,t)},{label:"Height",name:"height",onchange:o.curry(rs.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},a]},qa(t)?t.windowManager.open({title:"Table properties",data:c,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},rs.createStyleForm(t)],onsubmit:o.curry(vs,t,n)}):t.windowManager.open({title:"Table properties",data:c,body:s,onsubmit:o.curry(vs,t,n)})},ys=ts.each,ws={registerCommands:function(t,e,n,r,i){var a=Ta.getIsRoot(t),s=function(){return j.fromDom(t.dom.getParent(t.selection.getStart(),"th,td"))},u=function(t){return Re.table(t,a)},c=function(e){var o=s();u(o).each(function(i){var a=nr.forMenu(r,i,o);e(i,a).each(function(e){t.selection.setRng(e),t.focus(),n.clear(i)})})},f=function(e){var n=s();return u(n).bind(function(e){var i=j.fromDom(t.getDoc()),a=nr.forMenu(r,e,n),s=fn.cellOperations(o.noop,i,l.none());return Qa(e,a,s)})},d=function(e){i.get().each(function(o){var i=R.map(o,function(t){return Je(t)}),a=s();u(a).bind(function(o){var s=j.fromDom(t.getDoc()),u=fn.paste(s),c=nr.pasteRows(r,o,a,i,u);e(o,c).each(function(e){t.selection.setRng(e),t.focus(),n.clear(o)})})})};ys({mceTableSplitCells:function(){c(e.unmergeCells)},mceTableMergeCells:function(){c(e.mergeCells)},mceTableInsertRowBefore:function(){c(e.insertRowsBefore)},mceTableInsertRowAfter:function(){c(e.insertRowsAfter)},mceTableInsertColBefore:function(){c(e.insertColumnsBefore)},mceTableInsertColAfter:function(){c(e.insertColumnsAfter)},mceTableDeleteCol:function(){c(e.deleteColumn)},mceTableDeleteRow:function(){c(e.deleteRow)},mceTableCutRow:function(t){i.set(f()),c(e.deleteRow)},mceTableCopyRow:function(t){i.set(f())},mceTablePasteRowBefore:function(t){d(e.pasteRowsBefore)},mceTablePasteRowAfter:function(t){d(e.pasteRowsAfter)},mceTableDelete:function(){var e=j.fromDom(t.dom.getParent(t.selection.getStart(),"th,td"));Re.table(e,a).filter(o.not(a)).each(function(e){var n=j.fromText("");Ie.after(e,n),Fe.remove(e);var r=t.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),t.selection.setRng(r)})}},function(e,n){t.addCommand(n,e)}),ys({mceInsertTable:o.curry(bs,t),mceTableProps:o.curry(bs,t,!0),mceTableRowProps:o.curry(us,t),mceTableCellProps:o.curry(is,t)},function(e,n){t.addCommand(n,function(t,n){e(n)})})}},xs={only:function(t){var e=l.from(t.dom().documentElement).map(j.fromDom).getOr(t);return{parent:o.constant(e),view:o.constant(t),origin:o.constant(Tr(0,0))}},detached:function(t,e){var n=o.curry(Dr,e);return{parent:o.constant(e),view:o.constant(t),origin:n}},body:function(t,e){return{parent:o.constant(e),view:o.constant(t),origin:o.constant(Tr(0,0))}}};function Cs(t){var e=M.immutable.apply(null,t),n=[];return{bind:function(t){if(void 0===t)throw"Event bind error: undefined handler";n.push(t)},unbind:function(t){n=R.filter(n,function(e){return e!==t})},trigger:function(){var t=e.apply(null,arguments);R.each(n,function(e){e(t)})}}}var Rs={create:function(t){return{registry:N.map(t,function(t){return{bind:t.bind,unbind:t.unbind}}),trigger:N.map(t,function(t){return t.trigger})}}},Ss={mode:Kr.exactly(["compare","extract","mutate","sink"]),sink:Kr.exactly(["element","start","stop","destroy"]),api:Kr.exactly(["forceDrop","drop","move","delayDrop"])},ks={resolve:Wo("ephox-dragster").resolve},_s=function(t,e){return function(n){if(t(n)){var r=j.fromDom(n.target),i=function(){n.stopPropagation()},a=function(){n.preventDefault()},s=o.compose(a,i),u=function(t,e,n,r,i,a,s){return{target:o.constant(t),x:o.constant(e),y:o.constant(n),stop:r,prevent:i,kill:a,raw:o.constant(s)}}(r,n.clientX,n.clientY,i,a,s,n);e(u)}}},Ts=function(t,e,n,r,i){var a=_s(n,r);return t.dom().addEventListener(e,a,i),{unbind:o.curry(Es,t,e,a,i)}},Es=function(t,e,n,r){t.dom().removeEventListener(e,n,r)},Ns=function(t,e,n,r){return Ts(t,e,n,r,!1)},Ds=function(t,e,n,r){return Ts(t,e,n,r,!0)},As=o.constant(!0),Ps={bind:function(t,e,n){return Ns(t,e,As,n)},capture:function(t,e,n){return Ds(t,e,As,n)}},Os=Ss.mode({compare:function(t,e){return Tr(e.left()-t.left(),e.top()-t.top())},extract:function(t){return l.some(Tr(t.x(),t.y()))},sink:function(t,e){var n=function(t){var e=po.merge({layerClass:ks.resolve("blocker")},t),n=j.fromTag("div");return ae.set(n,"role","presentation"),Be.setAll(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Zo.add(n,ks.resolve("blocker")),Zo.add(n,e.layerClass),{element:function(){return n},destroy:function(){Fe.remove(n)}}}(e),r=Ps.bind(n.element(),"mousedown",t.forceDrop),o=Ps.bind(n.element(),"mouseup",t.drop),i=Ps.bind(n.element(),"mousemove",t.move),a=Ps.bind(n.element(),"mouseout",t.delayDrop);return Ss.sink({element:n.element,start:function(t){Ie.append(t,n.element())},stop:function(){Fe.remove(n.element())},destroy:function(){n.destroy(),o.unbind(),i.unbind(),a.unbind(),r.unbind()}})},mutate:function(t,e){t.mutate(e.left(),e.top())}});function Ms(){var t=l.none(),e=Rs.create({move:Cs(["info"])});return{onEvent:function(n,r){r.extract(n).each(function(n){(function(e,n){var r=t.map(function(t){return e.compare(t,n)});return t=l.some(n),r})(r,n).each(function(t){e.trigger.move(t)})})},reset:function(){t=l.none()},events:e.registry}}function Bs(){var t={onEvent:function(t,e){},reset:o.noop},e=Ms(),n=t;return{on:function(){n.reset(),n=e},off:function(){n.reset(),n=t},isOn:function(){return n===e},onEvent:function(t,e){n.onEvent(t,e)},events:e.events}}var Hs=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){var r=arguments;null!==n&&clearTimeout(n),n=setTimeout(function(){t.apply(null,r),n=null,r=null},e)}}},Ws=function(t,e,n){var r=!1,o=Rs.create({start:Cs([]),stop:Cs([])}),i=Bs(),a=function(){c.stop(),i.isOn()&&(i.off(),o.trigger.stop())},s=Hs(a,200);i.events.move.bind(function(n){e.mutate(t,n.info())});var u=function(t){return function(){var e=Array.prototype.slice.call(arguments,0);if(r)return t.apply(null,e)}},c=e.sink(Ss.api({forceDrop:a,drop:u(a),move:u(function(t,n){s.cancel(),i.onEvent(t,e)}),delayDrop:u(s.throttle)}),n);return{element:c.element,go:function(t){c.start(t),i.on(),o.trigger.start()},on:function(){r=!0},off:function(){r=!1},destroy:function(){c.destroy()},events:o.registry}},Is={transform:function(t,e){var n=void 0!==e?e:{},r=void 0!==n.mode?n.mode:Os;return Ws(t,r,e)}};function Ls(){var t=Rs.create({drag:Cs(["xDelta","yDelta","target"])}),e=l.none(),n=function(){var t=Rs.create({drag:Cs(["xDelta","yDelta"])});return{mutate:function(e,n){t.trigger.drag(e,n)},events:t.registry}}();return n.events.drag.bind(function(n){e.each(function(e){t.trigger.drag(n.xDelta(),n.yDelta(),e)})}),{assign:function(t){e=l.some(t)},get:function(){return e},mutate:n.mutate,events:t.registry}}var zs={any:function(t){return ye.first(t).isSome()},ancestor:function(t,e,n){return ye.ancestor(t,e,n).isSome()},sibling:function(t,e){return ye.sibling(t,e).isSome()},child:function(t,e){return ye.child(t,e).isSome()},descendant:function(t,e){return ye.descendant(t,e).isSome()},closest:function(t,e,n){return ye.closest(t,e,n).isSome()}},Fs=Io.resolve("resizer-bar-dragging");function qs(t,e){var n=Fr.height,r=function(t,e,n){var r=Ls(),i=Is.transform(r,{}),a=l.none(),s=function(t,e){return l.from(ae.get(t,e))};r.events.drag.bind(function(t){s(t.target(),"data-row").each(function(e){var n=Zi.getInt(t.target(),"top");Be.set(t.target(),"top",n+t.yDelta()+"px")}),s(t.target(),"data-column").each(function(e){var n=Zi.getInt(t.target(),"left");Be.set(t.target(),"left",n+t.xDelta()+"px")})});var u=function(t,e){return Zi.getInt(t,e)-parseInt(ae.get(t,"data-initial-"+e),10)};i.events.stop.bind(function(){r.get().each(function(r){a.each(function(o){s(r,"data-row").each(function(t){var e=u(r,"top");ae.remove(r,"data-initial-top"),m.trigger.adjustHeight(o,e,parseInt(t,10))}),s(r,"data-column").each(function(t){var e=u(r,"left");ae.remove(r,"data-initial-left"),m.trigger.adjustWidth(o,e,parseInt(t,10))}),ai.refresh(t,o,n,e)})})});var c=function(e,n){m.trigger.startAdjust(),r.assign(e),ae.set(e,"data-initial-"+n,parseInt(Be.get(e,n),10)),Zo.add(e,Fs),Be.set(e,"opacity","0.2"),i.go(t.parent())},f=Ps.bind(t.parent(),"mousedown",function(t){ai.isRowBar(t.target())&&c(t.target(),"top"),ai.isColBar(t.target())&&c(t.target(),"left")}),d=function(e){return It.eq(e,t.view())},h=Ps.bind(t.view(),"mouseover",function(r){"table"===ee.name(r.target())||zs.ancestor(r.target(),"table",d)?(a="table"===ee.name(r.target())?l.some(r.target()):ye.ancestor(r.target(),"table",d)).each(function(r){ai.refresh(t,r,n,e)}):ce.inBody(r.target())&&ai.destroy(t)}),m=Rs.create({adjustHeight:Cs(["table","delta","row"]),adjustWidth:Cs(["table","delta","column"]),startAdjust:Cs([])});return{destroy:function(){f.unbind(),h.unbind(),i.destroy(),ai.destroy(t)},refresh:function(r){ai.refresh(t,r,n,e)},on:i.on,off:i.off,hideBars:o.curry(ai.hide,t),showBars:o.curry(ai.show,t),events:m.registry}}(t,e,n),i=Rs.create({beforeResize:Cs(["table"]),afterResize:Cs(["table"]),startDrag:Cs([])});return r.events.adjustHeight.bind(function(t){i.trigger.beforeResize(t.table());var e=n.delta(t.delta(),t.table());ga.adjustHeight(t.table(),e,t.row(),n),i.trigger.afterResize(t.table())}),r.events.startAdjust.bind(function(t){i.trigger.startDrag()}),r.events.adjustWidth.bind(function(t){i.trigger.beforeResize(t.table());var n=e.delta(t.delta(),t.table());ga.adjustWidth(t.table(),n,t.column(),e),i.trigger.afterResize(t.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:i.registry}}var js={get:function(t,e){return t.inline?xs.body(Ta.getBody(t),function(){var t=j.fromTag("div");return Be.setAll(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ie.append(ce.body(),t),t}()):xs.only(j.fromDom(t.getDoc()))},remove:function(t,e){t.inline&&Fe.remove(e.parent())}};function Us(t){var e,n,r=l.none(),o=l.none(),i=l.none(),a=/(\d+(\.\d+)?)%/,s=function(t){return"TABLE"===t.nodeName};return t.on("init",function(){var e=jr(Pa.directionAt),n=js.get(t);if(i=l.some(n),Ja(t)&&Wa(t)){var a=qs(n,e);a.on(),a.events.startDrag.bind(function(e){r=l.some(t.selection.getRng())}),a.events.afterResize.bind(function(e){var n=e.table(),o=de.descendants(n,"td[data-mce-style],th[data-mce-style]");R.each(o,function(t){ae.remove(t,"data-mce-style")}),r.each(function(e){t.selection.setRng(e),t.focus()}),t.undoManager.add()}),o=l.some(a)}}),t.on("ObjectResizeStart",function(r){var o;s(r.target)&&(e=r.width,o=r.target,n=t.dom.getStyle(o,"width")||t.dom.getAttrib(o,"width"))}),t.on("ObjectResized",function(r){if(s(r.target)){var o=r.target;if(a.test(n)){var i=parseFloat(a.exec(n)[1]),u=r.width*i/e;t.dom.setStyle(o,"width",u+"%")}else{var c=[];ts.each(o.rows,function(e){ts.each(e.cells,function(e){var n=t.dom.getStyle(e,"width",!0);c.push({cell:e,width:n})})}),ts.each(c,function(e){t.dom.setStyle(e.cell,"width",e.width),t.dom.setAttrib(e.cell,"width",null)})}}}),{lazyResize:function(){return o},lazyWire:function(){return i.getOr(xs.only(j.fromDom(t.getBody())))},destroy:function(){o.each(function(t){t.destroy()}),i.each(function(e){js.remove(t,e)})}}}var Vs=function(t){return{fold:t}},$s=function(t){return Vs(function(e,n,r,o){return e(t)})},Ys=function(t){return Vs(function(e,n,r,o){return n(t)})},Xs=function(t,e){return Vs(function(n,r,o,i){return o(t,e)})},Ks=function(t){return Vs(function(e,n,r,o){return o(t)})},Js=function(t,e){return Re.table(t,e).bind(function(e){var n=Re.cells(e);return R.findIndex(n,function(e){return It.eq(t,e)}).map(function(t){return{index:o.constant(t),all:o.constant(n)}})})},Gs=function(t,e){return Js(t,e).fold(function(){return $s(t)},function(e){return e.index()+1<e.all().length?Xs(t,e.all()[e.index()+1]):Ks(t)})},Zs=function(t,e){return Js(t,e).fold(function(){return $s()},function(e){return e.index()-1>=0?Xs(t,e.all()[e.index()-1]):Ys(t)})},Qs=Yn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),tu={before:Qs.before,on:Qs.on,after:Qs.after,cata:function(t,e,n,r){return t.fold(e,n,r)},getStart:function(t){return t.fold(o.identity,o.identity,o.identity)}},eu=Yn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),nu=M.immutable("start","soffset","finish","foffset"),ru={domRange:eu.domRange,relative:eu.relative,exact:eu.exact,exactFromRange:function(t){return eu.exact(t.start(),t.soffset(),t.finish(),t.foffset())},range:nu,getWin:function(t){var e=function(t){return t.match({domRange:function(t){return j.fromDom(t.startContainer)},relative:function(t,e){return tu.getStart(t)},exact:function(t,e,n,r){return t}})}(t);return $t.defaultView(e)}},ou=function(t,e,n,r){var o=$t.owner(t).dom().createRange();return o.setStart(t.dom(),e),o.setEnd(n.dom(),r),o},iu=function(t,e,n,r){var o=ou(t,e,n,r),i=It.eq(t,n)&&e===r;return o.collapsed&&!i},au=function(t,e){var n=(e||document).createDocumentFragment();return R.each(t,function(t){n.appendChild(t.dom())}),j.fromDom(n)},su=function(t,e){t.selectNodeContents(e.dom())},uu=function(t){t.deleteContents()},cu=function(t){return{left:o.constant(t.left),top:o.constant(t.top),right:o.constant(t.right),bottom:o.constant(t.bottom),width:o.constant(t.width),height:o.constant(t.height)}},lu={create:function(t){return t.document.createRange()},replaceWith:function(t,e){uu(t),t.insertNode(e.dom())},selectNodeContents:function(t,e){var n=t.document.createRange();return su(n,e),n},selectNodeContentsUsing:su,relativeToNative:function(t,e,n){var r,o=t.document.createRange();return r=o,e.fold(function(t){r.setStartBefore(t.dom())},function(t,e){r.setStart(t.dom(),e)},function(t){r.setStartAfter(t.dom())}),function(t,e){e.fold(function(e){t.setEndBefore(e.dom())},function(e,n){t.setEnd(e.dom(),n)},function(e){t.setEndAfter(e.dom())})}(o,n),o},exactToNative:function(t,e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},deleteContents:uu,cloneFragment:function(t){var e=t.cloneContents();return j.fromDom(e)},getFirstRect:function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?l.some(n).map(cu):l.none()},getBounds:function(t){var e=t.getBoundingClientRect();return e.width>0||e.height>0?l.some(e).map(cu):l.none()},isWithin:function(t,e){return e.compareBoundaryPoints(t.END_TO_START,t)<1&&e.compareBoundaryPoints(t.START_TO_END,t)>-1},toString:function(t){return t.toString()}},fu=Yn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),du=function(t,e,n){return e(j.fromDom(n.startContainer),n.startOffset,j.fromDom(n.endContainer),n.endOffset)},hu=function(t,e){return function(t,e){var n=e.ltr();return n.collapsed?e.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return fu.rtl(j.fromDom(t.endContainer),t.endOffset,j.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return du(0,fu.ltr,n)}):du(0,fu.ltr,n)}(0,function(t,e){return e.match({domRange:function(t){return{ltr:o.constant(t),rtl:l.none}},relative:function(e,n){return{ltr:at(function(){return lu.relativeToNative(t,e,n)}),rtl:at(function(){return l.some(lu.relativeToNative(t,n,e))})}},exact:function(e,n,r,o){return{ltr:at(function(){return lu.exactToNative(t,e,n,r,o)}),rtl:at(function(){return l.some(lu.exactToNative(t,r,o,e,n))})}}})}(t,e))},mu={ltr:fu.ltr,rtl:fu.rtl,diagnose:hu,asLtrRange:function(t,e){return hu(t,e).match({ltr:function(e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(e,n,r,o){var i=t.document.createRange();return i.setStart(r.dom(),o),i.setEnd(e.dom(),n),i}})}},gu=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},pu=function(t,e,n,r,o){if(0===o)return 0;if(e===r)return o-1;for(var i=r,a=1;a<o;a++){var s=t(a),u=Math.abs(e-s.left);if(n>s.bottom);else{if(n<s.top||u>i)return a-1;i=u}}return 0},vu={locate:function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getClientRects();return bo(i,function(t){return gu(t,n,r)?l.some(t):l.none()}).map(function(o){return function(t,e,n,r,o){var i=function(n){var r=t.dom().createRange();return r.setStart(e.dom(),n),r.collapse(!0),r},a=Qe.get(e).length,s=pu(function(t){return i(t).getBoundingClientRect()},n,r,o.right,a);return i(s)}(t,e,n,r,o)})}},bu=function(t,e,n,r){var o=t.dom().createRange(),i=$t.children(e);return bo(i,function(e){return o.selectNode(e.dom()),gu(o.getBoundingClientRect(),n,r)?yu(t,e,n,r):l.none()})},yu=function(t,e,n,r){return(ee.isText(e)?vu.locate:bu)(t,e,n,r)},wu=function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),s=Math.max(i.top,Math.min(i.bottom,r));return yu(t,e,a,s)},xu=function(t,e){return e-t.left<t.right-e},Cu=function(t,e,n){var r=t.dom().createRange();return r.selectNode(e.dom()),r.collapse(n),r},Ru=function(t,e,n){var r=t.dom().createRange();r.selectNode(e.dom());var o=r.getBoundingClientRect(),i=xu(o,n);return(!0===i?an.first:an.last)(e).map(function(e){return Cu(t,e,i)})},Su=function(t,e,n){var r=e.dom().getBoundingClientRect(),o=xu(r,n);return l.some(Cu(t,e,o))},ku=function(t,e,n){return(0===$t.children(e).length?Su:Ru)(t,e,n)},_u=document.caretPositionFromPoint?function(t,e,n){return l.from(t.dom().caretPositionFromPoint(e,n)).bind(function(e){if(null===e.offsetNode)return l.none();var n=t.dom().createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),l.some(n)})}:document.caretRangeFromPoint?function(t,e,n){return l.from(t.dom().caretRangeFromPoint(e,n))}:function(t,e,n){return j.fromPoint(t,e,n).bind(function(r){var o=function(){return ku(t,r,e)};return 0===$t.children(r).length?o():function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),s=Math.max(i.top,Math.min(i.bottom,r));return wu(t,e,a,s)}(t,r,e,n).orThunk(o)})},Tu=function(t,e,n){var r=j.fromDom(t.document);return _u(r,e,n).map(function(t){return ru.range(j.fromDom(t.startContainer),t.startOffset,j.fromDom(t.endContainer),t.endOffset)})},Eu=function(t,e,n){var r=mu.asLtrRange(t,e),o=j.fromDom(r.commonAncestorContainer);return ee.isElement(o)?function(t,e,n,r){var o=lu.create(t),i=(G.is(e,r)?[e]:[]).concat(de.descendants(e,r));return R.filter(i,function(t){return lu.selectNodeContentsUsing(o,t),lu.isWithin(n,o)})}(t,o,r,n):[]},Nu=function(t,e){var n=ee.name(t);return"input"===n?tu.after(t):R.contains(["br","img"],n)?0===e?tu.before(t):tu.after(t):tu.on(t,e)},Du=function(t,e){var n=t.fold(tu.before,Nu,tu.after),r=e.fold(tu.before,Nu,tu.after);return ru.relative(n,r)},Au=function(t,e,n,r){var o=Nu(t,e),i=Nu(n,r);return ru.relative(o,i)},Pu=function(t){return t.match({domRange:function(t){var e=j.fromDom(t.startContainer),n=j.fromDom(t.endContainer);return Au(e,t.startOffset,n,t.endOffset)},relative:Du,exact:Au})},Ou=Du,Mu=Au,Bu=function(t,e){l.from(t.getSelection()).each(function(t){t.removeAllRanges(),t.addRange(e)})},Hu=function(t,e,n,r,o){var i=lu.exactToNative(t,e,n,r,o);Bu(t,i)},Wu=function(t,e){return mu.diagnose(t,e).match({ltr:function(e,n,r,o){Hu(t,e,n,r,o)},rtl:function(e,n,r,o){var i=t.getSelection();i.extend?(i.collapse(e.dom(),n),i.extend(r.dom(),o)):Hu(t,r,o,e,n)}})},Iu=function(t){var e=j.fromDom(t.anchorNode),n=j.fromDom(t.focusNode);return iu(e,t.anchorOffset,n,t.focusOffset)?l.some(ru.range(j.fromDom(t.anchorNode),t.anchorOffset,j.fromDom(t.focusNode),t.focusOffset)):function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return l.some(ru.range(j.fromDom(e.startContainer),e.startOffset,j.fromDom(n.endContainer),n.endOffset))}return l.none()}(t)},Lu=function(t){var e=t.getSelection();return e.rangeCount>0?Iu(e):l.none()},zu={setExact:function(t,e,n,r,o){var i=Mu(e,n,r,o);Wu(t,i)},getExact:Lu,get:function(t){return Lu(t).map(function(t){return ru.exact(t.start(),t.soffset(),t.finish(),t.foffset())})},setRelative:function(t,e,n){var r=Ou(e,n);Wu(t,r)},toNative:function(t){var e=ru.getWin(t).dom(),n=function(t,n,r,o){return lu.exactToNative(e,t,n,r,o)},r=Pu(t);return mu.diagnose(e,r).match({ltr:n,rtl:n})},setToElement:function(t,e){var n=lu.selectNodeContents(t,e);Bu(t,n)},clear:function(t){t.getSelection().removeAllRanges()},clone:function(t,e){var n=mu.asLtrRange(t,e);return lu.cloneFragment(n)},replace:function(t,e,n){var r=mu.asLtrRange(t,e),o=au(n,t.document);lu.replaceWith(r,o)},deleteAt:function(t,e){var n=mu.asLtrRange(t,e);lu.deleteContents(n)},forElement:function(t,e){var n=lu.selectNodeContents(t,e);return ru.range(j.fromDom(n.startContainer),n.startOffset,j.fromDom(n.endContainer),n.endOffset)},getFirstRect:function(t,e){var n=mu.asLtrRange(t,e);return lu.getFirstRect(n)},getBounds:function(t,e){var n=mu.asLtrRange(t,e);return lu.getBounds(n)},getAtPoint:function(t,e,n){return Tu(t,e,n)},findWithin:function(t,e,n){return Eu(t,e,n)},getAsString:function(t,e){var n=mu.asLtrRange(t,e);return lu.toString(n)},isCollapsed:function(t,e,n,r){return It.eq(t,n)&&e===r}},Fu=tinymce.util.Tools.resolve("tinymce.util.VK"),qu=function(t,e,n,r){return Vu(t,e,Gs(n),r)},ju=function(t,e,n,r){return Vu(t,e,Zs(n),r)},Uu=function(t,e){var n=ru.exact(e,0,e,0);return zu.toNative(n)},Vu=function(t,e,n,r,o){return n.fold(l.none,l.none,function(t,e){return an.first(e).map(function(t){return Uu(0,t)})},function(n){return Re.table(n,e).bind(function(e){var o=nr.noMenu(n);return t.undoManager.transact(function(){r.insertRowsAfter(e,o)}),function(t,e){var n=de.descendants(e,"tr");return R.last(n).bind(function(t){return ye.descendant(t,"td,th").map(function(t){return Uu(0,t)})})}(0,e)})})},$u=["table","li","dl"],Yu={handle:function(t,e,n,r){if(t.keyCode===Fu.TAB){var o=Ta.getBody(e),i=function(t){var e=ee.name(t);return It.eq(t,o)||R.contains($u,e)},a=e.selection.getRng();if(a.collapsed){var s=j.fromDom(a.startContainer);Re.cell(s,i).each(function(o){t.preventDefault(),(t.shiftKey?ju:qu)(e,i,o,n,r).each(function(t){e.selection.setRng(t)})})}}}},Xu={response:M.immutable("selection","kill")},Ku=function(t){return function(e){return e===t}},Ju=Ku(38),Gu=Ku(40),Zu={ltr:{isBackward:Ku(37),isForward:Ku(39)},rtl:{isBackward:Ku(39),isForward:Ku(37)},isUp:Ju,isDown:Gu,isNavigation:function(t){return t>=37&&t<=40}},Qu={convertToRange:function(t,e){var n=mu.asLtrRange(t,e);return{start:o.constant(j.fromDom(n.startContainer)),soffset:o.constant(n.startOffset),finish:o.constant(j.fromDom(n.endContainer)),foffset:o.constant(n.endOffset)}},makeSitus:function(t,e,n,r){return{start:o.constant(tu.on(t,e)),finish:o.constant(tu.on(n,r))}}},tc=Bt.detect().browser.isSafari(),ec=function(t){var e=void 0!==t?t.dom():document,n=e.body.scrollLeft||e.documentElement.scrollLeft,r=e.body.scrollTop||e.documentElement.scrollTop;return Tr(n,r)},nc=function(t,e,n){(void 0!==n?n.dom():document).defaultView.scrollTo(t,e)},rc=function(t,e){tc&&A.isFunction(t.dom().scrollIntoViewIfNeeded)?t.dom().scrollIntoViewIfNeeded(!1):t.dom().scrollIntoView(e)},oc={get:ec,to:nc,by:function(t,e,n){(void 0!==n?n.dom():document).defaultView.scrollBy(t,e)},preserve:function(t,e){var n=ec(t);e();var r=ec(t);n.top()===r.top()&&n.left()===r.left()||nc(n.left(),n.top(),t)},capture:function(t){var e=l.none(),n=function(){e=l.some(ec(t))};return n(),{save:n,restore:function(){e.each(function(e){nc(e.left(),e.top(),t)})}}},intoView:rc,intoViewIfNeeded:function(t,e){var n=e.dom().getBoundingClientRect(),r=t.dom().getBoundingClientRect();r.top<n.top?rc(t,!0):r.bottom>n.bottom&&rc(t,!1)},setToElement:function(t,e){var n=Dr(e),r=j.fromDom(t.document);nc(n.left(),n.top(),r)},scrollBarWidth:function(){var t=j.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');Ie.after(ce.body(),t);var e=t.dom().offsetWidth-t.dom().clientWidth;return Fe.remove(t),e}};function ic(t){return{elementFromPoint:function(e,n){return l.from(t.document.elementFromPoint(e,n)).map(j.fromDom)},getRect:function(t){return t.dom().getBoundingClientRect()},getRangedRect:function(e,n,r,i){var a=ru.exact(e,n,r,i);return zu.getFirstRect(t,a).map(function(t){return N.map(t,o.apply)})},getSelection:function(){return zu.get(t).map(function(e){return Qu.convertToRange(t,e)})},fromSitus:function(e){var n=ru.relative(e.start(),e.finish());return Qu.convertToRange(t,n)},situsFromPoint:function(e,n){return zu.getAtPoint(t,e,n).map(function(t){return{start:o.constant(tu.on(t.start(),t.soffset())),finish:o.constant(tu.on(t.finish(),t.foffset()))}})},clearSelection:function(){zu.clear(t)},setSelection:function(e){zu.setExact(t,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,n){zu.setRelative(t,e,n)},selectContents:function(e){zu.setToElement(t,e)},getInnerHeight:function(){return t.innerHeight},getScrollY:function(){return oc.get(j.fromDom(t.document)).top()},scrollBy:function(e,n){oc.by(e,n,j.fromDom(t.document))}}}var ac=function(t,e,n,r,o){if(!It.eq(n,r))return jn.identify(n,r,e).bind(function(e){var r=e.boxes().getOr([]);return r.length>0?(o(t,r,e.start(),e.finish()),l.some(Xu.response(l.some(Qu.makeSitus(n,0,n,nn(n))),!0))):l.none()})},sc={sync:function(t,e,n,r,o,i,a){return It.eq(n,o)&&r===i?l.none():ye.closest(n,"td,th",e).bind(function(n){return ye.closest(o,"td,th",e).bind(function(r){return ac(t,e,n,r,a)})})},detect:ac,update:function(t,e,n,r,o){return jn.shiftSelection(r,t,e,o.firstSelectedSelector(),o.lastSelectedSelector()).map(function(t){return o.clear(n),o.selectRange(n,t.boxes(),t.start(),t.finish()),t.boxes()})}},uc=M.immutableBag(["left","top","right","bottom"],[]),cc={nu:uc,moveUp:function(t,e){return uc({left:t.left(),top:t.top()-e,right:t.right(),bottom:t.bottom()-e})},moveDown:function(t,e){return uc({left:t.left(),top:t.top()+e,right:t.right(),bottom:t.bottom()+e})},moveBottomTo:function(t,e){var n=t.bottom()-t.top();return uc({left:t.left(),top:e-n,right:t.right(),bottom:e})},moveTopTo:function(t,e){var n=t.bottom()-t.top();return uc({left:t.left(),top:e,right:t.right(),bottom:e+n})},getTop:function(t){return t.top()},getBottom:function(t){return t.bottom()},translate:function(t,e,n){return uc({left:t.left()+e,top:t.top()+n,right:t.right()+e,bottom:t.bottom()+n})},toString:function(t){return"("+t.left()+", "+t.top()+") -> ("+t.right()+", "+t.bottom()+")"}},lc=function(t){return cc.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},fc=function(t,e){return l.some(t.getRect(e))},dc=function(t,e,n){return ee.isElement(e)?fc(t,e).map(lc):ee.isText(e)?function(t,e,n){return n>=0&&n<nn(e)?t.getRangedRect(e,n,e,n+1):n>0?t.getRangedRect(e,n-1,e,n):l.none()}(t,e,n).map(lc):l.none()},hc=function(t,e){return ee.isElement(e)?fc(t,e).map(lc):ee.isText(e)?t.getRangedRect(e,0,e,nn(e)).map(lc):l.none()},mc=M.immutable("item","mode"),gc=function(t,e,n,r){var o=void 0!==r?r:pc;return t.property().parent(e).map(function(t){return mc(t,o)})},pc=function(t,e,n,r){var o=void 0!==r?r:vc;return n.sibling(t,e).map(function(t){return mc(t,o)})},vc=function(t,e,n,r){var o=void 0!==r?r:vc,i=t.property().children(e);return n.first(i).map(function(t){return mc(t,o)})},bc=[{current:gc,next:pc,fallback:l.none()},{current:pc,next:vc,fallback:l.some(gc)},{current:vc,next:vc,fallback:l.some(pc)}],yc=function(t,e,n,r,o){return o=void 0!==o?o:bc,R.find(o,function(t){return t.current===n}).bind(function(n){return n.current(t,e,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return yc(t,e,n,r)})})})},wc={backtrack:gc,sidestep:pc,advance:vc,go:yc},xc={left:function(){return{sibling:function(t,e){return t.query().prevSibling(e)},first:function(t){return t.length>0?l.some(t[t.length-1]):l.none()}}},right:function(){return{sibling:function(t,e){return t.query().nextSibling(e)},first:function(t){return t.length>0?l.some(t[0]):l.none()}}}},Cc=function(t,e,n,r,o,i){return wc.go(t,e,r,o).bind(function(e){return i(e.item())?l.none():n(e.item())?l.some(e.item()):Cc(t,e.item(),n,e.mode(),o,i)})},Rc=function(t,e,n,r){return Cc(t,e,n,wc.sidestep,xc.left(),r)},Sc=function(t,e,n,r){return Cc(t,e,n,wc.sidestep,xc.right(),r)},kc=function(t,e){return 0===t.property().children(e).length},_c=function(t,e,n,r){return Rc(t,e,n,r)},Tc=function(t,e,n,r){return Sc(t,e,n,r)},Ec={before:function(t,e,n){return _c(t,e,o.curry(kc,t),n)},after:function(t,e,n){return Tc(t,e,o.curry(kc,t),n)},seekLeft:_c,seekRight:Tc,walkers:function(){return{left:xc.left,right:xc.right}},walk:function(t,e,n,r,o){return wc.go(t,e,n,r,o)},backtrack:wc.backtrack,sidestep:wc.sidestep,advance:wc.advance},Nc=mn(),Dc={gather:function(t,e,n){return Ec.gather(Nc,t,e,n)},before:function(t,e){return Ec.before(Nc,t,e)},after:function(t,e){return Ec.after(Nc,t,e)},seekLeft:function(t,e,n){return Ec.seekLeft(Nc,t,e,n)},seekRight:function(t,e,n){return Ec.seekRight(Nc,t,e,n)},walkers:function(){return Ec.walkers()},walk:function(t,e,n,r){return Ec.walk(Nc,t,e,n,r)}},Ac=Yn([{none:[]},{retry:["caret"]}]),Pc=function(t,e,n){return ve.closest(e,uo).fold(o.constant(!1),function(e){return hc(t,e).exists(function(t){return function(t,e){return t.left()<e.left()||Math.abs(e.right()-t.left())<1||t.left()>e.right()}(n,t)})})},Oc={point:cc.getTop,adjuster:function(t,e,n,r,o){var i=cc.moveUp(o,5);return Math.abs(n.top()-r.top())<1?Ac.retry(i):n.bottom()<o.top()?Ac.retry(i):n.bottom()===o.top()?Ac.retry(cc.moveUp(o,1)):Pc(t,e,o)?Ac.retry(cc.translate(i,5,0)):Ac.none()},move:cc.moveUp,gather:Dc.before},Mc={point:cc.getBottom,adjuster:function(t,e,n,r,o){var i=cc.moveDown(o,5);return Math.abs(n.bottom()-r.bottom())<1?Ac.retry(i):n.top()>o.bottom()?Ac.retry(i):n.top()===o.bottom()?Ac.retry(cc.moveDown(o,1)):Pc(t,e,o)?Ac.retry(cc.translate(i,5,0)):Ac.none()},move:cc.moveDown,gather:Dc.after},Bc=function(t,e,n,r,o){return 0===o?l.some(r):function(t,e,n){return t.elementFromPoint(e,n).filter(function(t){return"table"===ee.name(t)}).isSome()}(t,r.left(),e.point(r))?function(t,e,n,r,o){return Bc(t,e,n,e.move(r,5),o)}(t,e,n,r,o-1):t.situsFromPoint(r.left(),e.point(r)).bind(function(i){return i.start().fold(l.none,function(i,a){return hc(t,i,a).bind(function(a){return e.adjuster(t,i,a,n,r).fold(l.none,function(r){return Bc(t,e,n,r,o-1)})}).orThunk(function(){return l.some(r)})},l.none)})},Hc=function(t,e,n){var r=t.move(n,5),o=Bc(e,t,n,r,100).getOr(r);return function(t,e,n){return t.point(e)>n.getInnerHeight()?l.some(t.point(e)-n.getInnerHeight()):t.point(e)<0?l.some(-t.point(e)):l.none()}(t,o,e).fold(function(){return e.situsFromPoint(o.left(),t.point(o))},function(n){return e.scrollBy(0,n),e.situsFromPoint(o.left(),t.point(o)-n)})},Wc={tryUp:o.curry(Hc,Oc),tryDown:o.curry(Hc,Mc),ieTryUp:function(t,e){return t.situsFromPoint(e.left(),e.top()-5)},ieTryDown:function(t,e){return t.situsFromPoint(e.left(),e.bottom()+5)},getJumpSize:o.constant(5)},Ic=Yn([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Lc=function(t){return ye.closest(t,"tr")},zc={verify:function(t,e,n,r,o,i,a){return ye.closest(r,"td,th",a).bind(function(n){return ye.closest(e,"td,th",a).map(function(e){return It.eq(n,e)?It.eq(r,n)&&nn(n)===o?i(e):Ic.none("in same cell"):Sn(Lc,[n,e]).fold(function(){return function(t,e,n){var r=t.getRect(e),o=t.getRect(n);return o.right>r.left&&o.left<r.right}(t,e,n)?Ic.success():i(e)},function(t){return i(e)})})}).getOr(Ic.none("default"))},cata:function(t,e,n,r,o){return t.fold(e,n,r,o)},adt:Ic},Fc={point:M.immutable("element","offset"),delta:M.immutable("element","deltaOffset"),range:M.immutable("element","start","finish"),points:M.immutable("begin","end"),text:M.immutable("element","text")},qc=(M.immutable("ancestor","descendants","element","index"),M.immutable("parent","children","element","index")),jc=function(t,e){return R.findIndex(t,o.curry(It.eq,e))},Uc=function(t){return $t.parent(t).bind(function(e){var n=$t.children(e);return jc(n,t).map(function(r){return qc(e,n,t,r)})})},Vc=function(t){return"br"===ee.name(t)},$c=function(t,e,n){return e(t,n).bind(function(t){return ee.isText(t)&&0===Qe.get(t).trim().length?$c(t,e,n):l.some(t)})},Yc=function(t,e,n,r){return function(t,e){return $t.child(t,e).filter(Vc).orThunk(function(){return $t.child(t,e-1).filter(Vc)})}(e,n).bind(function(e){return r.traverse(e).fold(function(){return $c(e,r.gather,t).map(r.relative)},function(t){return Uc(t).map(function(t){return tu.on(t.parent(),t.index())})})})},Xc=function(t,e,n,r){return(Vc(e)?function(t,e,n){return n.traverse(e).orThunk(function(){return $c(e,n.gather,t)}).map(n.relative)}(t,e,r):Yc(t,e,n,r)).map(function(t){return{start:o.constant(t),finish:o.constant(t)}})},Kc=function(t){return zc.cata(t,function(t){return l.none()},function(){return l.none()},function(t){return l.some(Fc.point(t,0))},function(t){return l.some(Fc.point(t,nn(t)))})},Jc=Bt.detect(),Gc=function(t,e,n,r,o,i){return 0===i?l.none():tl(t,e,n,r,o).bind(function(a){var s=t.fromSitus(a),u=zc.verify(t,n,r,s.finish(),s.foffset(),o.failure,e);return zc.cata(u,function(){return l.none()},function(){return l.some(a)},function(a){return It.eq(n,a)&&0===r?Zc(t,n,r,cc.moveUp,o):Gc(t,e,a,0,o,i-1)},function(a){return It.eq(n,a)&&r===nn(a)?Zc(t,n,r,cc.moveDown,o):Gc(t,e,a,nn(a),o,i-1)})})},Zc=function(t,e,n,r,o){return dc(t,e,n).bind(function(e){return Qc(t,o,r(e,Wc.getJumpSize()))})},Qc=function(t,e,n){return Jc.browser.isChrome()||Jc.browser.isSafari()||Jc.browser.isFirefox()||Jc.browser.isEdge()?e.otherRetry(t,n):Jc.browser.isIE()?e.ieRetry(t,n):l.none()},tl=function(t,e,n,r,o){return dc(t,n,r).bind(function(e){return Qc(t,o,e)})},el=function(t,e,n){return function(t,e,n){return t.getSelection().bind(function(r){return Xc(e,r.finish(),r.foffset(),n).fold(function(){return l.some(Fc.point(r.finish(),r.foffset()))},function(o){var i=t.fromSitus(o),a=zc.verify(t,r.finish(),r.foffset(),i.finish(),i.foffset(),n.failure,e);return Kc(a)})})}(t,e,n).bind(function(r){return Gc(t,e,r.element(),r.offset(),n,20).map(t.fromSitus)})},nl=function(t,e,n){return ve.ancestor(t,e,n).isSome()},rl=Bt.detect(),ol=function(t,e,n,r,i){return ye.closest(r,"td,th",e).bind(function(r){return ye.closest(r,"table",e).bind(function(a){return function(t,e){return nl(t,function(t){return $t.parent(t).exists(function(t){return It.eq(t,e)})})}(i,a)?el(t,e,n).bind(function(t){return ye.closest(t.finish(),"td,th",e).map(function(e){return{start:o.constant(r),finish:o.constant(e),range:o.constant(t)}})}):l.none()})})},il=function(t,e,n,r,o,i){return rl.browser.isIE()?l.none():i(r,e).orThunk(function(){return ol(t,e,n,r,o).map(function(t){var e=t.range();return Xu.response(l.some(Qu.makeSitus(e.start(),e.soffset(),e.finish(),e.foffset())),!0)})})},al=function(t,e,n,r,o,i,a){return ol(t,n,r,o,i).bind(function(t){return sc.detect(e,n,t.start(),t.finish(),a)})},sl=function(t,e){return ye.closest(t,"tr",e).bind(function(t){return ye.closest(t,"table",e).bind(function(n){var r=de.descendants(n,"tr");return It.eq(t,r[0])?Dc.seekLeft(n,function(t){return an.last(t).isSome()},e).map(function(t){var e=nn(t);return Xu.response(l.some(Qu.makeSitus(t,e,t,e)),!0)}):l.none()})})},ul=function(t,e){return ye.closest(t,"tr",e).bind(function(t){return ye.closest(t,"table",e).bind(function(n){var r=de.descendants(n,"tr");return It.eq(t,r[r.length-1])?Dc.seekRight(n,function(t){return an.first(t).isSome()},e).map(function(t){return Xu.response(l.some(Qu.makeSitus(t,0,t,0)),!0)}):l.none()})})},cl=function(t,e){return ye.closest(t,"td,th",e)},ll={down:{traverse:$t.nextSibling,gather:Dc.after,relative:tu.before,otherRetry:Wc.tryDown,ieRetry:Wc.ieTryDown,failure:zc.adt.failedDown},up:{traverse:$t.prevSibling,gather:Dc.before,relative:tu.before,otherRetry:Wc.tryUp,ieRetry:Wc.ieTryUp,failure:zc.adt.failedUp}},fl=M.immutable("rows","cols"),dl={mouse:function(t,e,n,r){var o=function(t,e,n,r){var o=l.none(),i=function(){o=l.none()};return{mousedown:function(t){r.clear(e),o=cl(t.target(),n)},mouseover:function(i){o.each(function(o){r.clear(e),cl(i.target(),n).each(function(i){jn.identify(o,i,n).each(function(n){var a=n.boxes().getOr([]);(a.length>1||1===a.length&&!It.eq(o,i))&&(r.selectRange(e,a,n.start(),n.finish()),t.selectContents(i))})})})},mouseup:function(){o.each(i)}}}(ic(t),e,n,r);return{mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},keyboard:function(t,e,n,r){var i=ic(t),a=function(){return r.clear(e),l.none()};return{keydown:function(t,s,u,c,f,d){var h=t.raw().which,m=!0===t.raw().shiftKey;return jn.retrieve(e,r.selectedSelector()).fold(function(){return Zu.isDown(h)&&m?o.curry(al,i,e,n,ll.down,c,s,r.selectRange):Zu.isUp(h)&&m?o.curry(al,i,e,n,ll.up,c,s,r.selectRange):Zu.isDown(h)?o.curry(il,i,n,ll.down,c,s,ul):Zu.isUp(h)?o.curry(il,i,n,ll.up,c,s,sl):l.none},function(t){var n=function(n){return function(){return bo(n,function(n){return sc.update(n.rows(),n.cols(),e,t,r)}).fold(function(){return jn.getEdges(e,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(t){var n=Zu.isDown(h)||d.isForward(h)?tu.after:tu.before;return i.setRelativeSelection(tu.on(t.first(),0),n(t.table())),r.clear(e),Xu.response(l.none(),!0)})},function(t){return l.some(Xu.response(l.none(),!0))})}};return Zu.isDown(h)&&m?n([fl(1,0)]):Zu.isUp(h)&&m?n([fl(-1,0)]):d.isBackward(h)&&m?n([fl(0,-1),fl(-1,0)]):d.isForward(h)&&m?n([fl(0,1),fl(1,0)]):Zu.isNavigation(h)&&!1===m?a:l.none})()},keyup:function(t,o,i,a,s){return jn.retrieve(e,r.selectedSelector()).fold(function(){var u=t.raw().which;return 0==(!0===t.raw().shiftKey)?l.none():Zu.isNavigation(u)?sc.sync(e,n,o,i,a,s,r.selectRange):l.none()},l.none)}}}},hl=function(t,e){R.each(e,function(e){Zo.remove(t,e)})},ml=function(t){return function(e){Zo.add(e,t)}},gl=function(t){return function(e){hl(e,t)}},pl={byClass:function(t){var e=ml(t.selected()),n=gl([t.selected(),t.lastSelected(),t.firstSelected()]),r=function(e){var r=de.descendants(e,t.selectedSelector());R.each(r,n)};return{clear:r,selectRange:function(n,o,i,a){r(n),R.each(o,e),Zo.add(i,t.firstSelected()),Zo.add(a,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},byAttr:function(t){var e=function(e){ae.remove(e,t.selected()),ae.remove(e,t.firstSelected()),ae.remove(e,t.lastSelected())},n=function(e){ae.set(e,t.selected(),"1")},r=function(n){var r=de.descendants(n,t.selectedSelector());R.each(r,e)};return{clear:r,selectRange:function(e,o,i,a){r(e),R.each(o,n),ae.set(i,t.firstSelected(),"1"),ae.set(a,t.lastSelected(),"1")},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}}};function vl(t,e){var n=M.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),r=l.none(),i=pl.byAttr($n);return t.on("init",function(a){var s=t.getWin(),u=Ta.getBody(t),c=Ta.getIsRoot(t),f=dl.mouse(s,u,c,i),d=dl.keyboard(s,u,c,i),h=function(e,n){(function(t){return!0===t.raw().shiftKey})(e)&&(n.kill()&&e.kill(),n.selection().each(function(e){var n=ru.relative(e.start(),e.finish()),r=mu.asLtrRange(s,n);t.selection.setRng(r)}))},m=function(e){var n=v(e);if(n.raw().shiftKey&&Zu.isNavigation(n.raw().which)){var r=t.selection.getRng(),o=j.fromDom(r.startContainer),i=j.fromDom(r.endContainer);d.keyup(n,o,r.startOffset,i,r.endOffset).each(function(t){h(n,t)})}},g=function(t){return!(ae.has(t,"data-mce-bogus")||"br"===ee.name(t)||ee.isText(t)&&0===Qe.get(t).length)},p=function(n){var r,o,i=v(n);e().each(function(t){t.hideBars()}),40===n.which&&(r=j.fromDom(t.getBody()),o=function(t){return $t.prevSibling(t).bind(function(t){return g(t)?l.some(t):o(t)})},$t.lastChild(r).bind(function(t){return g(t)?l.some(t):o(t)})).each(function(e){"table"===ee.name(e)&&(La(t)?t.dom.add(t.getBody(),La(t),Ua(t),"<br/>"):t.dom.add(t.getBody(),"br"))});var a=t.selection.getRng(),s=j.fromDom(t.selection.getStart()),u=j.fromDom(a.startContainer),c=j.fromDom(a.endContainer),f=Pa.directionAt(s).isRtl()?Zu.rtl:Zu.ltr;d.keydown(i,u,a.startOffset,c,a.endOffset,f).each(function(t){h(i,t)}),e().each(function(t){t.showBars()})},v=function(t){var e=j.fromDom(t.target),n=function(){t.stopPropagation()},r=function(){t.preventDefault()},i=o.compose(r,n);return{target:o.constant(e),x:o.constant(t.x),y:o.constant(t.y),stop:n,prevent:r,kill:i,raw:o.constant(t)}},b=function(t){return 0===t.button},y=function(t){b(t)&&f.mousedown(v(t))},w=function(t){var e;(void 0===(e=t).buttons||0!=(1&e.buttons))&&f.mouseover(v(t))},x=function(t){b&&f.mouseup(v(t))};t.on("mousedown",y),t.on("mouseover",w),t.on("mouseup",x),t.on("keyup",m),t.on("keydown",p),t.on("nodechange",function(){var e=t.selection,n=j.fromDom(e.getStart()),r=j.fromDom(e.getEnd()),a=Re.table(n),s=Re.table(r);a.bind(function(t){return s.bind(function(e){return It.eq(t,e)?l.some(!0):l.none()})}).fold(function(){i.clear(u)},o.noop)}),r=l.some(n({mousedown:y,mouseover:w,mouseup:x,keyup:m,keydown:p}))}),{clear:i.clear,destroy:function(){r.each(function(t){})}}}var bl=ts.each,yl={addButtons:function(t){var e=[];function n(e){return function(){t.execCommand(e)}}bl("inserttable tableprops deletetable | cell row column".split(" "),function(n){"|"===n?e.push({text:"-"}):e.push(t.menuItems[n])}),t.addButton("table",{type:"menubutton",title:"Table",menu:e}),t.addButton("tableprops",{title:"Table properties",onclick:o.curry(bs,t,!0),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})},addToolbars:function(t){var e=function(t){var e=t.getParam("table_toolbar",Oa);return""===e||!1===e?[]:A.isString(e)?e.split(/[ ,]/):A.isArray(e)?e:[]}(t);e.length>0&&t.addContextToolbar(function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},e.join(" "))}},wl={addMenuItems:function(t,e){var n=l.none(),r=[],i=[],a=[],s=[],u=function(t){t.disabled(!0)},c=function(t){t.disabled(!1)},f=function(){var t=this;r.push(t),n.fold(function(){u(t)},function(e){c(t)})},d=function(){var t=this;i.push(t),n.fold(function(){u(t)},function(e){c(t)})};t.on("init",function(){t.on("nodechange",function(o){var f=l.from(t.dom.getParent(t.selection.getStart(),"th,td"));(n=f.bind(function(t){var n=j.fromDom(t);return Re.table(n).map(function(t){return nr.forMenu(e,t,n)})})).fold(function(){R.each(r,u),R.each(i,u),R.each(a,u),R.each(s,u)},function(t){R.each(r,c),R.each(i,c),R.each(a,function(e){e.disabled(t.mergable().isNone())}),R.each(s,function(e){e.disabled(t.unmergable().isNone())})})})});var h=function(t,e,n,r){var o,i,a,s,u,c=r.getEl().getElementsByTagName("table")[0],l=r.isRtl()||"tl-tr"===r.parent().rel;for(c.nextSibling.innerHTML=e+1+" x "+(n+1),l&&(e=9-e),i=0;i<10;i++)for(o=0;o<10;o++)s=c.rows[i].childNodes[o].firstChild,u=(l?o>=e:o<=e)&&i<=n,t.dom.toggleClass(s,"mce-active",u),u&&(a=s);return a.parentNode},m=!1===function(t){return t.getParam("table_grid",!0,"boolean")}(t)?{text:"Table",icon:"table",context:"table",onclick:o.curry(bs,t)}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),bs(t))},onshow:function(){h(t,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");t.dom.removeClass(e,"mce-active"),t.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){var t="";t='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var e=0;e<10;e++){t+="<tr>";for(var n=0;n<10;n++)t+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+e+'"></a></td>';t+="</tr>"}return t+="</table>",t+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var n,r,o=e.target;"A"===o.tagName.toUpperCase()&&(n=parseInt(o.getAttribute("data-mce-x"),10),r=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(h(t,n,r,e.control),this.lastX=n,this.lastY=r))},onclick:function(e){var n=this;"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),n.parent().cancel(),t.undoManager.transact(function(){gs(t,n.lastX+1,n.lastY+1)}),t.addVisual())}}]};function g(e){return function(){t.execCommand(e)}}var p={text:"Table properties",context:"table",onPostRender:f,onclick:o.curry(bs,t,!0)},v={text:"Delete table",context:"table",onPostRender:f,cmd:"mceTableDelete"},b={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:g("mceTableInsertRowBefore"),onPostRender:d},{text:"Insert row after",onclick:g("mceTableInsertRowAfter"),onPostRender:d},{text:"Delete row",onclick:g("mceTableDeleteRow"),onPostRender:d},{text:"Row properties",onclick:g("mceTableRowProps"),onPostRender:d},{text:"-"},{text:"Cut row",onclick:g("mceTableCutRow"),onPostRender:d},{text:"Copy row",onclick:g("mceTableCopyRow"),onPostRender:d},{text:"Paste row before",onclick:g("mceTablePasteRowBefore"),onPostRender:d},{text:"Paste row after",onclick:g("mceTablePasteRowAfter"),onPostRender:d}]},y={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:g("mceTableInsertColBefore"),onPostRender:d},{text:"Insert column after",onclick:g("mceTableInsertColAfter"),onPostRender:d},{text:"Delete column",onclick:g("mceTableDeleteCol"),onPostRender:d}]},w={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:g("mceTableCellProps"),onPostRender:d},{text:"Merge cells",onclick:g("mceTableMergeCells"),onPostRender:function(){var t=this;a.push(t),n.fold(function(){u(t)},function(e){t.disabled(e.mergable().isNone())})}},{text:"Split cell",onclick:g("mceTableSplitCells"),onPostRender:function(){var t=this;s.push(t),n.fold(function(){u(t)},function(e){t.disabled(e.unmergable().isNone())})}}]};t.addMenuItem("inserttable",m),t.addMenuItem("tableprops",p),t.addMenuItem("deletetable",v),t.addMenuItem("row",b),t.addMenuItem("column",y),t.addMenuItem("cell",w)}},xl=function(t,e){return{insertTable:function(e,n){return gs(t,e,n)},setClipboardRows:function(t){return function(t,e){var n=R.map(t,j.fromDom);e.set(l.from(n))}(t,e)},getClipboardRows:function(){return function(t){return t.get().fold(function(){},function(t){return R.map(t,function(t){return t.dom()})})}(e)}}};n.add("table",function(t){var e=Us(t),n=vl(t,e.lazyResize),r=function(t,e){var n=function(t){return"table"===ee.name(Ta.getBody(t))},r=Ka(t),i=function(e,n,o,i){return function(a,s){var u=de.descendants(a,"td[data-mce-style],th[data-mce-style]");R.each(u,function(t){ae.remove(t,"data-mce-style")});var c=i(),f=j.fromDom(t.getDoc()),d=jr(Pa.directionAt),h=fn.cellOperations(o,f,r);return n(a)?e(c,a,s,h,d).bind(function(e){return R.each(e.newRows(),function(e){Ga(t,e.dom())}),R.each(e.newCells(),function(e){Za(t,e.dom())}),e.cursor().map(function(e){var n=t.dom.createRng();return n.setStart(e.dom(),0),n.setEnd(e.dom(),0),n})}):l.none()}};return{deleteRow:i(ka.eraseRows,function(e){var r=Ur.getGridSize(e);return!1===n(t)||r.rows()>1},o.noop,e),deleteColumn:i(ka.eraseColumns,function(e){var r=Ur.getGridSize(e);return!1===n(t)||r.columns()>1},o.noop,e),insertRowsBefore:i(ka.insertRowsBefore,o.always,o.noop,e),insertRowsAfter:i(ka.insertRowsAfter,o.always,o.noop,e),insertColumnsBefore:i(ka.insertColumnsBefore,o.always,Sr.halve,e),insertColumnsAfter:i(ka.insertColumnsAfter,o.always,Sr.halve,e),mergeCells:i(ka.mergeCells,o.always,o.noop,e),unmergeCells:i(ka.unmergeCells,o.always,o.noop,e),pasteRowsBefore:i(ka.pasteRowsBefore,o.always,o.noop,e),pasteRowsAfter:i(ka.pasteRowsAfter,o.always,o.noop,e),pasteCells:i(ka.pasteCells,o.always,o.noop,e)}}(t,e.lazyWire),i=function(t){return{get:function(){var e=Ta.getBody(t);return Un.retrieve(e,$n.selectedSelector()).fold(function(){return void 0===t.selection.getStart()?Kn.none():Kn.single(t.selection)},function(t){return Kn.multiple(t)})}}}(t),a=Vr(l.none());return ws.registerCommands(t,r,n,i,a),rr.registerEvents(t,i,r,n),wl.addMenuItems(t,i),yl.addButtons(t),yl.addToolbars(t),t.on("PreInit",function(){t.serializer.addTempAttr($n.firstSelected()),t.serializer.addTempAttr($n.lastSelected())}),Ia(t)&&t.on("keydown",function(n){Yu.handle(n,t,r,e.lazyWire)}),t.on("remove",function(){e.destroy(),n.destroy()}),xl(t,a)})}()},Z3om:function(t,e){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),r=tinymce.util.Tools.resolve("tinymce.util.VK"),o=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),s=function(t){return t&&"BR"===t.nodeName},u=function(t){return t&&3===t.nodeType},c=function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)},l=function(t){return t&&/^(LI|DT|DD)$/.test(t.nodeName)},f=function(t){return t&&/^(TH|TD)$/.test(t.nodeName)},d=s,h=function(t){return t.parentNode.firstChild===t},m=function(t){return t.parentNode.lastChild===t},g=function(t,e){return e&&!!t.schema.getTextBlockElements()[e.nodeName]},p=function(t,e){return t&&t.nodeName in e},v=function(t,e){return!!s(e)&&!(!t.isBlock(e.nextSibling)||s(e.previousSibling))},b=function(t,e,n){var r=t.isEmpty(e);return!(n&&t.select("span[data-mce-type=bookmark]",e).length>0)&&r},y=function(t,e){return t.isChildOf(e,t.getRoot())},w=function(t,n){var r=e.getNode(t,n);return l(t)&&u(r)?{container:r,offset:n>=t.childNodes.length?r.data.length:0}:{container:t,offset:n}},x=function(t){var e=t.cloneRange(),n=w(t.startContainer,t.startOffset);e.setStart(n.container,n.offset);var r=w(t.endContainer,t.endOffset);return e.setEnd(r.container,r.offset),e},C=a.DOM,R=function(t){var e={},n=function(n){var r,o,i;o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===o.nodeType&&(r=C.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(i=Math.min(i,o.childNodes.length-1),n?o.insertBefore(r,o.childNodes[i]):C.insertAfter(r,o.childNodes[i])):o.appendChild(r),o=r,i=0),e[n?"startContainer":"endContainer"]=o,e[n?"startOffset":"endOffset"]=i};return n(!0),t.collapsed||n(),e},S=function(t){function e(e){var n,r,o;n=o=t[e?"startContainer":"endContainer"],r=t[e?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(t){for(var e=t.parentNode.firstChild,n=0;e;){if(e===t)return n;1===e.nodeType&&"bookmark"===e.getAttribute("data-mce-type")||n++,e=e.nextSibling}return-1}(n),n=n.parentNode,C.remove(o),!n.hasChildNodes()&&C.isBlock(n)&&n.appendChild(C.create("br"))),t[e?"startContainer":"endContainer"]=n,t[e?"startOffset":"endOffset"]=r)}e(!0),e();var n=C.createRng();return n.setStart(t.startContainer,t.startOffset),t.endContainer&&n.setEnd(t.endContainer,t.endOffset),x(n)},k=a.DOM,_=function(t,e){var n,r=e.parentNode;"LI"===r.nodeName&&r.firstChild===e&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(e),b(t,r)&&k.remove(r)):k.setStyle(r,"listStyleType","none")),c(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(e)},T=function(t,e){i.each(i.grep(t.select("ol,ul",e)),function(e){_(t,e)})},E=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),N=function(t){var e=t.selection.getStart(!0);return t.dom.getParent(e,"OL,UL,DL",D(t,e))},D=function(t,e){var n=t.dom.getParents(e,"TD,TH");return n.length>0?n[0]:t.getBody()},A={getParentList:N,getSelectedSubLists:function(t){var e=N(t),n=t.selection.getSelectedBlocks();return function(t,e){return t&&1===e.length&&e[0]===t}(e,n)?function(t){return i.grep(t.querySelectorAll("ol,ul,dl"),function(t){return c(t)})}(e):i.grep(n,function(t){return c(t)&&e!==t})},getSelectedListItems:function(t){var e=t.selection.getSelectedBlocks();return i.grep(function(t,e){var n=i.map(e,function(e){var n=t.dom.getParent(e,"li,dd,dt",D(t,e));return n||e});return E.unique(n)}(t,e),function(t){return l(t)})},getClosestListRootElm:D},P=tinymce.util.Tools.resolve("tinymce.Env"),O=a.DOM,M=function(t,e,n){var r,o,i,a=O.createFragment(),s=t.schema.getBlockElements();if(t.settings.forced_root_block&&(n=n||t.settings.forced_root_block),n&&((o=O.create(n)).tagName===t.settings.forced_root_block&&O.setAttribs(o,t.settings.forced_root_block_attrs),p(e.firstChild,s)||a.appendChild(o)),e)for(;r=e.firstChild;){var u=r.nodeName;i||"SPAN"===u&&"bookmark"===r.getAttribute("data-mce-type")||(i=!0),p(r,s)?(a.appendChild(r),o=null):n?(o||(o=O.create(n),a.appendChild(o)),o.appendChild(r)):a.appendChild(r)}return t.settings.forced_root_block?i||P.ie&&!(P.ie>10)||o.appendChild(O.create("br",{"data-mce-bogus":"1"})):a.appendChild(O.create("br")),a},B=a.DOM,H=function(t,e,n,r){var o,a,s,u,c;for(s=B.select('span[data-mce-type="bookmark"]',e),r=r||M(t,n),(o=B.createRng()).setStartAfter(n),o.setEndAfter(e),u=(a=o.extractContents()).firstChild;u;u=u.firstChild)if("LI"===u.nodeName&&t.dom.isEmpty(u)){B.remove(u);break}t.dom.isEmpty(a)||B.insertAfter(a,e),B.insertAfter(r,e),b(t.dom,n.parentNode)&&(c=n.parentNode,i.each(s,function(t){c.parentNode.insertBefore(t,n.parentNode)}),B.remove(c)),B.remove(n),b(t.dom,e)&&B.remove(e)},W=a.DOM,I=function(t,e){b(t,e)&&W.remove(e)},L=function(t,e){var n,r=e.parentNode,o=r.parentNode;return!(r!==t.getBody()&&("DD"===e.nodeName?(W.rename(e,"DT"),0):h(e)&&m(e)?("LI"===o.nodeName?(W.insertAfter(e,o),I(t.dom,o),W.remove(r)):c(o)?W.remove(r,!0):(o.insertBefore(M(t,e),r),W.remove(r)),0):h(e)?("LI"===o.nodeName?(W.insertAfter(e,o),e.appendChild(r),I(t.dom,o)):c(o)?o.insertBefore(e,r):(o.insertBefore(M(t,e),r),W.remove(e)),0):m(e)?("LI"===o.nodeName?W.insertAfter(e,o):c(o)?W.insertAfter(e,r):(W.insertAfter(M(t,e),r),W.remove(e)),0):("LI"===o.nodeName?(r=o,n=M(t,e,"LI")):n=c(o)?M(t,e,"LI"):M(t,e),H(t,r,e,n),T(t.dom,r.parentNode),0)))},z=L,F=function(t){var e=A.getSelectedListItems(t);if(e.length){var n=R(t.selection.getRng(!0)),r=void 0,o=void 0,i=A.getClosestListRootElm(t,t.selection.getStart(!0));for(r=e.length;r--;)for(var a=e[r].parentNode;a&&a!==i;){for(o=e.length;o--;)if(e[o]===a){e.splice(r,1);break}a=a.parentNode}for(r=0;r<e.length&&(L(t,e[r])||0!==r);r++);return t.selection.setRng(S(n)),t.nodeChanged(),!0}},q=function(t,e){i.each(e,function(e,n){t.setAttribute(n,e)})},j=function(t,e,n){!function(t,e,n){var r=n["list-style-type"]?n["list-style-type"]:null;t.setStyle(e,"list-style-type",r)}(t,e,n),function(t,e,n){q(e,n["list-attributes"]),i.each(t.select("li",e),function(t){q(t,n["list-item-attributes"])})}(t,e,n)},U=function(t,e,n,r){var o,i;for(o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&d(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(g(t,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},V=function(t,e,n){void 0===n&&(n={});var r,a=t.selection.getRng(!0),s="LI",u=A.getClosestListRootElm(t,t.selection.getStart(!0)),l=t.dom;"false"!==l.getContentEditable(t.selection.getNode())&&("DL"===(e=e.toUpperCase())&&(s="DT"),r=R(a),i.each(function(t,e,n){for(var r,a=[],s=t.dom,u=U(t,e,!0,n),c=U(t,e,!1,n),l=[],f=u;f&&(l.push(f),f!==c);f=f.nextSibling);return i.each(l,function(e){if(g(t,e))return a.push(e),void(r=null);if(s.isBlock(e)||d(e))return d(e)&&s.remove(e),void(r=null);var i=e.nextSibling;o.isBookmarkNode(e)&&(g(t,i)||!i&&e.parentNode===n)?r=null:(r||(r=s.create("p"),e.parentNode.insertBefore(r,e),a.push(r)),r.appendChild(e))}),a}(t,a,u),function(r){var o,a;(a=r.previousSibling)&&c(a)&&a.nodeName===e&&function(t,e,n){var r=t.getStyle(e,"list-style-type"),o=n?n["list-style-type"]:"";return r===(o=null===o?"":o)}(l,a,n)?(o=a,r=l.rename(r,s),a.appendChild(r)):(o=l.create(e),r.parentNode.insertBefore(o,r),o.appendChild(r),r=l.rename(r,s)),function(t,e,n){i.each(n,function(n){return t.setStyle(e,((r={})[n]="",r));var r})}(l,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),j(l,o,n),X(t.dom,o)}),t.selection.setRng(S(r)))},$=function(t){var e=R(t.selection.getRng(!0)),n=A.getClosestListRootElm(t,t.selection.getStart(!0)),r=A.getSelectedListItems(t),o=i.grep(r,function(e){return t.dom.isEmpty(e)});r=i.grep(r,function(e){return!t.dom.isEmpty(e)}),i.each(o,function(e){b(t.dom,e)&&z(t,e)}),i.each(r,function(e){var r,o;if(e.parentNode!==t.getBody()){for(r=e;r&&r!==n;r=r.parentNode)c(r)&&(o=r);H(t,o,e),T(t.dom,o.parentNode)}}),t.selection.setRng(S(e))},Y=function(t,e,n){return function(t,e){return t&&e&&c(t)&&t.nodeName===e.nodeName}(e,n)&&function(t,e,n){return t.getStyle(e,"list-style-type",!0)===t.getStyle(n,"list-style-type",!0)}(t,e,n)&&(r=n,e.className===r.className);var r},X=function(t,e){var n,r;if(n=e.nextSibling,Y(t,e,n)){for(;r=n.firstChild;)e.appendChild(r);t.remove(n)}if(n=e.previousSibling,Y(t,e,n)){for(;r=n.lastChild;)e.insertBefore(r,e.firstChild);t.remove(n)}},K=function(t,e,n,r,o){if(e.nodeName!==r||J(o)){var a=R(t.selection.getRng(!0));i.each([e].concat(n),function(e){!function(t,e,n,r){if(e.nodeName!==n){var o=t.rename(e,n);j(t,o,r)}else j(t,e,r)}(t.dom,e,r,o)}),t.selection.setRng(S(a))}else $(t)},J=function(t){return"list-style-type"in t},G={toggleList:function(t,e,n){var r=A.getParentList(t),o=A.getSelectedSubLists(t);n=n||{},r&&o.length>0?K(t,r,o,e,n):function(t,e,n,r){if(e!==t.getBody())if(e)if(e.nodeName!==n||J(r)){var o=R(t.selection.getRng(!0));j(t.dom,e,r),X(t.dom,t.dom.rename(e,n)),t.selection.setRng(S(o))}else $(t);else V(t,n,r)}(t,r,e,n)},removeList:$,mergeWithAdjacentLists:X},Z=function(t,r,o,i){var a,s,u=r.startContainer,c=r.startOffset;if(3===u.nodeType&&(o?c<u.data.length:c>0))return u;for(a=t.schema.getNonEmptyElements(),1===u.nodeType&&(u=e.getNode(u,c)),s=new n(u,i),o&&v(t.dom,u)&&s.next();u=s[o?"next":"prev2"]();){if("LI"===u.nodeName&&!u.hasChildNodes())return u;if(a[u.nodeName])return u;if(3===u.nodeType&&u.data.length>0)return u}},Q=function(t,e){var n=e.childNodes;return 1===n.length&&!c(n[0])&&t.isBlock(n[0])},tt=function(t,e,n){var r,o;if(o=Q(t,n)?n.firstChild:n,function(t,e){Q(t,e)&&t.remove(e.firstChild,!0)}(t,e),!b(t,e,!0))for(;r=e.firstChild;)o.appendChild(r)},et=function(t,e,n){var r,o,i=e.parentNode;y(t,e)&&y(t,n)&&(c(n.lastChild)&&(o=n.lastChild),i===n.lastChild&&d(i.previousSibling)&&t.remove(i.previousSibling),(r=n.lastChild)&&d(r)&&e.hasChildNodes()&&t.remove(r),b(t,n,!0)&&t.$(n).empty(),tt(t,e,n),o&&n.appendChild(o),t.remove(e),b(t,i)&&i!==t.getRoot()&&t.remove(i))},nt=function(t,e,n,r){var o=t.dom;if(o.isEmpty(r))!function(t,e,n){t.dom.$(n).empty(),et(t.dom,e,n),t.selection.setCursorLocation(n)}(t,n,r);else{var i=R(e);et(o,n,r),t.selection.setRng(S(i))}},rt=function(t,e){var n,r,o,i=t.dom,a=t.selection,s=a.getStart(),u=A.getClosestListRootElm(t,s),c=i.getParent(a.getStart(),"LI",u);if(c){if((n=c.parentNode)===t.getBody()&&b(i,n))return!0;if(r=x(a.getRng(!0)),(o=i.getParent(Z(t,r,e,u),"LI",u))&&o!==c)return e?nt(t,r,o,c):function(t,e,n,r){var o=R(e);et(t.dom,n,r);var i=S(o);t.selection.setRng(i)}(t,r,c,o),!0;if(!o&&!e&&G.removeList(t))return!0}return!1},ot=function(t,e){return rt(t,e)||function(t,e){var n=t.dom,r=t.selection.getStart(),o=A.getClosestListRootElm(t,r),i=n.getParent(r,n.isBlock,o);if(i&&n.isEmpty(i)){var a=x(t.selection.getRng(!0)),s=n.getParent(Z(t,a,e,o),"LI",o);if(s)return t.undoManager.transact(function(){!function(t,e,n){var r=t.getParent(e.parentNode,t.isBlock,n);t.remove(e),r&&t.isEmpty(r)&&t.remove(r)}(n,i,o),G.mergeWithAdjacentLists(n,s.parentNode),t.selection.select(s,!0),t.selection.collapse(e)}),!0}return!1}(t,e)},it=function(t,e){return t.selection.isCollapsed()?ot(t,e):function(t){var e=t.selection.getStart(),n=A.getClosestListRootElm(t,e);return!!(t.dom.getParent(e,"LI,DT,DD",n)||A.getSelectedListItems(t).length>0)&&(t.undoManager.transact(function(){t.execCommand("Delete"),T(t.dom,t.getBody())}),!0)}(t)},at=function(t){t.on("keydown",function(e){e.keyCode===r.BACKSPACE?it(t,!1)&&e.preventDefault():e.keyCode===r.DELETE&&it(t,!0)&&e.preventDefault()})},st=it,ut=function(t){return{backspaceDelete:function(e){st(t,e)}}},ct=a.DOM,lt=function(t,e){var n;if(c(t)){for(;n=t.firstChild;)e.appendChild(n);ct.remove(t)}},ft=function(t){var e,n,r,o,i=A.getSelectedListItems(t);if(i.length){for(var a=R(t.selection.getRng(!0)),s=0;s<i.length&&(e=i[s],n=void 0,r=void 0,o=void 0,("DT"===e.nodeName?(ct.rename(e,"DD"),1):(n=e.previousSibling)&&c(n)?(n.appendChild(e),1):n&&"LI"===n.nodeName&&c(n.lastChild)?(n.lastChild.appendChild(e),lt(e.lastChild,n.lastChild),1):(n=e.nextSibling)&&c(n)?(n.insertBefore(e,n.firstChild),1):(n=e.previousSibling)&&"LI"===n.nodeName&&(r=ct.create(e.parentNode.nodeName),(o=ct.getStyle(e.parentNode,"listStyleType"))&&ct.setStyle(r,"listStyleType",o),n.appendChild(r),r.appendChild(e),lt(e.lastChild,r),1))||0!==s);s++);return t.selection.setRng(S(a)),t.nodeChanged(),!0}},dt=function(t,e){return function(){var n=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===e}},ht=function(t){t.on("BeforeExecCommand",function(e){var n,r=e.command.toLowerCase();if("indent"===r?ft(t)&&(n=!0):"outdent"===r&&F(t)&&(n=!0),n)return t.fire("ExecCommand",{command:e.command}),e.preventDefault(),!0}),t.addCommand("InsertUnorderedList",function(e,n){G.toggleList(t,"UL",n)}),t.addCommand("InsertOrderedList",function(e,n){G.toggleList(t,"OL",n)}),t.addCommand("InsertDefinitionList",function(e,n){G.toggleList(t,"DL",n)}),t.addQueryStateHandler("InsertUnorderedList",dt(t,"UL")),t.addQueryStateHandler("InsertOrderedList",dt(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",dt(t,"DL"))},mt=function(t){return t.getParam("lists_indent_on_tab",!0)},gt=function(t){mt(t)&&function(t){t.on("keydown",function(e){e.keyCode!==r.TAB||r.metaKeyPressed(e)||t.dom.getParent(t.selection.getStart(),"LI,DT,DD")&&(e.preventDefault(),e.shiftKey?F(t):ft(t))})}(t),at(t)},pt=function(t,e){return function(n){var r=n.control;t.on("NodeChange",function(t){var n=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}(t.parents,f),o=-1!==n?t.parents.slice(0,n):t.parents,a=i.grep(o,c);r.active(a.length>0&&a[0].nodeName===e)})}},vt=function(t){(function(t,e){var n=t.settings.plugins?t.settings.plugins:"";return-1!==i.inArray(n.split(/[ ,]/),e)})(t,"advlist")||(t.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:pt(t,"OL")}),t.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:pt(t,"UL")})),t.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){return function(e){var n=e.control;t.on("nodechange",function(){var e=A.getSelectedListItems(t),r=e.length>0&&h(e[0]);n.disabled(r)})}}(t)})};t.add("lists",function(t){return gt(t),vt(t),ht(t),ut(t)})}()},Z594:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("TbPv"),o=n.n(r),i=(n("o5MN"),n("BzBW"),n("+uI+"),n("m/OW"),n("Z3om"),{props:["value","disabled","placeholder","name","height"],data:function(){return{editor:null}},watch:{disabled:function(t){this.editor.getBody().setAttribute("contenteditable",!t)}},mounted:function(){var t=this,e={target:this.$el.children[0],skin_url:"/css/skins/lightgray",plugins:"table charmap link lists",content_css:["//fonts.googleapis.com/css?family=Lato:300,300i,400,400i"],link_title:!1,charmap:[[643,"esh"],[353,"s (hacek)"],[269,"c (hacek)"],[952,"theta"],[331,"eng"],[638,"alveolar tap"],[240,"eth"],[660,"glottal stop"],[8709,"null"],[593,"script a"],[230,"ash"],[596,"open o"],[603,"epsilon"],[601,"schwa"],[769,"acute accent"],[768,"grave accent"],[770,"circumflex"],[774,"breve"],[772,"macron"],[771,"tilde"],[720,"IPA length symbol"],[183,"Algonquianist length symbol"]],toolbar:"undo redo | bold italic underline | link | charmap | bullist numlist outdent indent | table | clearformatting",menubar:!1,statusbar:!1,setup:function(e){e.on("change",function(n){t.updateValue(e.getContent())}),e.on("input",function(n){t.updateValue(e.getContent())}),e.on("click",function(e){o.a.remove(t.$el.children[0])}),e.addButton("clearformatting",{image:"https://cdn4.iconfinder.com/data/icons/text-editor-3/100/Minio_Text_Editor_Bold-16-512.png",tooltip:"Clear Formatting",onclick:function(){var t=e.getContent({format:"raw"});t=(t=t.replace(/(?:<|<\/)(?!p|\/p|ul|\/ul|li|\/li|ol|\/ol)(?:.|\n)*?>/gm,"")).replace(/style=['"][^>]*['"]/gm,""),e.setContent(t)}})}};this.height&&(e.height=this.height),o.a.init(e).then(function(e){t.editor=e[0]})},methods:{updateValue:function(t){this.$emit("input",t.trim())}}}),a=n("XyMi"),s=Object(a.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"control",class:{"mce-disabled":this.disabled}},[e("textarea",{staticClass:"textarea",attrs:{name:this.name,id:this.name,placeholder:this.placeholder,disabled:this.disabled},domProps:{value:this.value}})])},[],!1,null,null,null);e.default=s.exports},"m/OW":function(t,e){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.util.VK"),n=function(t){return t.target_list},r=function(t){return t.rel_list},o=function(t){return t.link_class_list},i=function(t){return"boolean"==typeof t.link_assume_external_targets&&t.link_assume_external_targets},a=function(t){return"boolean"==typeof t.link_context_toolbar&&t.link_context_toolbar},s=function(t){return t.link_list},u=function(t){return"string"==typeof t.default_link_target},c=function(t){return t.default_link_target},l=n,f=function(t,e){t.settings.target_list=e},d=function(t){return!1!==n(t)},h=r,m=function(t){return void 0!==r(t)},g=o,p=function(t){return void 0!==o(t)},v=function(t){return!1!==t.link_title},b=function(t){return"boolean"==typeof t.allow_unsafe_link_target&&t.allow_unsafe_link_target},y=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),w=tinymce.util.Tools.resolve("tinymce.Env"),x=function(t){if(!w.ie||w.ie>10){var e=document.createElement("a");e.target="_blank",e.href=t,e.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,e){document.body.appendChild(t),t.dispatchEvent(e),document.body.removeChild(t)}(e,n)}else{var r=window.open("","_blank");if(r){r.opener=null;var o=r.document;o.open(),o.write('<meta http-equiv="refresh" content="0; url='+y.DOM.encode(t)+'">'),o.close()}}},C=tinymce.util.Tools.resolve("tinymce.util.Tools"),R=function(t,e){var n=["noopener"],r=t?t.split(/\s+/):[],o=function(t){return t.filter(function(t){return-1===C.inArray(n,t)})};return(r=e?function(t){return(t=o(t)).length?t.concat(n):n}(r):o(r)).length?function(t){return C.trim(t.sort().join(" "))}(r):null},S=function(t,e){return e=e||t.selection.getNode(),_(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")},k=function(t){return t&&"A"===t.nodeName&&t.href},_=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},T=function(t,e){var n,r;(r=t.dom.select("img",e)[0])&&(n=t.dom.getParents(r,"a[href]",e)[0])&&(n.parentNode.insertBefore(r,n),t.dom.remove(n))},E=function(t,e,n){var r,o;(o=t.dom.select("img",e)[0])&&(r=t.dom.create("a",n),o.parentNode.insertBefore(r,o),r.appendChild(o))},N=function(t,e){return function(n){t.undoManager.transact(function(){var r=t.selection.getNode(),o=S(t,r),i={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};m(t.settings)||!1!==b(t.settings)||(i.rel=R(i.rel,"_blank"===i.target)),n.href===e.href&&(e.attach(),e={}),o?(t.focus(),n.hasOwnProperty("text")&&("innerText"in o?o.innerText=n.text:o.textContent=n.text),t.dom.setAttribs(o,i),t.selection.select(o),t.undoManager.add()):_(r)?E(t,r,i):n.hasOwnProperty("text")?t.insertContent(t.dom.createHTML("a",i,t.dom.encode(n.text))):t.execCommand("mceInsertLink",!1,i)})}},D=function(t){return function(){t.undoManager.transact(function(){var e=t.selection.getNode();_(e)?T(t,e):t.execCommand("unlink")})}},A=k,P=function(t){return C.grep(t,k).length>0},O=function(t){return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1===t.indexOf("href=")))},M=S,B=function(t,e){return function(t){return t.replace(/\uFEFF/g,"")}(e?e.innerText||e.textContent:t.getContent({format:"text"}))},H=R,W=tinymce.util.Tools.resolve("tinymce.util.Delay"),I=tinymce.util.Tools.resolve("tinymce.util.XHR"),L={},z=function(t,e,n){var r=function(t,n){return n=n||[],C.each(t,function(t){var o={text:t.text||t.title};t.menu?o.menu=r(t.menu):(o.value=t.value,e&&e(o)),n.push(o)}),n};return r(t,n||[])},F=function(t,e,n){var r=t.selection.getRng();W.setEditorTimeout(t,function(){t.windowManager.confirm(e,function(e){t.selection.setRng(r),n(e)})})},q=function(t,e){var n,r,o,a,s,y,w,x,R,S,k,_={},T=t.selection,E=t.dom,A=function(t){var e=o.find("#text");(!e.value()||t.lastControl&&e.value()===t.lastControl.text())&&e.value(t.control.text()),o.find("#href").value(t.control.value())},P=function(){r||!a||_.text||this.parent().parent().find("#text")[0].value(this.value())};a=O(T.getContent()),n=M(t),_.text=r=B(t.selection,n),_.href=n?E.getAttrib(n,"href"):"",n?_.target=E.getAttrib(n,"target"):u(t.settings)&&(_.target=c(t.settings)),(k=E.getAttrib(n,"rel"))&&(_.rel=k),(k=E.getAttrib(n,"class"))&&(_.class=k),(k=E.getAttrib(n,"title"))&&(_.title=k),a&&(s={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){_.text=this.value()}}),e&&(y={type:"listbox",label:"Link list",values:z(e,function(e){e.value=t.convertURL(e.value||e.url,"href")},[{text:"None",value:""}]),onselect:A,value:t.convertURL(_.href,"href"),onPostRender:function(){y=this}}),d(t.settings)&&(void 0===l(t.settings)&&f(t,[{text:"None",value:""},{text:"New window",value:"_blank"}]),x={name:"target",type:"listbox",label:"Target",values:z(l(t.settings))}),m(t.settings)&&(w={name:"rel",type:"listbox",label:"Rel",values:z(h(t.settings),function(e){!1===b(t.settings)&&(e.value=H(e.value,"_blank"===_.target))})}),p(t.settings)&&(R={name:"class",type:"listbox",label:"Class",values:z(g(t.settings),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"a",classes:[e.value]})})})}),v(t.settings)&&(S={name:"title",type:"textbox",label:"Title",value:_.title}),o=t.windowManager.open({title:"Insert link",data:_,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(e){var n=e.meta||{};y&&y.value(t.convertURL(this.value(),"href")),C.each(e.meta,function(t,e){var n=o.find("#"+e);"text"===e?0===r.length&&(n.value(t),_.text=t):n.value(t)}),n.attach&&(L={href:this.value(),attach:n.attach}),n.text||P.call(this)},onkeyup:P,onpaste:P,onbeforecall:function(t){t.meta=o.toJSON()}},s,S,function(e){var n=[];if(C.each(t.dom.select("a:not([href])"),function(t){var r=t.name||t.id;r&&n.push({text:r,value:"#"+r,selected:-1!==e.indexOf("#"+r)})}),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:A}}(_.href),y,w,x,R],onSubmit:function(e){var n=i(t.settings),o=N(t,L),s=D(t),u=C.extend({},_,e.data),c=u.href;c?(a&&u.text!==r||delete u.text,c.indexOf("@")>0&&-1===c.indexOf("//")&&-1===c.indexOf("mailto:")?F(t,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(t){t&&(u.href="mailto:"+c),o(u)}):!0===n&&!/^\w+:/i.test(c)||!1===n&&/^\s*www[\.|\d\.]/i.test(c)?F(t,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(t){t&&(u.href="http://"+c),o(u)}):o(u)):s()}})},j=function(t){!function(t,e){var n=s(t.settings);"string"==typeof n?I.send({url:n,success:function(n){e(t,JSON.parse(n))}}):"function"==typeof n?n(function(n){e(t,n)}):e(t,n)}(t,q)},U=function(t,e){return t.dom.getParent(e,"a[href]")},V=function(t){return U(t,t.selection.getStart())},$=function(t,e){if(e){var n=function(t){var e=t.getAttribute("data-mce-href");return e||t.getAttribute("href")}(e);if(/^#/.test(n)){var r=t.$(n);r.length&&t.selection.scrollIntoView(r[0],!0)}else x(e.href)}},Y=function(t){return function(){j(t)}},X=function(t){return function(){$(t,V(t))}},K=function(t){return function(e){var n,r,o;return!!(a(t.settings)&&!function(t){var e=t.plugins.contextmenu;return!!e&&e.isContextMenuVisible()}(t)&&A(e)&&3===(o=(r=(n=t.selection).getRng()).startContainer).nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<o.data.length)}},J=function(t){t.on("click",function(n){var r=U(t,n.target);r&&e.metaKeyPressed(n)&&(n.preventDefault(),$(t,r))}),t.on("keydown",function(e){var n=V(t);n&&13===e.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(e)&&(e.preventDefault(),$(t,n))})},G=function(t){return function(){var e=this;t.on("nodechange",function(n){e.active(!t.readonly&&!!M(t,n.element))})}},Z=function(t){return function(){var e=this,n=function(t){P(t.parents)?e.show():e.hide()};P(t.dom.getParents(t.selection.getStart()))||e.hide(),t.on("nodechange",n),e.on("remove",function(){t.off("nodechange",n)})}},Q=function(t){t.addCommand("mceLink",Y(t))},tt=function(t){t.addShortcut("Meta+K","",Y(t))},et=function(t){t.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:Y(t),onpostrender:G(t)}),t.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:D(t),onpostrender:G(t)}),t.addContextToolbar&&t.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:X(t)})},nt=function(t){t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:X(t),onPostRender:Z(t),prependToContext:!0}),t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:Y(t),stateSelector:"a[href]",context:"insert",prependToContext:!0})},rt=function(t){t.addContextToolbar&&t.addContextToolbar(K(t),"openlink | link unlink")};t.add("link",function(t){et(t),nt(t),rt(t),J(t),Q(t),tt(t)})}()},o5MN:function(t,e){!function(){"use strict";var t,e=tinymce.util.Tools.resolve("tinymce.ThemeManager"),n=tinymce.util.Tools.resolve("tinymce.EditorManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(t){return!1!==i(t)},i=function(t){return t.getParam("menubar")},a=function(t){return t.getParam("toolbar_items_size")},s=function(t){return t.getParam("menu")},u=function(t){return!1===t.settings.skin},c=function(t){var e=t.getParam("resize","vertical");return!1===e?"none":"both"===e?"both":"vertical"},l=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=tinymce.util.Tools.resolve("tinymce.ui.Factory"),d=tinymce.util.Tools.resolve("tinymce.util.I18n"),h=function(t){return t.fire("SkinLoaded")},m=function(t){return t.fire("ResizeEditor")},g=function(t){return t.fire("BeforeRenderUI")},p=function(t,e){return function(){var n=t.find(e)[0];n&&n.focus(!0)}},v=function(t,e){t.shortcuts.add("Alt+F9","",p(e,"menubar")),t.shortcuts.add("Alt+F10,F10","",p(e,"toolbar")),t.shortcuts.add("Alt+F11","",p(e,"elementpath")),e.on("cancel",function(){t.focus()})},b=tinymce.util.Tools.resolve("tinymce.geom.Rect"),y=tinymce.util.Tools.resolve("tinymce.util.Delay"),w=function(t){return function(){return t}},x={noop:function(){},noarg:function(t){return function(){return t()}},compose:function(t,e){return function(){return t(e.apply(null,arguments))}},constant:w,identity:function(t){return t},tripleEquals:function(t,e){return t===e},curry:function(t){for(var e=new Array(arguments.length-1),n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];var o=e.concat(n);return t.apply(null,o)}},not:function(t){return function(){return!t.apply(null,arguments)}},die:function(t){return function(){throw new Error(t)}},apply:function(t){return t()},call:function(t){t()},never:w(!1),always:w(!0)},C=x.never,R=x.always,S=function(){return k},k=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:C,isSome:C,isNone:R,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},or:n,orThunk:e,map:S,ap:S,each:function(){},bind:S,flatten:S,exists:C,forall:R,filter:S,equals:t,equals_:t,toArray:function(){return[]},toString:x.constant("none()")};return Object.freeze&&Object.freeze(r),r}(),_=function(t){var e=function(){return t},n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:R,isNone:C,getOr:e,getOrThunk:e,getOrDie:e,or:n,orThunk:n,map:function(e){return _(e(t))},ap:function(e){return e.fold(S,function(e){return _(e(t))})},each:function(e){e(t)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(t)?o:k},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(C,function(e){return n(t,e)})},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},T={some:_,none:S,from:function(t){return null===t||void 0===t?k:_(t)}},E=function(t){return t?t.getRoot().uiContainer:null},N={getUiContainerDelta:function(t){var e=E(t);if(e&&"static"!==l.DOM.getStyle(e,"position",!0)){var n=l.DOM.getPos(e),r=e.scrollLeft-n.x,o=e.scrollTop-n.y;return T.some({x:r,y:o})}return T.none()},setUiContainer:function(t,e){var n=l.DOM.select(t.settings.ui_container)[0];e.getRoot().uiContainer=n},getUiContainer:E,inheritUiContainer:function(t,e){return e.uiContainer=E(t)}},D=function(t,e,n){var o,i=[];if(e)return r.each(e.split(/[ ,]/),function(e){var r,a=function(){var n=t.selection;e.settings.stateSelector&&n.selectorChanged(e.settings.stateSelector,function(t){e.active(t)},!0),e.settings.disabledStateSelector&&n.selectorChanged(e.settings.disabledStateSelector,function(t){e.disabled(t)})};"|"===e?o=null:(o||(o={type:"buttongroup",items:[]},i.push(o)),t.buttons[e]&&(r=e,"function"==typeof(e=t.buttons[r])&&(e=e()),e.type=e.type||"button",e.size=n,e=f.create(e),o.items.push(e),t.initialized?a():t.on("init",a)))}),{type:"toolbar",layout:"flow",items:i}},A=D,P=function(t,e){var n=[];if(r.each(function(t){var e=t.getParam("toolbar");return!1===e?[]:r.isArray(e)?r.grep(e,function(t){return t.length>0}):function(t,e){for(var n=[],r=1;r<10;r++){var o=t["toolbar"+r];if(!o)break;n.push(o)}var i=t.toolbar?[t.toolbar]:[e];return n.length>0?n:i}(t.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image")}(t),function(r){var o;(o=r)&&n.push(D(t,o,e))}),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},O=l.DOM,M=function(t){return{left:t.x,top:t.y,width:t.w,height:t.h,right:t.x+t.w,bottom:t.y+t.h}},B=function(t,e){t.moveTo(e.left,e.top)},H=function(t,e,n,r,o,i){return i=M({x:e,y:n,w:i.w,h:i.h}),t&&(i=t({elementRect:M(r),contentAreaRect:M(o),panelRect:i})),i},W=function(t){var e,n=function(){return t.contextToolbars||[]},o=function(e,n){var o,i,a,s,u,c,l,f=function(t){return t.getParam("inline_toolbar_position_handler")}(t);if(!t.removed)if(e&&e.toolbar.panel){var d,h,m,g;l=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],u=e.toolbar.panel,n&&u.show(),d=e.element,h=O.getPos(t.getContentAreaContainer()),m=t.dom.getRect(d),"BODY"===(g=t.dom.getRoot()).nodeName&&(m.x-=g.ownerDocument.documentElement.scrollLeft||g.scrollLeft,m.y-=g.ownerDocument.documentElement.scrollTop||g.scrollTop),m.x+=h.x,m.y+=h.y,a=m,i=O.getRect(u.getEl()),s=O.getRect(t.getContentAreaContainer()||t.getBody());var p=N.getUiContainerDelta(u).getOr({x:0,y:0});if(a.x+=p.x,a.y+=p.y,i.x+=p.x,i.y+=p.y,s.x+=p.x,s.y+=p.y,"inline"!==O.getStyle(e.element,"display",!0)){var v=e.element.getBoundingClientRect();a.w=v.width,a.h=v.height}t.inline||(s.w=t.getDoc().documentElement.offsetWidth),t.selection.controlSelection.isResizable(e.element)&&a.w<25&&(a=b.inflate(a,0,8)),o=b.findBestRelativePosition(i,a,s,l),a=b.clamp(a,s),o?(c=b.relativePosition(i,a,o),B(u,H(f,c.x,c.y,a,s,i))):(s.h+=i.h,(a=b.intersect(s,a))?(o=b.findBestRelativePosition(i,a,s,["bc-tc","bl-tl","br-tr"]))?(c=b.relativePosition(i,a,o),B(u,H(f,c.x,c.y,a,s,i))):B(u,H(f,a.x,a.y,a,s,i)):u.hide()),function(t,e,n){e=e?e.substr(0,2):"",r.each({t:"down",b:"up"},function(r,o){t.classes.toggle("arrow-"+r,n(o,e.substr(0,1)))}),r.each({l:"left",r:"right"},function(r,o){t.classes.toggle("arrow-"+r,n(o,e.substr(1,1)))})}(u,o,function(t,e){return t===e})}else!function(t){r.each(t.contextToolbars,function(t){t.panel&&t.panel.hide()})}(t)},i=function(e){return function(){y.requestAnimationFrame(function(){t.selection&&o(u(t.selection.getNode()),e)})}},a=function(n){var r;if(n.toolbar.panel)return n.toolbar.panel.show(),void o(n);r=f.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:A(t,n.toolbar.items),oncancel:function(){t.focus()}}),N.setUiContainer(t,r),function(n){if(!e){var r=i(!0),o=N.getUiContainer(n);e=t.selection.getScrollContainer()||t.getWin(),O.bind(e,"scroll",r),O.bind(o,"scroll",r),t.on("remove",function(){O.unbind(e,"scroll",r),O.unbind(o,"scroll",r)})}}(r),n.toolbar.panel=r,r.renderTo().reflow(),o(n)},s=function(){r.each(n(),function(t){t.panel&&t.panel.hide()})},u=function(e){var r,o,i,a=n();for(r=(i=t.$(e).parents().add(e)).length-1;r>=0;r--)for(o=a.length-1;o>=0;o--)if(a[o].predicate(i[r]))return{toolbar:a[o],element:i[r]};return null};t.on("click keyup setContent ObjectResized",function(e){("setcontent"!==e.type||e.selection)&&y.setEditorTimeout(t,function(){var e;(e=u(t.selection.getNode()))?(s(),a(e)):s()})}),t.on("blur hide contextmenu",s),t.on("ObjectResizeStart",function(){var e=u(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),t.on("ResizeEditor ResizeWindow",i(!0)),t.on("nodeChange",i(!1)),t.on("remove",function(){r.each(n(),function(t){t.panel&&t.panel.remove()}),t.contextToolbars={}}),t.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var e=u(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})},I=void 0===(t=Array.prototype.indexOf)?function(t,e){return V(t,e)}:function(e,n){return t.call(e,n)},L=function(t,e){return I(t,e)>-1},z=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o,t)}return r},F=function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n,t)},q=function(t,e){for(var n=t.length-1;n>=0;n--)e(t[n],n,t)},j=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r,t)&&n.push(i)}return n},U=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n,t))return T.some(n);return T.none()},V=function(t,e){for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return n;return-1},$=Array.prototype.push,Y=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!Array.prototype.isPrototypeOf(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);$.apply(e,t[n])}return e},X=function(t,e){for(var n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n,t))return!1;return!0},K=Array.prototype.slice,J={map:z,each:F,eachr:q,partition:function(t,e){for(var n=[],r=[],o=0,i=t.length;o<i;o++){var a=t[o];(e(a,o,t)?n:r).push(a)}return{pass:n,fail:r}},filter:j,groupBy:function(t,e){if(0===t.length)return[];for(var n=e(t[0]),r=[],o=[],i=0,a=t.length;i<a;i++){var s=t[i],u=e(s);u!==n&&(r.push(o),o=[]),n=u,o.push(s)}return 0!==o.length&&r.push(o),r},indexOf:function(t,e){var n=I(t,e);return-1===n?T.none():T.some(n)},foldr:function(t,e,n){return q(t,function(t){n=e(n,t)}),n},foldl:function(t,e,n){return F(t,function(t){n=e(n,t)}),n},find:function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n,t))return T.some(o)}return T.none()},findIndex:U,flatten:Y,bind:function(t,e){var n=z(t,e);return Y(n)},forall:X,exists:function(t,e){return U(t,e).isSome()},contains:L,equal:function(t,e){return t.length===e.length&&X(t,function(t,n){return t===e[n]})},reverse:function(t){var e=K.call(t,0);return e.reverse(),e},chunk:function(t,e){for(var n=[],r=0;r<t.length;r+=e){var o=t.slice(r,r+e);n.push(o)}return n},difference:function(t,e){return j(t,function(t){return!L(e,t)})},mapToObject:function(t,e){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];n[String(i)]=e(i,r)}return n},pure:function(t){return[t]},sort:function(t,e){var n=K.call(t,0);return n.sort(e),n},range:function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},head:function(t){return 0===t.length?T.none():T.some(t[0])},last:function(t){return 0===t.length?T.none():T.some(t[t.length-1])}},G={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck"},table:{title:"Table"},help:{title:"Help"}},Z=function(t,e){return"|"===t?{name:"|",item:{text:"|"}}:e?{name:t,item:e}:null},Q=function(t){return t&&"|"===t.item.text},tt=function(t,e,n,o){var i,a,s,u;return e?(a=e[o],u=!0):a=G[o],a&&(i={text:a.title},s=[],r.each((a.items||"").split(/[ ,]/),function(e){var n=Z(e,t[e]);n&&s.push(n)}),u||r.each(t,function(t,e){t.context!==o||function(t,e){return J.findIndex(t,function(t){return t.name===e}).isSome()}(s,e)||("before"===t.separator&&s.push({name:"|",item:{text:"|"}}),t.prependToContext?s.unshift(Z(e,t)):s.push(Z(e,t)),"after"===t.separator&&s.push({name:"|",item:{text:"|"}}))}),i.menu=J.map(function(t,e){var n=J.filter(t,function(t){return!1===e.hasOwnProperty(t.name)}),r=J.filter(n,function(t,e,n){return!Q(t)||!Q(n[e-1])});return J.filter(r,function(t,e,n){return!Q(t)||e>0&&e<n.length-1})}(s,n),function(t){return t.item}),!i.menu.length)?null:i},et=function(t){for(var e=[],n=function(t){var e,n=[],r=s(t);if(r)for(e in r)n.push(e);else for(e in G)n.push(e);return n}(t),o=r.makeMap(function(t){return t.getParam("removed_menuitems","")}(t).split(/[ ,]/)),a=i(t),u="string"==typeof a?a.split(/[ ,]/):n,c=0;c<u.length;c++){var l=u[c],f=tt(t.menuItems,s(t),o,l);f&&e.push(f)}return e},nt=l.DOM,rt=function(t){return{width:t.clientWidth,height:t.clientHeight}},ot=function(t,e,n){var r,o,i,a;r=t.getContainer(),o=t.getContentAreaContainer().firstChild,i=rt(r),a=rt(o),null!==e&&(e=Math.max(function(t){return t.getParam("min_width",100,"number")}(t),e),e=Math.min(function(t){return t.getParam("max_width",65535,"number")}(t),e),nt.setStyle(r,"width",e+(i.width-a.width)),nt.setStyle(o,"width",e)),n=Math.max(function(t){return t.getParam("min_height",100,"number")}(t),n),n=Math.min(function(t){return t.getParam("max_height",65535,"number")}(t),n),nt.setStyle(o,"height",n),m(t)},it=ot,at=function(t,e,n){var r=t.getContentAreaContainer();ot(t,r.clientWidth+e,r.clientHeight+n)},st=tinymce.util.Tools.resolve("tinymce.Env"),ut=function(t,e,n){var r,o=t.settings[n];o&&o((r=e.getEl("body"),{element:function(){return r}}))},ct=function(t,e,n){return function(o){var i=o.control,a=i.parents().filter("panel")[0],s=a.find("#"+e)[0],u=function(t,e){return r.grep(t,function(t){return t.name===e})[0]}(n,e);!function(t,e,n){r.each(n,function(n){var r=e.items().filter("#"+n.name)[0];r&&r.visible()&&n.name!==t&&(ut(n,r,"onhide"),r.visible(!1))})}(e,a,n),i.parent().items().each(function(t){t.active(!1)}),s&&s.visible()?(ut(u,s,"onhide"),s.hide(),i.active(!1)):(s?(s.show(),ut(u,s,"onshow")):(s=f.create({type:"container",name:e,layout:"stack",classes:"sidebar-panel",html:""}),a.prepend(s),ut(u,s,"onrender"),ut(u,s,"onshow")),i.active(!0)),m(t)}},lt=function(t){return!(st.ie&&!(st.ie>=11)||!t.sidebars)&&t.sidebars.length>0},ft=function(t){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:r.map(t.sidebars,function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:ct(t,e.name,t.sidebars)}})}]}},dt=function(t){var e=function(){t._skinLoaded=!0,h(t)};return function(){t.initialized?e():t.on("init",e)}},ht=l.DOM,mt=function(t){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:t,html:""}},gt=function(t,e,n){var r,i,s;if(!1===u(t)&&n.skinUiCss?ht.styleSheetLoader.load(n.skinUiCss,dt(t)):dt(t)(),r=e.panel=f.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===o(t)?null:{type:"menubar",border:"0 0 1 0",items:et(t)},P(t,a(t))]},lt(t)?function(t){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[mt("0"),ft(t)]}}(t):mt("1 0 0 0")]}),N.setUiContainer(t,r),"none"!==c(t)&&(i={type:"resizehandle",direction:c(t),onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;s={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"===c(t)?it(t,s.width+e.deltaX,s.height+e.deltaY):it(t,null,s.height+e.deltaY)}}),function(t){return t.getParam("statusbar",!0,"boolean")}(t)){var l=d.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),h=function(t){return t.getParam("branding",!0,"boolean")}(t)?{type:"label",classes:"branding",html:" "+l}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:t},i,h]})}return g(t),t.on("SwitchMode",function(t){return function(e){t.find("*").disabled("readonly"===e.mode)}}(r)),r.renderBefore(n.targetNode).reflow(),function(t){return t.getParam("readonly",!1,"boolean")}(t)&&t.setMode("readonly"),n.width&&ht.setStyle(r.getEl(),"width",n.width),t.on("remove",function(){r.remove(),r=null}),v(t,r),W(t),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},pt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),vt=0,bt={id:function(){return"mceu_"+vt++},create:function(t,e,n){var o=document.createElement(t);return l.DOM.setAttribs(o,e),"string"==typeof n?o.innerHTML=n:r.each(n,function(t){t.nodeType&&o.appendChild(t)}),o},createFragment:function(t){return l.DOM.createFragment(t)},getWindowSize:function(){return l.DOM.getViewPort()},getSize:function(t){var e,n;if(t.getBoundingClientRect){var r=t.getBoundingClientRect();e=Math.max(r.width||r.right-r.left,t.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,t.offsetHeight)}else e=t.offsetWidth,n=t.offsetHeight;return{width:e,height:n}},getPos:function(t,e){return l.DOM.getPos(t,e||bt.getContainer())},getContainer:function(){return st.container?st.container:document.body},getViewPort:function(t){return l.DOM.getViewPort(t)},get:function(t){return document.getElementById(t)},addClass:function(t,e){return l.DOM.addClass(t,e)},removeClass:function(t,e){return l.DOM.removeClass(t,e)},hasClass:function(t,e){return l.DOM.hasClass(t,e)},toggleClass:function(t,e,n){return l.DOM.toggleClass(t,e,n)},css:function(t,e,n){return l.DOM.setStyle(t,e,n)},getRuntimeStyle:function(t,e){return l.DOM.getStyle(t,e,!0)},on:function(t,e,n,r){return l.DOM.bind(t,e,n,r)},off:function(t,e,n){return l.DOM.unbind(t,e,n)},fire:function(t,e,n){return l.DOM.fire(t,e,n)},innerHtml:function(t,e){l.DOM.setHTML(t,e)}},yt=function(t){return"static"===bt.getRuntimeStyle(t,"position")},wt=function(t){return t.state.get("fixed")};function xt(t,e,n){var r,o,i,a,s,u,c,l,f,d;return f=Ct(),i=(o=bt.getPos(e,N.getUiContainer(t))).x,a=o.y,wt(t)&&yt(document.body)&&(i-=f.x,a-=f.y),r=t.getEl(),s=(d=bt.getSize(r)).width,u=d.height,c=(d=bt.getSize(e)).width,l=d.height,"b"===(n=(n||"").split(""))[0]&&(a+=l),"r"===n[1]&&(i+=c),"c"===n[0]&&(a+=Math.round(l/2)),"c"===n[1]&&(i+=Math.round(c/2)),"b"===n[3]&&(a-=u),"r"===n[4]&&(i-=s),"c"===n[3]&&(a-=Math.round(u/2)),"c"===n[4]&&(i-=Math.round(s/2)),{x:i,y:a,w:s,h:u}}var Ct=function(){return{x:0,y:0,w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.defaultView.innerWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.defaultView.innerHeight)}},Rt=function(t){var e=N.getUiContainer(t);return e&&!wt(t)?function(t){return{x:0,y:0,w:t.scrollWidth-1,h:t.scrollHeight-1}}(e):Ct()},St={testMoveRel:function(t,e){for(var n=Rt(this),r=0;r<e.length;r++){var o=xt(this,t,e[r]);if(wt(this)){if(o.x>0&&o.x+o.w<n.w&&o.y>0&&o.y+o.h<n.h)return e[r]}else if(o.x>n.x&&o.x+o.w<n.w+n.x&&o.y>n.y&&o.y+o.h<n.h+n.y)return e[r]}return e[0]},moveRel:function(t,e){"string"!=typeof e&&(e=this.testMoveRel(t,e));var n=xt(this,t,e);return this.moveTo(n.x,n.y)},moveBy:function(t,e){var n=this.layoutRect();return this.moveTo(n.x+t,n.y+e),this},moveTo:function(t,e){function n(t,e,n){return t<0?0:t+n>e&&(t=e-n)<0?0:t}if(this.settings.constrainToViewport){var r=Rt(this),o=this.layoutRect();t=n(t,r.w+r.x,o.w),e=n(e,r.h+r.y,o.h)}var i=N.getUiContainer(this);return i&&yt(i)&&!wt(this)&&(t-=i.scrollLeft,e-=i.scrollTop),i&&(t+=1,e+=1),this.state.get("rendered")?this.layoutRect({x:t,y:e}).repaint():(this.settings.x=t,this.settings.y=e),this.fire("move",{x:t,y:e}),this}},kt=tinymce.util.Tools.resolve("tinymce.util.Class"),_t=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Tt=function(t){var e;if(t)return"number"==typeof t?{top:t=t||0,left:t,bottom:t,right:t}:(1===(e=(t=t.split(" ")).length)?t[1]=t[2]=t[3]=t[0]:2===e?(t[2]=t[0],t[3]=t[1]):3===e&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0})},Et=function(t,e){function n(e){var n=parseFloat(function(e){var n=t.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(t,null);return r?(e=e.replace(/[A-Z]/g,function(t){return"-"+t}),r.getPropertyValue(e)):null}return t.currentStyle[e]}(e));return isNaN(n)?0:n}return{top:n(e+"TopWidth"),right:n(e+"RightWidth"),bottom:n(e+"BottomWidth"),left:n(e+"LeftWidth")}};function Nt(){}function Dt(t){this.cls=[],this.cls._map={},this.onchange=t||Nt,this.prefix=""}r.extend(Dt.prototype,{add:function(t){return t&&!this.contains(t)&&(this.cls._map[t]=!0,this.cls.push(t),this._change()),this},remove:function(t){if(this.contains(t)){var e=void 0;for(e=0;e<this.cls.length&&this.cls[e]!==t;e++);this.cls.splice(e,1),delete this.cls._map[t],this._change()}return this},toggle:function(t,e){var n=this.contains(t);return n!==e&&(n?this.remove(t):this.add(t),this._change()),this},contains:function(t){return!!this.cls._map[t]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Dt.prototype.toString=function(){var t;if(this.clsValue)return this.clsValue;t="";for(var e=0;e<this.cls.length;e++)e>0&&(t+=" "),t+=this.prefix+this.cls[e];return t};var At,Pt,Ot,Mt=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,Bt=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Ht=/^\s*|\s*$/g,Wt=kt.extend({init:function(t){var e=this.match;function n(t,n,o){var i;function a(t){t&&n.push(t)}return a(function(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}((i=Mt.exec(t.replace(Ht,"")))[1])),a(function(t){if(t)return function(e){return e._name===t}}(i[2])),a(function(t){if(t)return t=t.split("."),function(e){for(var n=t.length;n--;)if(!e.classes.contains(t[n]))return!1;return!0}}(i[3])),a(function(t,e,n){if(t)return function(r){var o=r[t]?r[t]():"";return e?"="===e?o===n:"*="===e?o.indexOf(n)>=0:"~="===e?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===e?o!==n:"^="===e?0===o.indexOf(n):"$="===e&&o.substr(o.length-n.length)===n:!!n}}(i[4],i[5],i[6])),a(function(t){var n;if(t)return(t=/(?:not\((.+)\))|(.+)/i.exec(t))[1]?(n=r(t[1],[]),function(t){return!e(t,n)}):(t=t[2],function(e,n,r){return"first"===t?0===n:"last"===t?n===r-1:"even"===t?n%2==0:"odd"===t?n%2==1:!!e[t]&&e[t]()})}(i[7])),n.pseudo=!!i[7],n.direct=o,n}function r(t,e){var o,i,a,s=[];do{if(Bt.exec(""),(i=Bt.exec(t))&&(t=i[3],s.push(i[1]),i[2])){o=i[3];break}}while(i);for(o&&r(o,e),t=[],a=0;a<s.length;a++)">"!==s[a]&&t.push(n(s[a],[],">"===s[a-1]));return e.push(t),e}this._selectors=r(t,[])},match:function(t,e){var n,r,o,i,a,s,u,c,l,f,d,h,m;for(n=0,r=(e=e||this._selectors).length;n<r;n++){for(m=t,h=0,o=(i=(a=e[n]).length)-1;o>=0;o--)for(c=a[o];m;){if(c.pseudo)for(l=f=(d=m.parent().items()).length;l--&&d[l]!==m;);for(s=0,u=c.length;s<u;s++)if(!c[s](m,l,f)){s=u+1;break}if(s===u){h++;break}if(o===i-1)break;m=m.parent()}if(h===i)return!0}return!1},find:function(t){var e,n,r=[],o=this._selectors;function i(t,e,n){var o,a,s,u,c,l=e[n];for(o=0,a=t.length;o<a;o++){for(c=t[o],s=0,u=l.length;s<u;s++)if(!l[s](c,o,a)){s=u+1;break}if(s===u)n===e.length-1?r.push(c):c.items&&i(c.items(),e,n+1);else if(l.direct)return;c.items&&i(c.items(),e,n)}}if(t.items){for(e=0,n=o.length;e<n;e++)i(t.items(),o[e],0);n>1&&(r=function(t){for(var e,n=[],r=t.length;r--;)(e=t[r]).__checked||(n.push(e),e.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(r))}return At||(At=Wt.Collection),new At(r)}}),It=Array.prototype.push,Lt=Array.prototype.slice;Ot={length:0,init:function(t){t&&this.add(t)},add:function(t){return r.isArray(t)?It.apply(this,t):t instanceof Pt?this.add(t.toArray()):It.call(this,t),this},set:function(t){var e,n=this.length;for(this.length=0,this.add(t),e=this.length;e<n;e++)delete this[e];return this},filter:function(t){var e,n,r,o,i=[];for("string"==typeof t?(t=new Wt(t),o=function(e){return t.match(e)}):o=t,e=0,n=this.length;e<n;e++)o(r=this[e])&&i.push(r);return new Pt(i)},slice:function(){return new Pt(Lt.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},each:function(t){return r.each(this,t),this},toArray:function(){return r.toArray(this)},indexOf:function(t){for(var e=this.length;e--&&this[e]!==t;);return e},reverse:function(){return new Pt(r.toArray(this).reverse())},hasClass:function(t){return!!this[0]&&this[0].classes.contains(t)},prop:function(t,e){var n;return void 0!==e?(this.each(function(n){n[t]&&n[t](e)}),this):(n=this[0])&&n[t]?n[t]():void 0},exec:function(t){var e=r.toArray(arguments).slice(1);return this.each(function(n){n[t]&&n[t].apply(n,e)}),this},remove:function(){for(var t=this.length;t--;)this[t].remove();return this},addClass:function(t){return this.each(function(e){e.classes.add(t)})},removeClass:function(t){return this.each(function(e){e.classes.remove(t)})}},r.each("fire on off show hide append prepend before after reflow".split(" "),function(t){Ot[t]=function(){var e=r.toArray(arguments);return this.each(function(n){t in n&&n[t].apply(n,e)}),this}}),r.each("text name disabled active selected checked visible parent value data".split(" "),function(t){Ot[t]=function(e){return this.prop(t,e)}}),Pt=kt.extend(Ot),Wt.Collection=Pt;var zt=Pt,Ft=function(t){this.create=t.create};Ft.create=function(t,e){return new Ft({create:function(n,r){var o,i=function(t){n.set(r,t.value)};return n.on("change:"+r,function(n){t.set(e,n.value)}),t.on("change:"+e,i),(o=n._bindings)||(o=n._bindings=[],n.on("destroy",function(){for(var t=o.length;t--;)o[t]()})),o.push(function(){t.off("change:"+e,i)}),t.get(e)}})};var qt=tinymce.util.Tools.resolve("tinymce.util.Observable");function jt(t){return t.nodeType>0}var Ut,Vt,$t=kt.extend({Mixins:[qt],init:function(t){var e,n;for(e in t=t||{})(n=t[e])instanceof Ft&&(t[e]=n.create(this,e));this.data=t},set:function(t,e){var n,o,i=this.data[t];if(e instanceof Ft&&(e=e.create(this,t)),"object"==typeof t){for(n in t)this.set(n,t[n]);return this}return function t(e,n){var o,i;if(e===n)return!0;if(null===e||null===n)return e===n;if("object"!=typeof e||"object"!=typeof n)return e===n;if(r.isArray(n)){if(e.length!==n.length)return!1;for(o=e.length;o--;)if(!t(e[o],n[o]))return!1}if(jt(e)||jt(n))return e===n;for(o in i={},n){if(!t(e[o],n[o]))return!1;i[o]=!0}for(o in e)if(!i[o]&&!t(e[o],n[o]))return!1;return!0}(i,e)||(this.data[t]=e,o={target:this,name:t,value:e,oldValue:i},this.fire("change:"+t,o),this.fire("change",o)),this},get:function(t){return this.data[t]},has:function(t){return t in this.data},bind:function(t){return Ft.create(this,t)},destroy:function(){this.fire("destroy")}}),Yt={},Xt={add:function(t){var e=t.parent();if(e){if(!e._layout||e._layout.isNative())return;Yt[e._id]||(Yt[e._id]=e),Ut||(Ut=!0,y.requestAnimationFrame(function(){var t,e;for(t in Ut=!1,Yt)(e=Yt[t]).state.get("rendered")&&e.reflow();Yt={}},document.body))}},remove:function(t){Yt[t._id]&&delete Yt[t._id]}},Kt="onmousewheel"in document,Jt=!1,Gt=0,Zt={Statics:{classPrefix:"mce-"},isRtl:function(){return Vt.rtl},classPrefix:"mce-",init:function(t){var e,n,o=this;function i(t){var e;for(t=t.split(" "),e=0;e<t.length;e++)o.classes.add(t[e])}o.settings=t=r.extend({},o.Defaults,t),o._id=t.id||"mceu_"+Gt++,o._aria={role:t.role},o._elmCache={},o.$=pt,o.state=new $t({visible:!0,active:!1,disabled:!1,value:""}),o.data=new $t(t.data),o.classes=new Dt(function(){o.state.get("rendered")&&(o.getEl().className=this.toString())}),o.classes.prefix=o.classPrefix,(e=t.classes)&&(o.Defaults&&(n=o.Defaults.classes)&&e!==n&&i(n),i(e)),r.each("title text name visible disabled active value".split(" "),function(e){e in t&&o[e](t[e])}),o.on("click",function(){if(o.disabled())return!1}),o.settings=t,o.borderBox=Tt(t.border),o.paddingBox=Tt(t.padding),o.marginBox=Tt(t.margin),t.hidden&&o.hide()},Properties:"parent,name",getContainerElm:function(){var t=N.getUiContainer(this);return t||bt.getContainer()},getParentCtrl:function(t){for(var e,n=this.getRoot().controlIdLookup;t&&n&&!(e=n[t.id]);)t=t.parentNode;return e},initLayoutRect:function(){var t,e,n,r,o,i,a,s,u,c,l=this.settings,f=this.getEl();t=this.borderBox=this.borderBox||Et(f,"border"),this.paddingBox=this.paddingBox||Et(f,"padding"),this.marginBox=this.marginBox||Et(f,"margin"),c=bt.getSize(f),s=l.minWidth,u=l.minHeight,o=s||c.width,i=u||c.height,n=l.width,r=l.height,a=void 0!==(a=l.autoResize)?a:!n&&!r,n=n||o,r=r||i;var d=t.left+t.right,h=t.top+t.bottom,m=l.maxWidth||65535,g=l.maxHeight||65535;return this._layoutRect=e={x:l.x||0,y:l.y||0,w:n,h:r,deltaW:d,deltaH:h,contentW:n-d,contentH:r-h,innerW:n-d,innerH:r-h,startMinWidth:s||0,startMinHeight:u||0,minW:Math.min(o,m),minH:Math.min(i,g),maxW:m,maxH:g,autoResize:a,scrollW:0},this._lastLayoutRect={},e},layoutRect:function(t){var e,n,r,o,i,a=this._layoutRect;return a||(a=this.initLayoutRect()),t?(r=a.deltaW,o=a.deltaH,void 0!==t.x&&(a.x=t.x),void 0!==t.y&&(a.y=t.y),void 0!==t.minW&&(a.minW=t.minW),void 0!==t.minH&&(a.minH=t.minH),void 0!==(n=t.w)&&(n=(n=n<a.minW?a.minW:n)>a.maxW?a.maxW:n,a.w=n,a.innerW=n-r),void 0!==(n=t.h)&&(n=(n=n<a.minH?a.minH:n)>a.maxH?a.maxH:n,a.h=n,a.innerH=n-o),void 0!==(n=t.innerW)&&(n=(n=n<a.minW-r?a.minW-r:n)>a.maxW-r?a.maxW-r:n,a.innerW=n,a.w=n+r),void 0!==(n=t.innerH)&&(n=(n=n<a.minH-o?a.minH-o:n)>a.maxH-o?a.maxH-o:n,a.innerH=n,a.h=n+o),void 0!==t.contentW&&(a.contentW=t.contentW),void 0!==t.contentH&&(a.contentH=t.contentH),(e=this._lastLayoutRect).x===a.x&&e.y===a.y&&e.w===a.w&&e.h===a.h||((i=Vt.repaintControls)&&i.map&&!i.map[this._id]&&(i.push(this),i.map[this._id]=!0),e.x=a.x,e.y=a.y,e.w=a.w,e.h=a.h),this):a},repaint:function(){var t,e,n,r,o,i,a,s,u,c;u=document.createRange?function(t){return t}:Math.round,t=this.getEl().style,r=this._layoutRect,s=this._lastRepaintRect||{},i=(o=this.borderBox).left+o.right,a=o.top+o.bottom,r.x!==s.x&&(t.left=u(r.x)+"px",s.x=r.x),r.y!==s.y&&(t.top=u(r.y)+"px",s.y=r.y),r.w!==s.w&&(c=u(r.w-i),t.width=(c>=0?c:0)+"px",s.w=r.w),r.h!==s.h&&(c=u(r.h-a),t.height=(c>=0?c:0)+"px",s.h=r.h),this._hasBody&&r.innerW!==s.innerW&&(c=u(r.innerW),(n=this.getEl("body"))&&((e=n.style).width=(c>=0?c:0)+"px"),s.innerW=r.innerW),this._hasBody&&r.innerH!==s.innerH&&(c=u(r.innerH),(n=n||this.getEl("body"))&&((e=e||n.style).height=(c>=0?c:0)+"px"),s.innerH=r.innerH),this._lastRepaintRect=s,this.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,bt.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(t,e){var n=this;return Qt(n).on(t,function(t){var e,r;return"string"!=typeof t?t:function(o){return e||n.parentsAndSelf().each(function(n){var o=n.settings.callbacks;if(o&&(e=o[t]))return r=n,!1}),e?e.call(r,o):(o.action=t,void this.fire("execute",o))}}(e)),n},off:function(t,e){return Qt(this).off(t,e),this},fire:function(t,e,n){if((e=e||{}).control||(e.control=this),e=Qt(this).fire(t,e),!1!==n&&this.parent)for(var r=this.parent();r&&!e.isPropagationStopped();)r.fire(t,e,!1),r=r.parent();return e},hasEventListeners:function(t){return Qt(this).has(t)},parents:function(t){var e,n=new zt;for(e=this.parent();e;e=e.parent())n.add(e);return t&&(n=n.filter(t)),n},parentsAndSelf:function(t){return new zt(this).add(this.parents(t))},next:function(){var t=this.parent().items();return t[t.indexOf(this)+1]},prev:function(){var t=this.parent().items();return t[t.indexOf(this)-1]},innerHtml:function(t){return this.$el.html(t),this},getEl:function(t){var e=t?this._id+"-"+t:this._id;return this._elmCache[e]||(this._elmCache[e]=pt("#"+e)[0]),this._elmCache[e]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(t){}return this},blur:function(){return this.getEl().blur(),this},aria:function(t,e){var n=this.getEl(this.ariaTarget);return void 0===e?this._aria[t]:(this._aria[t]=e,this.state.get("rendered")&&n.setAttribute("role"===t?t:"aria-"+t,e),this)},encode:function(t,e){return!1!==e&&(t=this.translate(t)),(t||"").replace(/[&<>"]/g,function(t){return"&#"+t.charCodeAt(0)+";"})},translate:function(t){return Vt.translate?Vt.translate(t):t},before:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this),!0),this},after:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this)),this},remove:function(){var t,e,n=this,r=n.getEl(),o=n.parent();if(n.items){var i=n.items().toArray();for(e=i.length;e--;)i[e].remove()}o&&o.items&&(t=[],o.items().each(function(e){e!==n&&t.push(e)}),o.items().set(t),o._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&pt(r).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],r&&r.parentNode&&r.parentNode.removeChild(r),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(t){return pt(t).before(this.renderHtml()),this.postRender(),this},renderTo:function(t){return pt(t||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var t,e,n,r,o,i=this,a=i.settings;for(r in i.$el=pt(i.getEl()),i.state.set("rendered",!0),a)0===r.indexOf("on")&&i.on(r.substr(2),a[r]);if(i._eventsRoot){for(n=i.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(r in o._nativeEvents)i._nativeEvents[r]=!0}te(i),a.style&&(t=i.getEl())&&(t.setAttribute("style",a.style),t.style.cssText=a.style),i.settings.border&&(e=i.borderBox,i.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left}));var s=i.getRoot();for(var u in s.controlIdLookup||(s.controlIdLookup={}),s.controlIdLookup[i._id]=i,i._aria)i.aria(u,i._aria[u]);!1===i.state.get("visible")&&(i.getEl().style.display="none"),i.bindStates(),i.state.on("change:visible",function(t){var e,n=t.value;i.state.get("rendered")&&(i.getEl().style.display=!1===n?"none":"",i.getEl().getBoundingClientRect()),(e=i.parent())&&(e._lastRect=null),i.fire(n?"show":"hide"),Xt.add(i)}),i.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(t){var e,n,r,o,i,a,s=this.getEl(),u=s.parentNode,c=function(t,e){var n,r,o=t;for(n=r=0;o&&o!==e&&o.nodeType;)n+=o.offsetLeft||0,r+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:r}}(s,u);return e=c.x,n=c.y,r=s.offsetWidth,o=s.offsetHeight,i=u.clientWidth,a=u.clientHeight,"end"===t?(e-=i-r,n-=a-o):"center"===t&&(e-=i/2-r/2,n-=a/2-o/2),u.scrollLeft=e,u.scrollTop=n,this},getRoot:function(){for(var t,e=this,n=[];e;){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);for(var r=n.length;r--;)n[r].rootControl=t;return t},reflow:function(){Xt.remove(this);var t=this.parent();return t&&t._layout&&!t._layout.isNative()&&t.reflow(),this}};function Qt(t){return t._eventDispatcher||(t._eventDispatcher=new _t({scope:t,toggleEvent:function(e,n){n&&_t.isNative(e)&&(t._nativeEvents||(t._nativeEvents={}),t._nativeEvents[e]=!0,t.state.get("rendered")&&te(t))}})),t._eventDispatcher}function te(t){var e,n,r,o,i,a;function s(e){var n=t.getParentCtrl(e.target);n&&n.fire(e.type,e)}function u(){var t=o._lastHoverCtrl;t&&(t.fire("mouseleave",{target:t.getEl()}),t.parents().each(function(t){t.fire("mouseleave",{target:t.getEl()})}),o._lastHoverCtrl=null)}function c(e){var n,r,i,a=t.getParentCtrl(e.target),s=o._lastHoverCtrl,u=0;if(a!==s){if(o._lastHoverCtrl=a,(r=a.parents().toArray().reverse()).push(a),s){for((i=s.parents().toArray().reverse()).push(s),u=0;u<i.length&&r[u]===i[u];u++);for(n=i.length-1;n>=u;n--)(s=i[n]).fire("mouseleave",{target:s.getEl()})}for(n=u;n<r.length;n++)(a=r[n]).fire("mouseenter",{target:a.getEl()})}}function l(e){e.preventDefault(),"mousewheel"===e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=t.fire("wheel",e)}if(i=t._nativeEvents){for((r=t.parents().toArray()).unshift(t),e=0,n=r.length;!o&&e<n;e++)o=r[e]._eventsRoot;for(o||(o=r[r.length-1]||t),t._eventsRoot=o,n=e,e=0;e<n;e++)r[e]._eventsRoot=o;var f=o._delegates;for(a in f||(f=o._delegates={}),i){if(!i)return!1;"wheel"!==a||Jt?("mouseenter"===a||"mouseleave"===a?o._hasMouseEnter||(pt(o.getEl()).on("mouseleave",u).on("mouseover",c),o._hasMouseEnter=1):f[a]||(pt(o.getEl()).on(a,s),f[a]=!0),i[a]=!1):Kt?pt(t.getEl()).on("mousewheel",l):pt(t.getEl()).on("DOMMouseScroll",l)}}}r.each("text title visible disabled active value".split(" "),function(t){Zt[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}});var ee=Vt=kt.extend(Zt),ne=function(t){return!!t.getAttribute("data-mce-tabstop")};function re(t){var e,n,r=t.root;function o(t){return t&&1===t.nodeType}try{e=document.activeElement}catch(t){e=document.body}function i(t){return o(t=t||e)?t.getAttribute("role"):null}function a(t){for(var n,r=t||e;r=r.parentNode;)if(n=i(r))return n}function s(t){var n=e;if(o(n))return n.getAttribute("aria-"+t)}function u(t){var e=t.tagName.toUpperCase();return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e}function c(t){var e=[];return function t(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){(function(t){return!(!u(t)||t.hidden)||!!ne(t)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(i(t))})(n)&&e.push(n);for(var r=0;r<n.childNodes.length;r++)t(n.childNodes[r])}}(t||r.getEl()),e}function l(t){var e,r;(r=(t=t||n).parents().toArray()).unshift(t);for(var o=0;o<r.length&&!(e=r[o]).settings.ariaRoot;o++);return e}function f(t,e){return t<0?t=e.length-1:t>=e.length&&(t=0),e[t]&&e[t].focus(),t}function d(t,n){var r=-1,o=l();n=n||c(o.getEl());for(var i=0;i<n.length;i++)n[i]===e&&(r=i);r+=t,o.lastAriaIndex=f(r,n)}function h(){"tablist"===a()?d(-1,c(e.parentNode)):n.parent().submenu?v():d(-1)}function m(){var t=i(),n=a();"tablist"===n?d(1,c(e.parentNode)):"menuitem"===t&&"menu"===n&&s("haspopup")?b():d(1)}function g(){d(-1)}function p(){var t=i(),e=a();"menuitem"===t&&"menubar"===e?b():"button"===t&&s("haspopup")?b({key:"down"}):d(1)}function v(){n.fire("cancel")}function b(t){t=t||{},n.fire("click",{target:e,aria:t})}return n=r.getParentCtrl(e),r.on("keydown",function(t){function r(t,n){u(e)||ne(e)||"slider"!==i(e)&&!1!==n(t)&&t.preventDefault()}if(!t.isDefaultPrevented())switch(t.keyCode){case 37:r(t,h);break;case 39:r(t,m);break;case 38:r(t,g);break;case 40:r(t,p);break;case 27:v();break;case 14:case 13:case 32:r(t,b);break;case 9:!function(t){if("tablist"===a()){var e=c(n.getEl("body"))[0];e&&e.focus()}else d(t.shiftKey?-1:1)}(t),t.preventDefault()}}),r.on("focusin",function(t){e=t.target,n=t.control}),{focusFirst:function(t){var e=l(t),n=c(e.getEl());e.settings.ariaRemember&&"lastAriaIndex"in e?f(e.lastAriaIndex,n):f(0,n)}}}var oe={},ie=ee.extend({init:function(t){var e=this;e._super(t),(t=e.settings).fixed&&e.state.set("fixed",!0),e._items=new zt,e.isRtl()&&e.classes.add("rtl"),e.bodyClasses=new Dt(function(){e.state.get("rendered")&&(e.getEl("body").className=this.toString())}),e.bodyClasses.prefix=e.classPrefix,e.classes.add("container"),e.bodyClasses.add("container-body"),t.containerCls&&e.classes.add(t.containerCls),e._layout=f.create((t.layout||"")+"layout"),e.settings.items?e.add(e.settings.items):e.add(e.render()),e._hasBody=!0},items:function(){return this._items},find:function(t){return(t=oe[t]=oe[t]||new Wt(t)).find(this)},add:function(t){return this.items().add(this.create(t)).parent(this),this},focus:function(t){var e,n,r;if(!t||!(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return r=this.find("*"),this.statusbar&&r.add(this.statusbar.items()),r.each(function(t){if(t.settings.autofocus)return e=null,!1;t.canFocus&&(e=e||t)}),e&&e.focus(),this;n.focusFirst(this)},replace:function(t,e){for(var n,r=this.items(),o=r.length;o--;)if(r[o]===t){r[o]=e;break}o>=0&&((n=e.getEl())&&n.parentNode.removeChild(n),(n=t.getEl())&&n.parentNode.removeChild(n)),e.parent(this)},create:function(t){var e,n=this,o=[];return r.isArray(t)||(t=[t]),r.each(t,function(t){t&&(t instanceof ee||("string"==typeof t&&(t={type:t}),e=r.extend({},n.settings.defaults,t),t.type=e.type=e.type||t.type||n.settings.defaultType||(e.defaults?e.defaults.type:null),t=f.create(e)),o.push(t))}),o},renderNew:function(){var t=this;return t.items().each(function(e,n){var r;e.parent(t),e.state.get("rendered")||((r=t.getEl("body")).hasChildNodes()&&n<=r.childNodes.length-1?pt(r.childNodes[n]).before(e.renderHtml()):pt(r).append(e.renderHtml()),e.postRender(),Xt.add(e))}),t._layout.applyClasses(t.items().filter(":visible")),t._lastRect=null,t},append:function(t){return this.add(t).renderNew()},prepend:function(t){return this.items().set(this.create(t).concat(this.items().toArray())),this.renderNew()},insert:function(t,e,n){var r,o,i;return t=this.create(t),r=this.items(),!n&&e<r.length-1&&(e+=1),e>=0&&e<r.length&&(o=r.slice(0,e).toArray(),i=r.slice(e).toArray(),r.set(o.concat(t,i))),this.renderNew()},fromJSON:function(t){for(var e in t)this.find("#"+e).value(t[e]);return this},toJSON:function(){var t={};return this.find("*").each(function(e){var n=e.name(),r=e.value();n&&void 0!==r&&(t[n]=r)}),t},renderHtml:function(){var t=this._layout,e=this.settings.role;return this.preRender(),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(e?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"},postRender:function(){var t;return this.items().exec("postRender"),this._super(),this._layout.postRender(this),this.state.set("rendered",!0),this.settings.style&&this.$el.css(this.settings.style),this.settings.border&&(t=this.borderBox,this.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),this.parent()||(this.keyboardNav=re({root:this})),this},initLayoutRect:function(){var t=this._super();return this._layout.recalc(this),t},recalc:function(){var t=this._layoutRect,e=this._lastRect;if(!e||e.w!==t.w||e.h!==t.h)return this._layout.recalc(this),t=this.layoutRect(),this._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var t;if(Xt.remove(this),this.visible()){for(ee.repaintControls=[],ee.repaintControls.map={},this.recalc(),t=ee.repaintControls.length;t--;)ee.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),ee.repaintControls=[]}return this}});function ae(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function se(t,e){var n,r,o,i,a,s,u,c=e.document||document;e=e||{};var l=c.getElementById(e.handle||t);o=function(t){var o,f,d=function(t){var e,n,r,o,i,a,s,u,c=Math.max;return e=t.documentElement,n=t.body,r=c(e.scrollWidth,n.scrollWidth),o=c(e.clientWidth,n.clientWidth),i=c(e.offsetWidth,n.offsetWidth),a=c(e.scrollHeight,n.scrollHeight),s=c(e.clientHeight,n.clientHeight),u=c(e.offsetHeight,n.offsetHeight),{width:r<i?o:r,height:a<u?s:a}}(c);ae(t),t.preventDefault(),r=t.button,o=l,s=t.screenX,u=t.screenY,f=window.getComputedStyle?window.getComputedStyle(o,null).getPropertyValue("cursor"):o.runtimeStyle.cursor,n=pt("<div></div>").css({position:"absolute",top:0,left:0,width:d.width,height:d.height,zIndex:2147483647,opacity:1e-4,cursor:f}).appendTo(c.body),pt(c).on("mousemove touchmove",a).on("mouseup touchend",i),e.start(t)},a=function(t){if(ae(t),t.button!==r)return i(t);t.deltaX=t.screenX-s,t.deltaY=t.screenY-u,t.preventDefault(),e.drag(t)},i=function(t){ae(t),pt(c).off("mousemove touchmove",a).off("mouseup touchend",i),n.remove(),e.stop&&e.stop(t)},this.destroy=function(){pt(l).off()},pt(l).on("mousedown touchstart",o)}var ue,ce,le,fe,de={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var t=this,e=2;function n(){var n,r,o;function i(o,i,a,s,u,c){var l,f,d,h,m,g,p,v;if(f=t.getEl("scroll"+o)){if(p=i.toLowerCase(),v=a.toLowerCase(),pt(t.getEl("absend")).css(p,t.layoutRect()[s]-1),!u)return void pt(f).css("display","none");pt(f).css("display","block"),l=t.getEl("body"),d=t.getEl("scroll"+o+"t"),h=l["client"+a]-2*e,m=(h-=n&&r?f["client"+c]:0)/l["scroll"+a],(g={})[p]=l["offset"+i]+e,g[v]=h,pt(f).css(g),(g={})[p]=l["scroll"+i]*m,g[v]=h*m,pt(d).css(g)}}o=t.getEl("body"),n=o.scrollWidth>o.clientWidth,r=o.scrollHeight>o.clientHeight,i("h","Left","Width","contentW",n,"Height"),i("v","Top","Height","contentH",r,"Width")}t.settings.autoScroll&&(t._hasScroll||(t._hasScroll=!0,function(){function n(n,r,o,i,a){var s,u=t._id+"-scroll"+n,c=t.classPrefix;pt(t.getEl()).append('<div id="'+u+'" class="'+c+"scrollbar "+c+"scrollbar-"+n+'"><div id="'+u+'t" class="'+c+'scrollbar-thumb"></div></div>'),t.draghelper=new se(u+"t",{start:function(){s=t.getEl("body")["scroll"+r],pt("#"+u).addClass(c+"active")},drag:function(u){var c,l,f,d,h=t.layoutRect();l=h.contentW>h.innerW,f=h.contentH>h.innerH,d=t.getEl("body")["client"+o]-2*e,c=(d-=l&&f?t.getEl("scroll"+n)["client"+a]:0)/t.getEl("body")["scroll"+o],t.getEl("body")["scroll"+r]=s+u["delta"+i]/c},stop:function(){pt("#"+u).removeClass(c+"active")}})}t.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}(),t.on("wheel",function(e){var r=t.getEl("body");r.scrollLeft+=10*(e.deltaX||0),r.scrollTop+=10*e.deltaY,n()}),pt(t.getEl("body")).on("scroll",n)),n())}},he=ie.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[de],renderHtml:function(){var t=this._layout,e=this.settings.html;return this.preRender(),t.preRender(this),void 0===e?e='<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+t.renderHtml(this)+"</div>":("function"==typeof e&&(e=e.call(this)),this._hasBody=!1),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1" role="group">'+(this._preBodyHtml||"")+e+"</div>"}}),me={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,e){if(t<=1||e<=1){var n=bt.getWindowSize();t=t<=1?t*n.w:t,e=e<=1?e*n.h:e}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:e,w:t,h:e}).reflow()},resizeBy:function(t,e){var n=this.layoutRect();return this.resizeTo(n.w+t,n.h+e)}},ge=[],pe=[];function ve(t,e){for(;t;){if(t===e)return!0;t=t.parent()}}function be(){ue||(ue=function(t){2!==t.button&&function(t){for(var e=ge.length;e--;){var n=ge[e],r=n.getParentCtrl(t.target);if(n.settings.autohide){if(r&&(ve(r,n)||n.parent()===r))continue;(t=n.fire("autohide",{target:t.target})).isDefaultPrevented()||n.hide()}}}(t)},pt(document).on("click touchstart",ue))}function ye(t){var e=bt.getViewPort().y;function n(e,n){for(var r,o=0;o<ge.length;o++)if(ge[o]!==t)for(r=ge[o].parent();r&&(r=r.parent());)r===t&&ge[o].fixed(e).moveBy(0,n).repaint()}t.settings.autofix&&(t.state.get("fixed")?t._autoFixY>e&&(t.fixed(!1).layoutRect({y:t._autoFixY}).repaint(),n(!1,t._autoFixY-e)):(t._autoFixY=t.layoutRect().y,t._autoFixY<e&&(t.fixed(!0).layoutRect({y:0}).repaint(),n(!0,e-t._autoFixY))))}function we(t,e){var n,r,o=xe.zIndex||65535;if(t)pe.push(e);else for(n=pe.length;n--;)pe[n]===e&&pe.splice(n,1);if(pe.length)for(n=0;n<pe.length;n++)pe[n].modal&&(o++,r=pe[n]),pe[n].getEl().style.zIndex=o,pe[n].zIndex=o,o++;var i=pt("#"+e.classPrefix+"modal-block",e.getContainerElm())[0];r?pt(i).css("z-index",r.zIndex-1):i&&(i.parentNode.removeChild(i),fe=!1),xe.currentZIndex=o}var xe=he.extend({Mixins:[St,me],init:function(t){var e=this;e._super(t),e._eventsRoot=e,e.classes.add("floatpanel"),t.autohide&&(be(),function(){if(!le){var t=document.documentElement,e=t.clientWidth,n=t.clientHeight;le=function(){document.all&&e===t.clientWidth&&n===t.clientHeight||(e=t.clientWidth,n=t.clientHeight,xe.hideAll())},pt(window).on("resize",le)}}(),ge.push(e)),t.autofix&&(ce||(ce=function(){var t;for(t=ge.length;t--;)ye(ge[t])},pt(window).on("scroll",ce)),e.on("move",function(){ye(this)})),e.on("postrender show",function(t){if(t.control===e){var n,r=e.classPrefix;e.modal&&!fe&&((n=pt("#"+r+"modal-block",e.getContainerElm()))[0]||(n=pt('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(e.getContainerElm())),y.setTimeout(function(){n.addClass(r+"in"),pt(e.getEl()).addClass(r+"in")}),fe=!0),we(!0,e)}}),e.on("show",function(){e.parents().each(function(t){if(t.state.get("fixed"))return e.fixed(!0),!1})}),t.popover&&(e._preBodyHtml='<div class="'+e.classPrefix+'arrow"></div>',e.classes.add("popover").add("bottom").add(e.isRtl()?"end":"start")),e.aria("label",t.ariaLabel),e.aria("labelledby",e._id),e.aria("describedby",e.describedBy||e._id+"-none")},fixed:function(t){if(this.state.get("fixed")!==t){if(this.state.get("rendered")){var e=bt.getViewPort();t?this.layoutRect().y-=e.y:this.layoutRect().y+=e.y}this.classes.toggle("fixed",t),this.state.set("fixed",t)}return this},show:function(){var t,e=this._super();for(t=ge.length;t--&&ge[t]!==this;);return-1===t&&ge.push(this),e},hide:function(){return Ce(this),we(!1,this),this._super()},hideAll:function(){xe.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),we(!1,this)),this},remove:function(){Ce(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function Ce(t){var e;for(e=ge.length;e--;)ge[e]===t&&ge.splice(e,1);for(e=pe.length;e--;)pe[e]===t&&pe.splice(e,1)}xe.hideAll=function(){for(var t=ge.length;t--;){var e=ge[t];e&&e.settings.autohide&&(e.hide(),ge.splice(t,1))}};var Re=function(t,e){return!(!t||e.settings.ui_container)},Se=function(t,e,n){var r,i,s=l.DOM,c=function(t){return t.getParam("fixed_toolbar_container")}(t);c&&(i=s.select(c)[0]);var d=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var e=t.selection.getScrollContainer(),n=t.getBody(),o=0,i=0;if(e){var a=s.getPos(n),u=s.getPos(e);o=Math.max(0,u.x-a.x),i=Math.max(0,u.y-a.y)}r.fixed(!1).moveRel(n,t.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,i)}},h=function(){r&&(r.show(),d(),s.addClass(t.getBody(),"mce-edit-focus"))},m=function(){r&&(r.hide(),xe.hideAll(),s.removeClass(t.getBody(),"mce-edit-focus"))},p=function(){r?r.visible()||h():(r=e.panel=f.create({type:i?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:Re(i,t),fixed:Re(i,t),border:1,items:[!1===o(t)?null:{type:"menubar",border:"0 0 1 0",items:et(t)},P(t,a(t))]}),N.setUiContainer(t,r),g(t),i?r.renderTo(i).reflow():r.renderTo().reflow(),v(t,r),h(),W(t),t.on("nodeChange",d),t.on("ResizeWindow",d),t.on("activate",h),t.on("deactivate",m),t.nodeChanged())};return t.settings.content_editable=!0,t.on("focus",function(){!1===u(t)&&n.skinUiCss?s.styleSheetLoader.load(n.skinUiCss,p,p):p()}),t.on("blur hide",m),t.on("remove",function(){r&&(r.remove(),r=null)}),!1===u(t)&&n.skinUiCss?s.styleSheetLoader.load(n.skinUiCss,dt(t)):dt(t)(),{}};function ke(t,e){var n,r,o=this,i=ee.classPrefix;o.show=function(a,s){function u(){n&&(pt(t).append('<div class="'+i+"throbber"+(e?" "+i+"throbber-inline":"")+'"></div>'),s&&s())}return o.hide(),n=!0,a?r=y.setTimeout(u,a):u(),o},o.hide=function(){var e=t.lastChild;return y.clearTimeout(r),e&&-1!==e.className.indexOf("throbber")&&e.parentNode.removeChild(e),n=!1,o}}var _e=function(t,e){var n;t.on("ProgressState",function(t){n=n||new ke(e.panel.getEl("body")),t.state?n.show(t.time):n.hide()})},Te=function(t,e,r){var o=function(t){var e=t.settings,r=e.skin,o=e.skin_url;if(!1!==r){var i=r||"lightgray";o=o?t.documentBaseURI.toAbsolute(o):n.baseURL+"/skins/"+i}return o}(t);return o&&(r.skinUiCss=o+"/skin.min.css",t.contentCSS.push(o+"/content"+(t.inline?".inline":"")+".min.css")),_e(t,e),function(t){return t.getParam("inline",!1,"boolean")}(t)?Se(t,e,r):gt(t,e,r)},Ee=ee.extend({Mixins:[St],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)}),t._super()},repaint:function(){var t,e;t=this.getEl().style,e=this._layoutRect,t.left=e.x+"px",t.top=e.y+"px",t.zIndex=131070}}),Ne=ee.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.canFocus=!0,t.tooltip&&!1!==Ne.tooltips&&(e.on("mouseenter",function(n){var r=e.tooltip().moveTo(-65535);if(n.control===e){var o=r.text(t.tooltip).show().testMoveRel(e.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===o),r.classes.toggle("tooltip-nw","bc-tl"===o),r.classes.toggle("tooltip-ne","bc-tr"===o),r.moveRel(e.getEl(),o)}else r.hide()}),e.on("mouseleave mousedown click",function(){e.tooltip().remove(),e._tooltip=null})),e.aria("label",t.ariaLabel||t.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new Ee({type:"tooltip"}),N.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var t=this.settings;this._super(),this.parent()||!t.width&&!t.height||(this.initLayoutRect(),this.repaint()),t.autofocus&&this.focus()},bindStates:function(){var t=this;function e(e){t.aria("disabled",e),t.classes.toggle("disabled",e)}function n(e){t.aria("pressed",e),t.classes.toggle("active",e)}return t.state.on("change:disabled",function(t){e(t.value)}),t.state.on("change:active",function(t){n(t.value)}),t.state.get("disabled")&&e(!0),t.state.get("active")&&n(!0),t._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),De=Ne.extend({Defaults:{value:0},init:function(t){this._super(t),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(t){return Math.round(t)})},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div class="'+e+'bar-container"><div class="'+e+'bar"></div></div><div class="'+e+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var t=this;function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}}),Ae=function(t,e){t.getEl().lastChild.textContent=e+(t.progressBar?" "+t.progressBar.value()+"%":"")},Pe=ee.extend({Mixins:[St],Defaults:{classes:"widget notification"},init:function(t){var e=this;e._super(t),e.maxWidth=t.maxWidth,t.text&&e.text(t.text),t.icon&&(e.icon=t.icon),t.color&&(e.color=t.color),t.type&&e.classes.add("notification-"+t.type),t.timeout&&(t.timeout<0||t.timeout>0)&&!t.closeButton?e.closeButton=!1:(e.classes.add("has-close"),e.closeButton=!0),t.progressBar&&(e.progressBar=new De),e.on("click",function(t){-1!==t.target.className.indexOf(e.classPrefix+"close")&&e.close()})},renderHtml:function(){var t,e=this.classPrefix,n="",r="",o="";return this.icon&&(n='<i class="'+e+"ico "+e+"i-"+this.icon+'"></i>'),t=' style="max-width: '+this.maxWidth+"px;"+(this.color?"background-color: "+this.color+';"':'"'),this.closeButton&&(r='<button type="button" class="'+e+'close" aria-hidden="true">Ã</button>'),this.progressBar&&(o=this.progressBar.renderHtml()),'<div id="'+this._id+'" class="'+this.classes+'"'+t+' role="presentation">'+n+'<div class="'+e+'notification-inner">'+this.state.get("text")+"</div>"+o+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var t=this;return y.setTimeout(function(){t.$el.addClass(t.classPrefix+"in"),Ae(t,t.state.get("text"))},100),t._super()},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().firstChild.innerHTML=e.value,Ae(t,e.value)}),t.progressBar&&(t.progressBar.bindStates(),t.progressBar.state.on("change:value",function(e){Ae(t,t.state.get("text"))})),t._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var t,e;t=this.getEl().style,e=this._layoutRect,t.left=e.x+"px",t.top=e.y+"px",t.zIndex=65534}});function Oe(t){var e=function(t){return t.inline?t.getElement():t.getContentAreaContainer()};return{open:function(n,o){var i,a=r.extend(n,{maxWidth:(i=e(t),bt.getSize(i).width)}),s=new Pe(a);return s.args=a,a.timeout>0&&(s.timer=setTimeout(function(){s.close(),o()},a.timeout)),s.on("close",function(){o()}),s.renderTo(),s},close:function(t){t.close()},reposition:function(n){!function(t){J.each(t,function(t){t.moveTo(0,0)})}(n),function(n){if(n.length>0){var r=n.slice(0,1)[0],o=e(t);r.moveRel(o,"tc-tc"),J.each(n,function(t,e){e>0&&t.moveRel(n[e-1].getEl(),"bc-tc")})}}(n)},getArgs:function(t){return t.args}}}var Me=[],Be="";function He(t){var e,n=pt("meta[name=viewport]")[0];!1!==st.overrideViewPort&&(n||((n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),(e=n.getAttribute("content"))&&void 0!==Be&&(Be=e),n.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Be))}function We(t,e){(function(){for(var t=0;t<Me.length;t++)if(Me[t]._fullscreen)return!0;return!1})()&&!1===e&&pt([document.documentElement,document.body]).removeClass(t+"fullscreen")}var Ie=xe.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(t){var e=this;e._super(t),e.isRtl()&&e.classes.add("rtl"),e.classes.add("window"),e.bodyClasses.add("window-body"),e.state.set("fixed",!0),t.buttons&&(e.statusbar=new he({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:e.isRtl()?"start":"end",defaults:{type:"button"},items:t.buttons}),e.statusbar.classes.add("foot"),e.statusbar.parent(e)),e.on("click",function(t){var n=e.classPrefix+"close";(bt.hasClass(t.target,n)||bt.hasClass(t.target.parentNode,n))&&e.close()}),e.on("cancel",function(){e.close()}),e.aria("describedby",e.describedBy||e._id+"-none"),e.aria("label",t.title),e._fullscreen=!1},recalc:function(){var t,e,n,r,o=this.statusbar;this._fullscreen&&(this.layoutRect(bt.getWindowSize()),this.layoutRect().contentH=this.layoutRect().innerH),this._super(),t=this.layoutRect(),this.settings.title&&!this._fullscreen&&(e=t.headerW)>t.w&&(n=t.x-Math.max(0,e/2),this.layoutRect({w:e,x:n}),r=!0),o&&(o.layoutRect({w:this.layoutRect().innerW}).recalc(),(e=o.layoutRect().minW+t.deltaW)>t.w&&(n=t.x-Math.max(0,e-t.w),this.layoutRect({w:e,x:n}),r=!0)),r&&this.recalc()},initLayoutRect:function(){var t,e=this._super(),n=0;if(this.settings.title&&!this._fullscreen){t=this.getEl("head");var r=bt.getSize(t);e.headerW=r.width,e.headerH=r.height,n+=e.headerH}this.statusbar&&(n+=this.statusbar.layoutRect().h),e.deltaH+=n,e.minH+=n,e.h+=n;var o=bt.getWindowSize();return e.x=this.settings.x||Math.max(0,o.w/2-e.w/2),e.y=this.settings.y||Math.max(0,o.h/2-e.h/2),e},renderHtml:function(){var t=this._layout,e=this._id,n=this.classPrefix,r=this.settings,o="",i="",a=r.html;return this.preRender(),t.preRender(this),r.title&&(o='<div id="'+e+'-head" class="'+n+'window-head"><div id="'+e+'-title" class="'+n+'title">'+this.encode(r.title)+'</div><div id="'+e+'-dragh" class="'+n+'dragh"></div><button type="button" class="'+n+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),r.url&&(a='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),void 0===a&&(a=t.renderHtml(this)),this.statusbar&&(i=this.statusbar.renderHtml()),'<div id="'+e+'" class="'+this.classes+'" hidefocus="1"><div class="'+this.classPrefix+'reset" role="application">'+o+'<div id="'+e+'-body" class="'+this.bodyClasses+'">'+a+"</div>"+i+"</div></div>"},fullscreen:function(t){var e,n,r=this,o=document.documentElement,i=r.classPrefix;if(t!==r._fullscreen)if(pt(window).on("resize",function(){var t;if(r._fullscreen)if(e)r._timer||(r._timer=y.setTimeout(function(){var t=bt.getWindowSize();r.moveTo(0,0).resizeTo(t.w,t.h),r._timer=0},50));else{t=(new Date).getTime();var n=bt.getWindowSize();r.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-t>50&&(e=!0)}}),n=r.layoutRect(),r._fullscreen=t,t){r._initial={x:n.x,y:n.y,w:n.w,h:n.h},r.borderBox=Tt("0"),r.getEl("head").style.display="none",n.deltaH-=n.headerH+2,pt([o,document.body]).addClass(i+"fullscreen"),r.classes.add("fullscreen");var a=bt.getWindowSize();r.moveTo(0,0).resizeTo(a.w,a.h)}else r.borderBox=Tt(r.settings.border),r.getEl("head").style.display="",n.deltaH+=n.headerH,pt([o,document.body]).removeClass(i+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h);return r.reflow()},postRender:function(){var t,e=this;setTimeout(function(){e.classes.add("in"),e.fire("open")},0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new se(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()}),Me.push(e),He(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),We(this.classPrefix,!1),t=Me.length;t--;)Me[t]===this&&Me.splice(t,1);He(Me.length>0)},getContentWindow:function(){var t=this.getEl().getElementsByTagName("iframe")[0];return t?t.contentWindow:null}});!function(){if(!st.desktop){var t={w:window.innerWidth,h:window.innerHeight};y.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w===e&&t.h===n||(t={w:e,h:n},pt(window).trigger("resize"))},100)}pt(window).on("resize",function(){var t,e,n=bt.getWindowSize();for(t=0;t<Me.length;t++)e=Me[t].layoutRect(),Me[t].moveTo(Me[t].settings.x||Math.max(0,n.w/2-e.w/2),Me[t].settings.y||Math.max(0,n.h/2-e.h/2))})}();var Le,ze=Ie.extend({init:function(t){t={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(t)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(t){var e,n=t.callback||function(){};function r(t,e,r){return{type:"button",text:t,subtype:r?"primary":"",onClick:function(t){t.control.parents()[1].close(),n(e)}}}switch(t.buttons){case ze.OK_CANCEL:e=[r("Ok",!0,!0),r("Cancel",!1)];break;case ze.YES_NO:case ze.YES_NO_CANCEL:e=[r("Yes",1,!0),r("No",0)],t.buttons===ze.YES_NO_CANCEL&&e.push(r("Cancel",-1));break;default:e=[r("Ok",!0,!0)]}return new Ie({padding:20,x:t.x,y:t.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:e,title:t.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:t.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:t.onClose,onCancel:function(){n(!1)}}).renderTo(document.body).reflow()},alert:function(t,e){return"string"==typeof t&&(t={text:t}),t.callback=e,ze.msgBox(t)},confirm:function(t,e){return"string"==typeof t&&(t={text:t}),t.callback=e,t.buttons=ze.OK_CANCEL,ze.msgBox(t)}}}),Fe=function(t){return{renderUI:function(e){return Te(t,this,e)},resizeTo:function(e,n){return it(t,e,n)},resizeBy:function(e,n){return at(t,e,n)},getNotificationManagerImpl:function(){return Oe(t)},getWindowManagerImpl:function(){return{open:function(t,e,n){var r;return t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),(r=new Ie(t)).on("close",function(){n(r)}),t.data&&r.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),r.features=t||{},r.params=e||{},r=r.renderTo(document.body).reflow()},alert:function(t,e,n){var r;return(r=ze.alert(t,function(){e()})).on("close",function(){n(r)}),r},confirm:function(t,e,n){var r;return(r=ze.confirm(t,function(t){e(t)})).on("close",function(){n(r)}),r},close:function(t){t.close()},getParams:function(t){return t.params},setParams:function(t,e){t.params=e}}}}},qe=kt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(t){this.settings=r.extend({},this.Defaults,t)},preRender:function(t){t.bodyClasses.add(this.settings.containerClass)},applyClasses:function(t){var e,n,r,o,i=this.settings;e=i.firstControlClass,n=i.lastControlClass,t.each(function(t){t.classes.remove(e).remove(n).add(i.controlClass),t.visible()&&(r||(r=t),o=t)}),r&&r.classes.add(e),o&&o.classes.add(n)},renderHtml:function(t){var e="";return this.applyClasses(t.items()),t.items().each(function(t){e+=t.renderHtml()}),e},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),je=qe.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(t){t.items().filter(":visible").each(function(t){var e=t.settings;t.layoutRect({x:e.x,y:e.y,w:e.w,h:e.h}),t.recalc&&t.recalc()})},renderHtml:function(t){return'<div id="'+t._id+'-absend" class="'+t.classPrefix+'abs-end"></div>'+this._super(t)}}),Ue=Ne.extend({Defaults:{classes:"widget btn",role:"button"},init:function(t){var e,n=this;n._super(t),t=n.settings,e=n.settings.size,n.on("click mousedown",function(t){t.preventDefault()}),n.on("touchstart",function(t){n.fire("click",t),t.preventDefault()}),t.subtype&&n.classes.add(t.subtype),e&&n.classes.add("btn-"+e),t.icon&&n.icon(t.icon)},icon:function(t){return arguments.length?(this.state.set("icon",t),this):this.state.get("icon")},repaint:function(){var t,e=this.getEl().firstChild;e&&((t=e.style).width=t.height="100%"),this._super()},renderHtml:function(){var t,e,n=this._id,r=this.classPrefix,o=this.state.get("icon"),i=this.state.get("text"),a="",s=this.settings;return(t=s.image)?(o="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",i&&(this.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+this.encode(i)+"</span>"),o=o?r+"ico "+r+"i-"+o:"",e="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" tabindex="-1"'+e+'><button id="'+n+'-button" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+t+"></i>":"")+a+"</button></div>"},bindStates:function(){var t=this,e=t.$,n=t.classPrefix+"txt";function r(r){var o=e("span."+n,t.getEl());r?(o[0]||(e("button:first",t.getEl()).append('<span class="'+n+'"></span>'),o=e("span."+n,t.getEl())),o.html(t.encode(r))):o.remove(),t.classes.toggle("btn-has-text",!!r)}return t.state.on("change:text",function(t){r(t.value)}),t.state.on("change:icon",function(e){var n=e.value,o=t.classPrefix;t.settings.icon=n,n=n?o+"ico "+o+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,a=i.getElementsByTagName("i")[0];n?(a&&a===i.firstChild||(a=document.createElement("i"),i.insertBefore(a,i.firstChild)),a.className=n):a&&i.removeChild(a),r(t.state.get("text"))}),t._super()}}),Ve=Ue.extend({init:function(t){t=r.extend({text:"Browse...",multiple:!1,accept:null},t),this._super(t),this.classes.add("browsebutton"),t.multiple&&this.classes.add("multiple")},postRender:function(){var t=this,e=bt.create("input",{type:"file",id:t._id+"-browse",accept:t.settings.accept});t._super(),pt(e).on("change",function(e){var n=e.target.files;t.value=function(){return n.length?t.settings.multiple?n:n[0]:null},e.preventDefault(),n.length&&t.fire("change",e)}),pt(e).on("click",function(t){t.stopPropagation()}),pt(t.getEl("button")).on("click",function(t){t.stopPropagation(),e.click()}),t.getEl().appendChild(e)},remove:function(){pt(this.getEl("button")).off(),pt(this.getEl("input")).off(),this._super()}}),$e=ie.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var t=this._layout;return this.classes.add("btn-group"),this.preRender(),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"}}),Ye=Ne.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(t){var e=this;e._super(t),e.on("click mousedown",function(t){t.preventDefault()}),e.on("click",function(t){t.preventDefault(),e.disabled()||e.checked(!e.checked())}),e.checked(e.settings.checked)},checked:function(t){return arguments.length?(this.state.set("checked",t),this):this.state.get("checked")},value:function(t){return arguments.length?this.checked(t):this.checked()},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+e+"ico "+e+'i-checkbox"></i><span id="'+t+'-al" class="'+e+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var t=this;function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,r=t.classPrefix;if(void 0===n)return t.settings.icon;t.settings.icon=n,n=n?r+"ico "+r+"i-"+t.settings.icon:"";var o=t.getEl().firstChild,i=o.getElementsByTagName("i")[0];n?(i&&i===o.firstChild||(i=document.createElement("i"),o.insertBefore(i,o.firstChild)),i.className=n):i&&o.removeChild(i)}),t.state.get("checked")&&e(!0),t._super()}}),Xe=tinymce.util.Tools.resolve("tinymce.util.VK"),Ke=Ne.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.classes.add("combobox"),e.subinput=!0,e.ariaTarget="inp",t.menu=t.menu||t.values,t.menu&&(t.icon="caret"),e.on("click",function(n){var r=n.target,o=e.getEl();if(pt.contains(o,r)||r===o)for(;r&&r!==o;)r.id&&-1!==r.id.indexOf("-open")&&(e.fire("action"),t.menu&&(e.showMenu(),n.aria&&e.menu.items()[0].focus())),r=r.parentNode}),e.on("keydown",function(t){var n;13===t.keyCode&&"INPUT"===t.target.nodeName&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))}),e.on("keyup",function(t){if("INPUT"===t.target.nodeName){var n=e.state.get("value"),r=t.target.value;r!==n&&(e.state.set("value",r),e.fire("autocomplete",t))}}),e.on("mouseover",function(t){var n=e.tooltip().moveTo(-65535);if(e.statusLevel()&&-1!==t.target.className.indexOf(e.classPrefix+"status")){var r=e.statusMessage()||"Ok",o=n.text(r).show().testMoveRel(t.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===o),n.classes.toggle("tooltip-nw","bc-tl"===o),n.classes.toggle("tooltip-ne","bc-tr"===o),n.moveRel(t.target,o)}})},statusLevel:function(t){return arguments.length>0&&this.state.set("statusLevel",t),this.state.get("statusLevel")},statusMessage:function(t){return arguments.length>0&&this.state.set("statusMessage",t),this.state.get("statusMessage")},showMenu:function(){var t,e=this,n=e.settings;e.menu||((t=n.menu||[]).length?t={type:"menu",items:t}:t.type=t.type||"menu",e.menu=f.create(t).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()===e.value())})}).fire("show"),e.menu.on("select",function(t){e.value(t.control.value())}),e.on("focusin",function(t){"INPUT"===t.target.tagName.toUpperCase()&&e.menu.hide()}),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,e,n=this.getEl(),r=this.getEl("open"),o=this.layoutRect(),i=0,a=n.firstChild;this.statusLevel()&&"none"!==this.statusLevel()&&(i=parseInt(bt.getRuntimeStyle(a,"padding-right"),10)-parseInt(bt.getRuntimeStyle(a,"padding-left"),10)),t=r?o.w-bt.getSize(r).width-10:o.w-10;var s=document;return s.all&&(!s.documentMode||s.documentMode<=8)&&(e=this.layoutRect().h-2+"px"),pt(a).css({width:t-i,lineHeight:e}),this._super(),this},postRender:function(){var t=this;return pt(this.getEl("inp")).on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)}),t._super()},renderHtml:function(){var t,e,n,r=this._id,o=this.settings,i=this.classPrefix,a=this.state.get("value")||"",s="",u="";return"spellcheck"in o&&(u+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(u+=' maxlength="'+o.maxLength+'"'),o.size&&(u+=' size="'+o.size+'"'),o.subtype&&(u+=' type="'+o.subtype+'"'),n='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',this.disabled()&&(u+=' disabled="disabled"'),(t=o.icon)&&"caret"!==t&&(t=i+"ico "+i+"i-"+o.icon),e=this.state.get("text"),(t||e)&&(s='<div id="'+r+'-open" class="'+i+"btn "+i+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==t?'<i class="'+t+'"></i>':'<i class="'+i+'caret"></i>')+(e?(t?" ":"")+e:"")+"</button></div>",this.classes.add("has-open")),'<div id="'+r+'" class="'+this.classes+'"><input id="'+r+'-inp" class="'+i+'textbox" value="'+this.encode(a,!1)+'" hidefocus="1"'+u+' placeholder="'+this.encode(o.placeholder)+'" />'+n+s+"</div>"},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(t,e){var n=this;if(0!==t.length){n.menu?n.menu.items().remove():n.menu=f.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),r.each(t,function(t){var r,o;n.menu.add({text:t.title,url:t.previewUrl,match:e,classes:"menu-item-ellipsis",onclick:(r=t.value,o=t.title,function(){n.fire("selectitem",{title:o,value:r})})})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()});var o=n.layoutRect().w;n.menu.layoutRect({w:o,minW:0,maxW:o}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var t=this;t.state.on("change:value",function(e){t.getEl("inp").value!==e.value&&(t.getEl("inp").value=e.value)}),t.state.on("change:disabled",function(e){t.getEl("inp").disabled=e.value}),t.state.on("change:statusLevel",function(e){var n=t.getEl("status"),r=t.classPrefix,o=e.value;bt.css(n,"display","none"===o?"none":""),bt.toggleClass(n,r+"i-checkmark","ok"===o),bt.toggleClass(n,r+"i-warning","warn"===o),bt.toggleClass(n,r+"i-error","error"===o),t.classes.toggle("has-status","none"!==o),t.repaint()}),bt.on(t.getEl("status"),"mouseleave",function(){t.tooltip().hide()}),t.on("cancel",function(e){t.menu&&t.menu.visible()&&(e.stopPropagation(),t.hideMenu())});var e=function(t,e){e&&e.items().length>0&&e.items().eq(t)[0].focus()};return t.on("keydown",function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===Xe.DOWN?(n.preventDefault(),t.fire("autocomplete"),e(0,t.menu)):r===Xe.UP&&(n.preventDefault(),e(-1,t.menu)))}),t._super()},remove:function(){pt(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),Je=Ke.extend({init:function(t){var e=this;t.spellcheck=!1,t.onaction&&(t.icon="none"),e._super(t),e.classes.add("colorbox"),e.on("change keyup postrender",function(){e.repaintColor(e.value())})},repaintColor:function(t){var e=this.getEl("open"),n=e?e.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=t}catch(t){}},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.state.get("rendered")&&t.repaintColor(e.value)}),t._super()}}),Ge=Ue.extend({showPanel:function(){var t=this,e=t.settings;if(t.classes.add("opened"),t.panel)t.panel.show();else{var n=e.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,t.panel=new xe(n).on("hide",function(){t.classes.remove("opened")}).on("cancel",function(e){e.stopPropagation(),t.focus(),t.hidePanel()}).parent(t).renderTo(t.getContainerElm()),t.panel.fire("show"),t.panel.reflow()}var r=t.panel.testMoveRel(t.getEl(),e.popoverAlign||(t.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl"]));t.panel.classes.toggle("start","bc-tl"===r),t.panel.classes.toggle("end","bc-tr"===r),t.panel.moveRel(t.getEl(),r)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))}),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),Ze=l.DOM,Qe=Ge.extend({init:function(t){this._super(t),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(t){return t?(this._color=t,this.getEl("preview").style.backgroundColor=t,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var t=this._id,e=this.classPrefix,n=this.state.get("text"),r=this.settings.icon?e+"ico "+e+"i-"+this.settings.icon:"",o=this.settings.image?" style=\"background-image: url('"+this.settings.image+"')\"":"",i="";return n&&(this.classes.add("btn-has-text"),i='<span class="'+e+'txt">'+this.encode(n)+"</span>"),'<div id="'+t+'" class="'+this.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+e+'preview"></span>'+i+'</button><button type="button" class="'+e+'open" hidefocus="1" tabindex="-1"> <i class="'+e+'caret"></i></button></div>'},postRender:function(){var t=this,e=t.settings.onclick;return t.on("click",function(n){n.aria&&"down"===n.aria.key||n.control!==t||Ze.getParent(n.target,"."+t.classPrefix+"open")||(n.stopImmediatePropagation(),e.call(t,n))}),delete t.settings.onclick,t._super()}}),tn=tinymce.util.Tools.resolve("tinymce.util.Color"),en=Ne.extend({Defaults:{classes:"widget colorpicker"},init:function(t){this._super(t)},postRender:function(){var t,e,n,r,o,i=this,a=i.color();function s(t,e){var n,r,o=bt.getPos(t);return n=e.pageX-o.x,r=e.pageY-o.y,{x:n=Math.max(0,Math.min(n/t.clientWidth,1)),y:r=Math.max(0,Math.min(r/t.clientHeight,1))}}function u(t,e){var a=(360-t.h)/360;bt.css(n,{top:100*a+"%"}),e||bt.css(o,{left:t.s+"%",top:100-t.v+"%"}),r.style.background=tn({s:100,v:100,h:t.h}).toHex(),i.color().parse({s:t.s,v:t.v,h:t.h})}function c(e){var n;n=s(r,e),t.s=100*n.x,t.v=100*(1-n.y),u(t),i.fire("change")}function l(n){var r;r=s(e,n),(t=a.toHsv()).h=360*(1-r.y),u(t,!0),i.fire("change")}e=i.getEl("h"),n=i.getEl("hp"),r=i.getEl("sv"),o=i.getEl("svp"),i._repaint=function(){u(t=a.toHsv())},i._super(),i._svdraghelper=new se(i._id+"-sv",{start:c,drag:c}),i._hdraghelper=new se(i._id+"-h",{start:l,drag:l}),i._repaint()},rgb:function(){return this.color().toRgb()},value:function(t){if(!arguments.length)return this.color().toHex();this.color().parse(t),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=tn()),this._color},renderHtml:function(){var t,e=this._id,n=this.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return t='<div id="'+e+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+r+");background: linear-gradient(to bottom,"+r+');">'+function(){var t,e,o,i,a="";for(o="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",t=0,e=(i=r.split(",")).length-1;t<e;t++)a+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/e+"%;"+o+i[t]+",endColorstr="+i[t+1]+");-ms-"+o+i[t]+",endColorstr="+i[t+1]+')"></div>';return a}()+'<div id="'+e+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+e+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}}),nn=Ne.extend({init:function(t){t=r.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},t),this._super(t),this.classes.add("dropzone"),t.multiple&&this.classes.add("multiple")},renderHtml:function(){var t,e,n=this.settings;return t={id:this._id,hidefocus:"1"},e=bt.create("div",t,"<span>"+this.translate(n.text)+"</span>"),n.height&&bt.css(e,"height",n.height+"px"),n.width&&bt.css(e,"width",n.width+"px"),e.className=this.classes,e.outerHTML},postRender:function(){var t=this,e=function(e){e.preventDefault(),t.classes.toggle("dragenter"),t.getEl().className=t.classes};t._super(),t.$el.on("dragover",function(t){t.preventDefault()}),t.$el.on("dragenter",e),t.$el.on("dragleave",e),t.$el.on("drop",function(e){if(e.preventDefault(),!t.state.get("disabled")){var n=function(e){var n=t.settings.accept;if("string"!=typeof n)return e;var o=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return r.grep(e,function(t){return o.test(t.name)})}(e.dataTransfer.files);t.value=function(){return n.length?t.settings.multiple?n:n[0]:null},n.length&&t.fire("change",e)}})},remove:function(){this.$el.off(),this._super()}}),rn=Ne.extend({init:function(t){var e=this;t.delimiter||(t.delimiter="Â»"),e._super(t),e.classes.add("path"),e.canFocus=!0,e.on("click",function(t){var n;(n=t.target.getAttribute("data-index"))&&e.fire("select",{value:e.row()[n],index:n})}),e.row(e.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(t){return arguments.length?(this.state.set("row",t),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",function(e){t.innerHtml(t._getDataPathHtml(e.value))}),t._super()},_getDataPathHtml:function(t){var e,n,r=t||[],o="",i=this.classPrefix;for(e=0,n=r.length;e<n;e++)o+=(e>0?'<div class="'+i+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+i+"path-item"+(e===n-1?" "+i+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+this._id+"-"+e+'" aria-level="'+(e+1)+'">'+r[e].name+"</div>";return o||(o='<div class="'+i+'path-item">Â </div>'),o}}),on=rn.extend({postRender:function(){var t=this,e=t.settings.editor;function n(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}return!1!==e.settings.elementpath&&(t.on("select",function(t){e.focus(),e.selection.select(this.row()[t.index].element),e.nodeChanged()}),e.on("nodeChange",function(r){for(var o=[],i=r.parents,a=i.length;a--;)if(1===i[a].nodeType&&!n(i[a])){var s=e.fire("ResolveName",{name:i[a].nodeName.toLowerCase(),target:i[a]});if(s.isDefaultPrevented()||o.push({name:s.name,element:i[a]}),s.isPropagationStopped())break}t.row(o)})),t._super()}}),an=ie.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var t=this._layout,e=this.classPrefix;return this.classes.add("formitem"),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<div id="'+this._id+'-title" class="'+e+'title">'+this.settings.title+"</div>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"}}),sn=ie.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var t=this,e=t.items();t.settings.formItemDefaults||(t.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),e.each(function(e){var n,o=e.settings.label;o&&((n=new an(r.extend({items:{type:"label",id:e._id+"-l",text:o,flex:0,forId:e._id,disabled:e.disabled()}},t.settings.formItemDefaults))).type="formitem",e.aria("labelledby",e._id+"-l"),void 0===e.settings.flex&&(e.settings.flex=1),t.replace(e,n),n.add(e))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var t=this;function e(){var e,n,r=0,o=[];if(!1!==t.settings.labelGapCalc)for(("children"===t.settings.labelGapCalc?t.find("formitem"):t.items()).filter("formitem").each(function(t){var e=t.items()[0],n=e.getEl().clientWidth;r=n>r?n:r,o.push(e)}),n=t.settings.labelGap||0,e=o.length;e--;)o[e].settings.minWidth=r+n}t._super(),t.on("show",e),e()}}),un=sn.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var t=this._layout,e=this.classPrefix;return this.preRender(),t.preRender(this),'<fieldset id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<legend id="'+this._id+'-title" class="'+e+'fieldset-title">'+this.settings.title+"</legend>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></fieldset>"}}),cn=0,ln=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++cn+String(e)},fn=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:x.constant(t)}},dn={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),"HTML must have a single root node";return fn(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return fn(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return fn(n)},fromDom:fn,fromPoint:function(t,e,n){return T.from(t.dom().elementFromPoint(e,n)).map(fn)}},hn=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(null,arguments)),e}},mn=8,gn=9,pn=1,vn=3,bn=function(t){return t.dom().nodeName.toLowerCase()},yn=function(t){return t.dom().nodeType},wn=function(t){return function(e){return yn(e)===t}},xn=wn(pn),Cn=wn(vn),Rn=wn(gn),Sn={name:bn,type:yn,value:function(t){return t.dom().nodeValue},isElement:xn,isText:Cn,isDocument:Rn,isComment:function(t){return yn(t)===mn||"#comment"===bn(t)}},kn=(hn(function(){return kn(dn.fromDom(document))}),function(t){var e=t.dom().body;if(null===e||void 0===e)throw"Body is not available yet";return dn.fromDom(e)}),_n=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&Array.prototype.isPrototypeOf(t)?"array":"object"===e&&String.prototype.isPrototypeOf(t)?"string":e}(e)===t}},Tn={isString:_n("string"),isObject:_n("object"),isArray:_n("array"),isNull:_n("null"),isBoolean:_n("boolean"),isUndefined:_n("undefined"),isFunction:_n("function"),isNumber:_n("number")},En=void 0===(Le=Object.keys)?function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}:Le,Nn=function(t,e){for(var n=En(t),r=0,o=n.length;r<o;r++){var i=n[r];e(t[i],i,t)}},Dn=function(t,e){var n={};return Nn(t,function(r,o){var i=e(r,o,t);n[i.k]=i.v}),n},An=function(t,e){var n=[];return Nn(t,function(t,r){n.push(e(t,r))}),n},Pn=function(t){return An(t,function(t){return t})},On={bifilter:function(t,e){var n={},r={};return Nn(t,function(t,o){(e(t,o)?n:r)[o]=t}),{t:n,f:r}},each:Nn,map:function(t,e){return Dn(t,function(t,n,r){return{k:n,v:e(t,n,r)}})},mapToArray:An,tupleMap:Dn,find:function(t,e){for(var n=En(t),r=0,o=n.length;r<o;r++){var i=n[r],a=t[i];if(e(a,i,t))return T.some(a)}return T.none()},keys:En,values:Pn,size:function(t){return Pn(t).length}},Mn=function(t){return t.slice(0).sort()},Bn={sort:Mn,reqMessage:function(t,e){throw new Error("All required keys ("+Mn(t).join(", ")+") were not specified. Specified keys were: "+Mn(e).join(", ")+".")},unsuppMessage:function(t){throw new Error("Unsupported keys for object: "+Mn(t).join(", "))},validateStrArr:function(t,e){if(!Tn.isArray(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");J.each(e,function(e){if(!Tn.isString(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},invalidTypeMessage:function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+Mn(t).join(", ")+") were not.")},checkDupes:function(t){var e=Mn(t);J.find(e,function(t,n){return n<e.length-1&&t===e[n+1]}).each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")})}},Hn={immutable:function(){var t=arguments;return function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return J.each(t,function(t,n){r[t]=x.constant(e[n])}),r}},immutableBag:function(t,e){var n=t.concat(e);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return Bn.validateStrArr("required",t),Bn.validateStrArr("optional",e),Bn.checkDupes(n),function(r){var o=On.keys(r);J.forall(t,function(t){return J.contains(o,t)})||Bn.reqMessage(t,o);var i=J.filter(o,function(t){return!J.contains(n,t)});i.length>0&&Bn.unsuppMessage(i);var a={};return J.each(t,function(t){a[t]=x.constant(r[t])}),J.each(e,function(t){a[t]=x.constant(Object.prototype.hasOwnProperty.call(r,t)?T.some(r[t]):T.none())}),a}}},Wn=("undefined"!=typeof window?window:Function("return this;")(),function(){return In(0,0)}),In=function(t,e){return{major:t,minor:e}},Ln={nu:In,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?Wn():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return In(r(1),r(2))}(t,n)},unknown:Wn},zn=function(t,e){return function(){return e===t}},Fn=function(t){var e=t.current;return{current:e,version:t.version,isEdge:zn("Edge",e),isChrome:zn("Chrome",e),isIE:zn("IE",e),isOpera:zn("Opera",e),isFirefox:zn("Firefox",e),isSafari:zn("Safari",e)}},qn={unknown:function(){return Fn({current:void 0,version:Ln.unknown()})},nu:Fn,edge:x.constant("Edge"),chrome:x.constant("Chrome"),ie:x.constant("IE"),opera:x.constant("Opera"),firefox:x.constant("Firefox"),safari:x.constant("Safari")},jn=function(t,e){return function(){return e===t}},Un=function(t){var e=t.current;return{current:e,version:t.version,isWindows:jn("Windows",e),isiOS:jn("iOS",e),isAndroid:jn("Android",e),isOSX:jn("OSX",e),isLinux:jn("Linux",e),isSolaris:jn("Solaris",e),isFreeBSD:jn("FreeBSD",e)}},Vn={unknown:function(){return Un({current:void 0,version:Ln.unknown()})},nu:Un,windows:x.constant("Windows"),ios:x.constant("iOS"),android:x.constant("Android"),linux:x.constant("Linux"),osx:x.constant("OSX"),solaris:x.constant("Solaris"),freebsd:x.constant("FreeBSD")},$n=function(t,e){var n=String(e).toLowerCase();return J.find(t,function(t){return t.search(n)})},Yn=function(t,e){return $n(t,e).map(function(t){var n=Ln.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Xn=function(t,e){return $n(t,e).map(function(t){var n=Ln.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Kn=function(t,e){return-1!==t.indexOf(e)},Jn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Gn=function(t){return function(e){return Kn(e,t)}},Zn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Kn(t,"edge/")&&Kn(t,"chrome")&&Kn(t,"safari")&&Kn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Jn],search:function(t){return Kn(t,"chrome")&&!Kn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Kn(t,"msie")||Kn(t,"trident")}},{name:"Opera",versionRegexes:[Jn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gn("firefox")},{name:"Safari",versionRegexes:[Jn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Kn(t,"safari")||Kn(t,"mobile/"))&&Kn(t,"applewebkit")}}],Qn=[{name:"Windows",search:Gn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Kn(t,"iphone")||Kn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Gn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gn("linux"),versionRegexes:[]},{name:"Solaris",search:Gn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gn("freebsd"),versionRegexes:[]}],tr={browsers:x.constant(Zn),oses:x.constant(Qn)},er=function(t){var e=tr.browsers(),n=tr.oses(),r=Yn(e,t).fold(qn.unknown,qn.nu),o=Xn(n,t).fold(Vn.unknown,Vn.nu);return{browser:r,os:o,deviceType:function(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),o=t.isiOS()&&!r,i=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,s=r||i||a&&!0===/mobile/i.test(n),u=t.isiOS()||t.isAndroid(),c=u&&!s,l=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:x.constant(r),isiPhone:x.constant(o),isTablet:x.constant(s),isPhone:x.constant(c),isTouch:x.constant(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:x.constant(l)}}(o,r,t)}},nr=pn,rr=gn,or=function(t){return t.nodeType!==nr&&t.nodeType!==rr||0===t.childElementCount},ir={all:function(t,e){var n=void 0===e?document:e.dom();return or(n)?[]:J.map(n.querySelectorAll(t),dn.fromDom)},is:function(t,e){var n=t.dom();if(n.nodeType!==nr)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},one:function(t,e){var n=void 0===e?document:e.dom();return or(n)?T.none():T.from(n.querySelector(t)).map(dn.fromDom)}},ar=(hn(function(){var t=navigator.userAgent;return er(t)})().browser.isIE(),Hn.immutable("element","offset"),function(t,e){return ir.all(e,t)}),sr=r.trim,ur=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},cr=ur("true"),lr=ur("false"),fr=function(t,e,n,r,o){return{type:t,title:e,url:n,level:r,attach:o}},dr=function(t){return t.innerText||t.textContent},hr=function(t){return function(t){return t&&"A"===t.nodeName&&(t.id||t.name)}(t)&&gr(t)},mr=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},gr=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return cr(t)}return!1}(t)&&!lr(t)},pr=function(t){return mr(t)&&gr(t)},vr=function(t){var e=function(t){return t.id?t.id:ln("h")}(t);return fr("header",dr(t),"#"+e,function(t){return mr(t)?parseInt(t.nodeName.substr(1),10):0}(t),function(){t.id=e})},br=function(t){var e=t.id||t.name,n=dr(t);return fr("anchor",n||"#"+e,"#"+e,0,x.noop)},yr=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,J.map(ar(dn.fromDom(n),e),function(t){return t.dom()})},wr=function(t){return sr(t.title).length>0},xr=function(t){var e=yr(t);return J.filter(function(t){return J.map(J.filter(t,pr),vr)}(e).concat(function(t){return J.map(J.filter(t,hr),br)}(e)),wr)},Cr={},Rr=function(t){return{title:t.title,value:{title:{raw:t.title},url:t.url,attach:t.attach}}},Sr=function(t,e){return{title:t,value:{title:t,url:e,attach:x.noop}}},kr=function(t,e,n){var r=e in t?t[e]:n;return!1===r?null:r},_r=function(t,e,n,o){var i,a={title:"-"},s=function(t){var o=t.hasOwnProperty(n)?t[n]:[],i=J.filter(o,function(t){return function(t,e){return!J.exists(e,function(e){return e.url===t})}(t,e)});return r.map(i,function(t){return{title:t,value:{title:t,url:t,attach:x.noop}}})},u=function(t){return function(t){return r.map(t,Rr)}(J.filter(e,function(e){return e.type===t}))};return!1===o.typeahead_urls?[]:"file"===n?(i=[Tr(t,s(Cr)),Tr(t,u("header")),Tr(t,function(){var t=u("anchor"),e=kr(o,"anchor_top","#top"),n=kr(o,"anchor_bottom","#bottom");return null!==e&&t.unshift(Sr("<top>",e)),null!==n&&t.push(Sr("<bottom>",n)),t}())],J.foldl(i,function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(a,e)},[])):Tr(t,s(Cr))},Tr=function(t,e){var n=t.toLowerCase(),o=r.grep(e,function(t){return-1!==t.title.toLowerCase().indexOf(n)});return 1===o.length&&o[0].title===t?[]:o},Er=function(t,e,n,r){var o=function(o){var i=xr(n),a=_r(o,i,r,e);t.showAutoComplete(a,o)};t.on("autocomplete",function(){o(t.value())}),t.on("selectitem",function(e){var n=e.value;t.value(n.url);var o=function(t){var e=t.title;return e.raw?e.raw:e}(n);"image"===r?t.fire("change",{meta:{alt:o,attach:n.attach}}):t.fire("change",{meta:{text:o,attach:n.attach}}),t.focus()}),t.on("click",function(e){0===t.value().length&&"INPUT"===e.target.nodeName&&o("")}),t.on("PostRender",function(){t.getRoot().on("submit",function(e){e.isDefaultPrevented()||function(t,e){var n=Cr[e];/^https?/.test(t)&&(n?-1===J.indexOf(n,t)&&(Cr[e]=n.slice(0,5).concat(t)):Cr[e]=[t])}(t.value(),r)})})},Nr=function(t,e,n){var r=e.filepicker_validator_handler;r&&t.state.on("change:value",function(e){var o;0!==(o=e.value).length?r({url:o,type:n},function(e){var n=function(t){var e=t.status,n=t.message;return"valid"===e?{status:"ok",message:n}:"unknown"===e?{status:"warn",message:n}:"invalid"===e?{status:"warn",message:n}:{status:"none",message:""}}(e);t.statusMessage(n.message),t.statusLevel(n.status)}):t.statusLevel("none")})},Dr=Ke.extend({Statics:{clearHistory:function(){Cr={}}},init:function(t){var e,o,i,a=this,s=window.tinymce?window.tinymce.activeEditor:n.activeEditor,u=s.settings,c=t.filetype;t.spellcheck=!1,(i=u.file_picker_types||u.file_browser_callback_types)&&(i=r.makeMap(i,/[, ]/)),i&&!i[c]||(!(o=u.file_picker_callback)||i&&!i[c]?!(o=u.file_browser_callback)||i&&!i[c]||(e=function(){o(a.getEl("inp").id,a.value(),c,window)}):e=function(){var t=a.fire("beforecall").meta;t=r.extend({filetype:c},t),o.call(s,function(t,e){a.value(t).fire("change",{meta:e})},a.value(),t)}),e&&(t.icon="browse",t.onaction=e),a._super(t),a.classes.add("filepicker"),Er(a,u,s.getBody(),c),Nr(a,u,c)}}),Ar=je.extend({recalc:function(t){var e=t.layoutRect(),n=t.paddingBox;t.items().filter(":visible").each(function(t){t.layoutRect({x:n.left,y:n.top,w:e.innerW-n.right-n.left,h:e.innerH-n.top-n.bottom}),t.recalc&&t.recalc()})}}),Pr=je.extend({recalc:function(t){var e,n,r,o,i,a,s,u,c,l,f,d,h,m,g,p,v,b,y,w,x,C,R,S,k,_,T,E,N,D,A,P,O,M,B,H,W,I=[],L=Math.max,z=Math.min;for(r=t.items().filter(":visible"),o=t.layoutRect(),i=t.paddingBox,a=t.settings,d=t.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,u=t.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,"row-reversed"!==d&&"column-reverse"!==d||(r=r.set(r.toArray().reverse()),d=d.split("-")[0]),"column"===d?(S="y",C="h",R="minH",k="maxH",T="innerH",_="top",E="deltaH",N="contentH",M="left",P="w",D="x",A="innerW",O="minW",B="right",H="deltaW",W="contentW"):(S="x",C="w",R="minW",k="maxW",T="innerW",_="left",E="deltaW",N="contentW",M="top",P="h",D="y",A="innerH",O="minH",B="bottom",H="deltaH",W="contentH"),f=o[T]-i[_]-i[_],x=l=0,e=0,n=r.length;e<n;e++)m=(h=r[e]).layoutRect(),g=h.settings.flex,f-=e<n-1?c:0,g>0&&(l+=g,m[k]&&I.push(h),m.flex=g),f-=m[R],(p=i[M]+m[O]+i[B])>x&&(x=p);if((y={})[R]=f<0?o[R]-f+o[E]:o[T]-f+o[E],y[O]=x+o[H],y[N]=o[T]-f,y[W]=x,y.minW=z(y.minW,o.maxW),y.minH=z(y.minH,o.maxH),y.minW=L(y.minW,o.startMinWidth),y.minH=L(y.minH,o.startMinHeight),!o.autoResize||y.minW===o.minW&&y.minH===o.minH){for(b=f/l,e=0,n=I.length;e<n;e++)v=(m=(h=I[e]).layoutRect())[k],(p=m[R]+m.flex*b)>v?(f-=m[k]-m[R],l-=m.flex,m.flex=0,m.maxFlexSize=v):m.maxFlexSize=0;for(b=f/l,w=i[_],y={},0===l&&("end"===u?w=f+i[_]:"center"===u?(w=Math.round(o[T]/2-(o[T]-f)/2)+i[_])<0&&(w=i[_]):"justify"===u&&(w=i[_],c=Math.floor(f/(r.length-1)))),y[D]=i[M],e=0,n=r.length;e<n;e++)p=(m=(h=r[e]).layoutRect()).maxFlexSize||m[R],"center"===s?y[D]=Math.round(o[A]/2-m[P]/2):"stretch"===s?(y[P]=L(m[O]||0,o[A]-i[M]-i[B]),y[D]=i[M]):"end"===s&&(y[D]=o[A]-m[P]-i.top),m.flex>0&&(p+=m.flex*b),y[C]=p,y[S]=w,h.layoutRect(y),h.recalc&&h.recalc(),w+=p+c}else if(y.w=y.minW,y.h=y.minH,t.layoutRect(y),this.recalc(t),null===t._lastRect){var F=t.parent();F&&(F._lastRect=null,F.recalc())}}}),Or=qe.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(t){t.items().filter(":visible").each(function(t){t.recalc&&t.recalc()})},isNative:function(){return!0}}),Mr=function(t,e){return ir.one(e,t)},Br=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},Hr=function(t,e){return function(){var n=this;t.formatter?t.formatter.formatChanged(e,function(t){n.active(t)}):t.on("init",function(){t.formatter.formatChanged(e,function(t){n.active(t)})})}},Wr=function(t){t.addMenuItem("align",{text:"Align",menu:[{text:"Left",icon:"alignleft",onclick:Br(t,"alignleft")},{text:"Center",icon:"aligncenter",onclick:Br(t,"aligncenter")},{text:"Right",icon:"alignright",onclick:Br(t,"alignright")},{text:"Justify",icon:"alignjustify",onclick:Br(t,"alignjustify")}]}),r.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,n){t.addButton(n,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:Hr(t,n)})})},Ir=function(t){return function(e,n){return T.from(n).map(dn.fromDom).filter(Sn.isElement).bind(function(n){return function(t,e,n){for(;n!==e;){if(n.style[t]){var r=n.style[t];return""!==r?T.some(r):T.none()}n=n.parentNode}return T.none()}(t,e,n.dom()).or(function(t,e){return T.from(l.DOM.getStyle(e,t,!0))}(t,n.dom()))}).getOr("")}},Lr={getFontSize:Ir("fontSize"),getFontFamily:x.compose(function(t){return t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},Ir("fontFamily")),toPt:function(t,e){return/[0-9.]+px$/.test(t)?function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(72*parseInt(t,10)/96,e||0)+"pt":t}},zr=function(t){return t?t.split(",")[0]:""},Fr=function(t,e){return function(){var n=this;t.on("init nodeChange",function(o){var i=Lr.getFontFamily(t.getBody(),o.element),a=function(t,e){var n;return r.each(t,function(t){t.value.toLowerCase()===e.toLowerCase()&&(n=t.value)}),r.each(t,function(t){n||zr(t.value).toLowerCase()!==zr(e).toLowerCase()||(n=t.value)}),n}(e,i);n.value(a||null),!a&&i&&n.text(zr(i))})}},qr=function(t){t.addButton("fontselect",function(){var e=function(t){var e=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return r.map(e,function(t){return{text:{raw:t[0]},value:t[1],textStyle:-1===t[1].indexOf("dings")?"font-family:"+t[1]:""}})}(t);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:Fr(t,e),onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})},jr=function(t){qr(t)},Ur=function(t,e,n){var o;return r.each(t,function(t){t.value===n?o=n:t.value===e&&(o=e)}),o},Vr=function(t){t.addButton("fontsizeselect",function(){var e=function(t){var e=t.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return r.map(e.split(" "),function(t){var e=t,n=t,r=t.split("=");return r.length>1&&(e=r[0],n=r[1]),{text:e,value:n}})}(t);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:function(t,e){return function(){var n=this;t.on("init nodeChange",function(r){var o,i,a,s;if(o=Lr.getFontSize(t.getBody(),r.element))for(a=3;!s&&a>=0;a--)i=Lr.toPt(o,a),s=Ur(e,i,o);n.value(s||null),s||n.text(i)})}}(t,e),onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}})},$r=function(t){Vr(t)},Yr=function(t,e){var n=e.length;return r.each(e,function(e){e.menu&&(e.hidden=0===Yr(t,e.menu));var r=e.format;r&&(e.hidden=!t.formatter.canApply(r)),e.hidden&&n--}),n},Xr=function(t,e){var n=e.items().length;return e.items().each(function(e){e.menu&&e.visible(Xr(t,e.menu)>0),!e.menu&&e.settings.menu&&e.visible(Yr(t,e.settings.menu)>0);var r=e.settings.format;r&&e.visible(t.formatter.canApply(r)),e.visible()||n--}),n},Kr=function(t){var e=function(t){var e=0,n=[],o=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],i=function(t){var o=[];if(t)return r.each(t,function(t){var r={text:t.title,icon:t.icon};if(t.items)r.menu=i(t.items);else{var a=t.format||"custom"+e++;t.format||(t.name=a,n.push(t)),r.format=a,r.cmd=t.cmd}o.push(r)}),o};return t.on("init",function(){r.each(n,function(e){t.formatter.register(e.name,e)})}),{type:"menu",items:t.settings.style_formats_merge?t.settings.style_formats?i(o.concat(t.settings.style_formats)):i(o):i(t.settings.style_formats||o),onPostRender:function(e){t.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return t.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",function(){var n,r;(n=e.settings.format)&&(e.disabled(!t.formatter.canApply(n)),e.active(t.formatter.match(n))),(r=e.settings.cmd)&&e.active(t.queryCommandState(r))})},onclick:function(){this.settings.format&&Br(t,this.settings.format)(),this.settings.cmd&&t.execCommand(this.settings.cmd)}}}}(t);!function(t,e){t.addMenuItem("formats",{text:"Formats",menu:e})}(t,e),function(t,e){t.addButton("styleselect",{type:"menubutton",text:"Formats",menu:e,onShowMenu:function(){t.settings.style_formats_autohide&&Xr(t,this.menu)}})}(t,e)},Jr=function(t,e){return function(){var n=[];return r.each(e,function(e){n.push({text:e[0],value:e[1],textStyle:function(){return t.formatter.getCssText(e[1])}})}),{type:"listbox",text:e[0][0],values:n,fixedWidth:!0,onselect:function(e){if(e.control){var n=e.control.value();Br(t,n)()}},onPostRender:function(t,e,n){return function(){var o=this;t.on("nodeChange",function(i){var a=t.formatter,s=null;r.each(i.parents,function(t){if(r.each(e,function(e){if(n?a.matchNode(t,n,{value:e.value})&&(s=e.value):a.matchNode(t,e.value)&&(s=e.value),s)return!1}),s)return!1}),o.value(s)})}}(t,n)}}},Gr=function(t){var e=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");t.addMenuItem("blockformats",{text:"Blocks",menu:function(t,e){return r.map(e,function(e){return{text:e[0],onclick:Br(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}})}(t,e)}),t.addButton("formatselect",Jr(t,e))},Zr=function(t,e){var n,o;if("string"==typeof e)o=e.split(" ");else if(r.isArray(e))return J.flatten(r.map(e,function(e){return Zr(t,e)}));return n=r.grep(o,function(e){return"|"===e||e in t.menuItems}),r.map(n,function(e){return"|"===e?{text:"-"}:t.menuItems[e]})},Qr=function(t){return t&&"-"===t.text},to=function(t){var e=J.filter(t,function(t,e,n){return!Qr(t)||!Qr(n[e-1])});return J.filter(e,function(t,e,n){return!Qr(t)||e>0&&e<n.length-1})},eo=function(t){var e=t.settings.insert_button_items;return to(e?Zr(t,e):function(t,e){var n=[{text:"-"}],o=r.grep(t.menuItems,function(t){return t.context===e});return r.each(o,function(t){"before"===t.separator&&n.push({text:"|"}),t.prependToContext?n.unshift(t):n.push(t),"after"===t.separator&&n.push({text:"|"})}),n}(t,"insert"))},no=function(t){!function(t){t.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(eo(t)),this.menu.renderNew()}})}(t)},ro=function(t){!function(t){r.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,n){t.addButton(n,{active:!1,tooltip:e,onPostRender:Hr(t,n),onclick:Br(t,n)})})}(t),function(t){r.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(e,n){t.addButton(n,{tooltip:e[0],cmd:e[1]})})}(t),function(t){r.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(e,n){t.addButton(n,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:Hr(t,n)})})}(t)},oo=function(t){ro(t),function(t){r.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(e,n){t.addMenuItem(n,{text:e[0],icon:n,shortcut:e[2],cmd:e[1]})}),t.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:Br(t,"code")})}(t)},io=function(t,e){return function(){var n=this,r=function(){var n="redo"===e?"hasRedo":"hasUndo";return!!t.undoManager&&t.undoManager[n]()};n.disabled(!r()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(t.readonly||!r())})}},ao=function(t){!function(t){t.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:io(t,"undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:io(t,"redo"),cmd:"redo"})}(t),function(t){t.addButton("undo",{tooltip:"Undo",onPostRender:io(t,"undo"),cmd:"undo"}),t.addButton("redo",{tooltip:"Redo",onPostRender:io(t,"redo"),cmd:"redo"})}(t)},so=function(t){!function(t){t.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:function(t){return function(){var e=this;t.on("VisualAid",function(t){e.active(t.hasVisual)}),e.active(t.hasVisual)}}(t),cmd:"mceToggleVisualAid"})}(t)},uo={setup:function(t){!function(t){t.rtl&&(ee.rtl=!0)}(t),function(t){t.on("mousedown",function(){xe.hideAll()})}(t),function(t){t.settings.ui_container&&(st.container=Mr(dn.fromDom(document.body),t.settings.ui_container).fold(x.constant(null),function(t){return t.dom()}))}(t),Ne.tooltips=!st.iOS,ee.translate=function(t){return n.translate(t)},Gr(t),Wr(t),oo(t),ao(t),$r(t),jr(t),Kr(t),so(t),no(t)}},co=je.extend({recalc:function(t){var e,n,r,o,i,a,s,u,c,l,f,d,h,m,g,p,v,b,y,w,x,C,R,S,k,_,T,E,N=[],D=[];e=t.settings,o=t.items().filter(":visible"),i=t.layoutRect(),r=e.columns||Math.ceil(Math.sqrt(o.length)),n=Math.ceil(o.length/r),b=e.spacingH||e.spacing||0,y=e.spacingV||e.spacing||0,w=e.alignH||e.align,x=e.alignV||e.align,p=t.paddingBox,E="reverseRows"in e?e.reverseRows:t.isRtl(),w&&"string"==typeof w&&(w=[w]),x&&"string"==typeof x&&(x=[x]);for(f=0;f<r;f++)N.push(0);for(d=0;d<n;d++)D.push(0);for(d=0;d<n;d++)for(f=0;f<r&&(l=o[d*r+f]);f++)S=(c=l.layoutRect()).minW,k=c.minH,N[f]=S>N[f]?S:N[f],D[d]=k>D[d]?k:D[d];for(_=i.innerW-p.left-p.right,C=0,f=0;f<r;f++)C+=N[f]+(f>0?b:0),_-=(f>0?b:0)+N[f];for(T=i.innerH-p.top-p.bottom,R=0,d=0;d<n;d++)R+=D[d]+(d>0?y:0),T-=(d>0?y:0)+D[d];if(C+=p.left+p.right,R+=p.top+p.bottom,(u={}).minW=C+(i.w-i.innerW),u.minH=R+(i.h-i.innerH),u.contentW=u.minW-i.deltaW,u.contentH=u.minH-i.deltaH,u.minW=Math.min(u.minW,i.maxW),u.minH=Math.min(u.minH,i.maxH),u.minW=Math.max(u.minW,i.startMinWidth),u.minH=Math.max(u.minH,i.startMinHeight),!i.autoResize||u.minW===i.minW&&u.minH===i.minH){var A;i.autoResize&&((u=t.layoutRect(u)).contentW=u.minW-i.deltaW,u.contentH=u.minH-i.deltaH),A="start"===e.packV?0:T>0?Math.floor(T/n):0;var P=0,O=e.flexWidths;if(O)for(f=0;f<O.length;f++)P+=O[f];else P=r;var M=_/P;for(f=0;f<r;f++)N[f]+=O?O[f]*M:M;for(m=p.top,d=0;d<n;d++){for(h=p.left,s=D[d]+A,f=0;f<r&&(l=o[E?d*r+r-1-f:d*r+f]);f++)g=l.settings,c=l.layoutRect(),a=Math.max(N[f],c.startMinWidth),c.x=h,c.y=m,"center"===(v=g.alignH||(w?w[f]||w[0]:null))?c.x=h+a/2-c.w/2:"right"===v?c.x=h+a-c.w:"stretch"===v&&(c.w=a),"center"===(v=g.alignV||(x?x[f]||x[0]:null))?c.y=m+s/2-c.h/2:"bottom"===v?c.y=m+s-c.h:"stretch"===v&&(c.h=s),l.layoutRect(c),h+=a+b,l.recalc&&l.recalc();m+=s+y}}else if(u.w=u.minW,u.h=u.minH,t.layoutRect(u),this.recalc(t),null===t._lastRect){var B=t.parent();B&&(B._lastRect=null,B.recalc())}}}),lo=Ne.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(t){this.getEl().src=t},html:function(t,e){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=t,e&&e()):y.setTimeout(function(){n.html(t)}),this}}),fo=Ne.extend({init:function(t){this._super(t),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},help:function(t){this.state.set("help",t)},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t.state.on("change:help",function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),ho=Ne.extend({init:function(t){this._super(t),this.classes.add("widget").add("label"),this.canFocus=!1,t.multiline&&this.classes.add("autoscroll"),t.strong&&this.classes.add("strong")},initLayoutRect:function(){var t=this._super();return this.settings.multiline&&(bt.getSize(this.getEl()).width>t.maxW&&(t.minW=t.maxW,this.classes.add("multiline")),this.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,bt.getSize(this.getEl()).height)),t},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},renderHtml:function(){var t,e,n=this.settings.forId,r=this.settings.html?this.settings.html:this.encode(this.state.get("text"));return!n&&(e=this.settings.forName)&&(t=this.getRoot().find("#"+e)[0])&&(n=t._id),n?'<label id="'+this._id+'" class="'+this.classes+'"'+(n?' for="'+n+'"':"")+">"+r+"</label>":'<span id="'+this._id+'" class="'+this.classes+'">'+r+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),mo=ie.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(t){this._super(t),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(t){t.classes.add("toolbar-item")}),this._super()}}),go=mo.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),po=Ue.extend({init:function(t){this._renderOpen=!0,this._super(t),t=this.settings,this.classes.add("menubtn"),t.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",t.menu||this.render())},showMenu:function(t){var e,n=this;if(n.menu&&n.menu.visible()&&!1!==t)return n.hideMenu();n.menu||(e=n.state.get("menu")||[],n.classes.add("opened"),e.length?e={type:"menu",animate:!0,items:e}:(e.type=e.type||"menu",e.animate=!0),e.renderTo?n.menu=e.parent(n).show().renderTo():n.menu=f.create(e).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(t){t.control===n.menu&&(n.activeMenu("show"===t.type),n.classes.toggle("opened","show"===t.type)),n.aria("expanded","show"===t.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),this.menu.hide())},activeMenu:function(t){this.classes.toggle("active",t)},renderHtml:function(){var t,e=this._id,n=this.classPrefix,r=this.settings.icon,o=this.state.get("text"),i="";return(t=this.settings.image)?(r="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",o&&(this.classes.add("btn-has-text"),i='<span class="'+n+'txt">'+this.encode(o)+"</span>"),r=this.settings.icon?n+"ico "+n+"i-"+r:"",this.aria("role",this.parent()instanceof go?"menuitem":"button"),'<div id="'+e+'" class="'+this.classes+'" tabindex="-1" aria-labelledby="'+e+'"><button id="'+e+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+t+"></i>":"")+i+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var t=this;return t.on("click",function(e){e.control===t&&function(t,e){for(;t;){if(e===t)return!0;t=t.parentNode}return!1}(e.target,t.getEl())&&(t.focus(),t.showMenu(!e.aria),e.aria&&t.menu.items().filter(":visible")[0].focus())}),t.on("mouseenter",function(e){var n,r=e.control,o=t.parent();r&&o&&r instanceof po&&r.parent()===o&&(o.items().filter("MenuButton").each(function(t){t.hideMenu&&t!==r&&(t.menu&&t.menu.visible()&&(n=!0),t.hideMenu())}),n&&(r.focus(),r.showMenu()))}),t._super()},bindStates:function(){var t=this;return t.state.on("change:menu",function(){t.menu&&t.menu.remove(),t.menu=null}),t._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),vo=xe.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var e=t.items,n=e.length;n--;)e[n]=r.extend({},t.itemDefaults,e[n]);this._super(t),this.classes.add("menu"),t.animate&&11!==st.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var t,e=this;function n(){e.throbber&&(e.throbber.hide(),e.throbber=null)}e.settings.itemsFactory&&(e.throbber||(e.throbber=new ke(e.getEl("body"),!0),0===e.items().length?(e.throbber.show(),e.fire("loading")):e.throbber.show(100,function(){e.items().remove(),e.fire("loading")}),e.on("hide close",n)),e.requestTime=t=(new Date).getTime(),e.settings.itemsFactory(function(r){0!==r.length?e.requestTime===t&&(e.getEl().style.width="",e.getEl("body").style.width="",n(),e.items().remove(),e.getEl("body").innerHTML="",e.add(r),e.renderNew(),e.fire("loaded")):e.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var t=this;return t.items().each(function(e){var n=e.settings;if(n.icon||n.image||n.selectable)return t._hasIcons=!0,!1}),t.settings.itemsFactory&&t.on("postrender",function(){t.settings.itemsFactory&&t.load()}),t.on("show hide",function(e){e.control===t&&("show"===e.type?y.setTimeout(function(){t.classes.add("in")},0):t.classes.remove("in"))}),t._super()}}),bo=po.extend({init:function(t){var e,n,r,o,i=this;i._super(t),t=i.settings,i._values=e=t.values,e&&(void 0!==t.value&&function e(o){for(var a=0;a<o.length;a++){if(n=o[a].selected||t.value===o[a].value)return r=r||o[a].text,i.state.set("value",o[a].value),!0;if(o[a].menu&&e(o[a].menu))return!0}}(e),!n&&e.length>0&&(r=e[0].text,i.state.set("value",e[0].value)),i.state.set("menu",e)),i.state.set("text",t.text||r),i.classes.add("listbox"),i.on("select",function(e){var n=e.control;o&&(e.lastControl=o),t.multiple?n.active(!n.active()):i.value(e.control.value()),o=n})},bindStates:function(){var t=this;return t.on("show",function(e){var n,r;n=e.control,r=t.value(),n instanceof vo&&n.items().each(function(t){t.hasMenus()||t.active(t.value()===r)})}),t.state.on("change:value",function(e){var n=function t(e,n){var r;if(e)for(var o=0;o<e.length;o++){if(e[o].value===n)return e[o];if(e[o].menu&&(r=t(e[o].menu,n)))return r}}(t.state.get("menu"),e.value);n?t.text(n.text):t.text(t.settings.text)}),t._super()}}),yo=Ne.extend({Defaults:{border:0,role:"menuitem"},init:function(t){var e;this._super(t),t=this.settings,this.classes.add("menu-item"),t.menu&&this.classes.add("menu-item-expand"),t.preview&&this.classes.add("menu-item-preview"),"-"!==(e=this.state.get("text"))&&"|"!==e||(this.classes.add("menu-item-sep"),this.aria("role","separator"),this.state.set("text","-")),t.selectable&&(this.aria("role","menuitemcheckbox"),this.classes.add("menu-item-checkbox"),t.icon="selected"),t.preview||t.selectable||this.classes.add("menu-item-normal"),this.on("mousedown",function(t){t.preventDefault()}),t.menu&&!t.ariaHideMenu&&this.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,e=this,n=e.settings,r=e.parent();if(r.items().each(function(t){t!==e&&t.hideMenu()}),n.menu){(t=e.menu)?t.show():((t=n.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",r.settings.itemDefaults&&(t.itemDefaults=r.settings.itemDefaults),(t=e.menu=f.create(t).parent(e).renderTo()).reflow(),t.on("cancel",function(n){n.stopPropagation(),e.focus(),t.hide()}),t.on("show hide",function(t){t.control.items&&t.control.items().each(function(t){t.active(t.settings.selected)})}).fire("show"),t.on("hide",function(n){n.control===t&&e.classes.remove("selected")}),t.submenu=!0),t._parentMenu=r,t.classes.add("menu-sub");var o=t.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);t.moveRel(e.getEl(),o),t.rel=o,o="menu-sub-"+o,t.classes.remove(t._lastRel).add(o),t._lastRel=o,e.classes.add("selected"),e.aria("expanded",!0)}},hideMenu:function(){return this.menu&&(this.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var t,e=this._id,n=this.settings,r=this.classPrefix,o=this.state.get("text"),i=this.settings.icon,a="",s=n.shortcut,u=this.encode(n.url);function c(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(t){var e=n.match||"";return e?t.replace(new RegExp(c(e),"gi"),function(t){return"!mce~match["+t+"]mce~match!"}):t}function f(t){return t.replace(new RegExp(c("!mce~match["),"g"),"<b>").replace(new RegExp(c("]mce~match!"),"g"),"</b>")}return i&&this.parent().classes.add("menu-has-icons"),n.image&&(a=" style=\"background-image: url('"+n.image+"')\""),s&&(s=function(t){var e,n,r={};for(r=st.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},t=t.split("+"),e=0;e<t.length;e++)(n=r[t[e].toLowerCase()])&&(t[e]=n);return t.join("+")}(s)),i=r+"ico "+r+"i-"+(this.settings.icon||"none"),t="-"!==o?'<i class="'+i+'"'+a+"></i>Â ":"",o=f(this.encode(l(o))),u=f(this.encode(l(u))),'<div id="'+e+'" class="'+this.classes+'" tabindex="-1">'+t+("-"!==o?'<span id="'+e+'-text" class="'+r+'text">'+o+"</span>":"")+(s?'<div id="'+e+'-shortcut" class="'+r+'menu-shortcut">'+s+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+(u?'<div class="'+r+'menu-item-link">'+u+"</div>":"")+"</div>"},postRender:function(){var t=this,e=t.settings,n=e.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=t.getEl("text");r&&(r.setAttribute("style",n),t._textStyle=n)}return t.on("mouseenter click",function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.aria&&t.menu.focus(!0)):(t.fire("select"),y.requestAnimationFrame(function(){t.parent().hideAll()})))}),t._super(),t},hover:function(){return this.parent().items().each(function(t){t.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(t){return function(t,e){var n=t._textStyle;if(n){var r=t.getEl("text");r.setAttribute("style",n),e&&(r.style.color="",r.style.backgroundColor="")}}(this,t),void 0!==t&&this.aria("checked",t),this._super(t)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),wo=Ye.extend({Defaults:{classes:"radio",role:"radio"}}),xo=Ne.extend({renderHtml:function(){var t=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new se(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!==t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function Co(t){var e="";if(t)for(var n=0;n<t.length;n++)e+='<option value="'+t[n]+'">'+t[n]+"</option>";return e}var Ro=Ne.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(t){var e=this;e._super(t),e.settings.size&&(e.size=e.settings.size),e.settings.options&&(e._options=e.settings.options),e.on("keydown",function(t){var n;13===t.keyCode&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))})},options:function(t){return arguments.length?(this.state.set("options",t),this):this.state.get("options")},renderHtml:function(){var t,e="";return t=Co(this._options),this.size&&(e=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+e+">"+t+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",function(e){t.getEl().innerHTML=Co(e.value)}),t._super()}});function So(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}function ko(t,e,n){t.setAttribute("aria-"+e,n)}function _o(t,e){var n,r,o,i,a;"v"===t.settings.orientation?(o="top",r="height",n="h"):(o="left",r="width",n="w"),a=t.getEl("handle"),i=((t.layoutRect()[n]||100)-bt.getSize(a)[r])*((e-t._minValue)/(t._maxValue-t._minValue))+"px",a.style[o]=i,a.style.height=t.layoutRect().h+"px",ko(a,"valuenow",e),ko(a,"valuetext",""+t.settings.previewFilter(e)),ko(a,"valuemin",t._minValue),ko(a,"valuemax",t._maxValue)}var To=Ne.extend({init:function(t){t.previewFilter||(t.previewFilter=function(t){return Math.round(100*t)/100}),this._super(t),this.classes.add("slider"),"v"===t.orientation&&this.classes.add("vertical"),this._minValue=Tn.isNumber(t.minValue)?t.minValue:0,this._maxValue=Tn.isNumber(t.maxValue)?t.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-handle" class="'+e+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var t,e,n,r,o,i,a=this;t=a._minValue,e=a._maxValue,"v"===a.settings.orientation?(n="screenY",r="top",o="height",i="h"):(n="screenX",r="left",o="width",i="w"),a._super(),function(t,e){function n(n){var r,o;r=a.value(),r=So(r=function(t,e,n){return n*(e-t)-t}(t,e,(r+(o=t))/(e-o)+.05*n),t,e),a.value(r),a.fire("dragstart",{value:r}),a.fire("drag",{value:r}),a.fire("dragend",{value:r})}a.on("keydown",function(t){switch(t.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}})}(t,e),function(t,e,s){var u,c,l,f,d;a._dragHelper=new se(a._id,{handle:a._id+"-handle",start:function(t){u=t[n],c=parseInt(a.getEl("handle").style[r],10),l=(a.layoutRect()[i]||100)-bt.getSize(s)[o],a.fire("dragstart",{value:d})},drag:function(o){var i=o[n]-u;f=So(c+i,0,l),s.style[r]=f+"px",d=t+f/l*(e-t),a.value(d),a.tooltip().text(""+a.settings.previewFilter(d)).show().moveRel(s,"bc tc"),a.fire("drag",{value:d})},stop:function(){a.tooltip().hide(),a.fire("dragend",{value:d})}})}(t,e,a.getEl("handle"))},repaint:function(){this._super(),_o(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",function(e){_o(t,e.value)}),t._super()}}),Eo=Ne.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),No=po.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var t,e,n=this.getEl(),r=this.layoutRect();return this._super(),t=n.firstChild,e=n.lastChild,pt(t).css({width:r.w-bt.getSize(e).width,height:r.h-2}),pt(e).css({height:r.h-2}),this},activeMenu:function(t){pt(this.getEl().lastChild).toggleClass(this.classPrefix+"active",t)},renderHtml:function(){var t,e,n=this._id,r=this.classPrefix,o=this.state.get("icon"),i=this.state.get("text"),a=this.settings,s="";return(t=a.image)?(o="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",o=a.icon?r+"ico "+r+"i-"+o:"",i&&(this.classes.add("btn-has-text"),s='<span class="'+r+'txt">'+this.encode(i)+"</span>"),e="boolean"==typeof a.active?' aria-pressed="'+a.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" role="button"'+e+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+t+"></i>":"")+s+'</button><button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(this._menuBtnText?(o?"Â ":"")+this._menuBtnText:"")+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var t=this.settings.onclick;return this.on("click",function(e){var n=e.target;if(e.control===this)for(;n;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete this.settings.onclick,this._super()}}),Do=Or.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),Ao=he.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(t){var e;this.activeTabId&&(e=this.getEl(this.activeTabId),pt(e).removeClass(this.classPrefix+"active"),e.setAttribute("aria-selected","false")),this.activeTabId="t"+t,(e=this.getEl("t"+t)).setAttribute("aria-selected","true"),pt(e).addClass(this.classPrefix+"active"),this.items()[t].show().fire("showtab"),this.reflow(),this.items().each(function(e,n){t!==n&&e.hide()})},renderHtml:function(){var t=this,e=t._layout,n="",r=t.classPrefix;return t.preRender(),e.preRender(t),t.items().each(function(e,o){var i=t._id+"-t"+o;e.aria("role","tabpanel"),e.aria("labelledby",i),n+='<div id="'+i+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+t.encode(e.settings.title)+"</div>"}),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1"><div id="'+t._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+e.renderHtml(t)+"</div></div>"},postRender:function(){var t=this;t._super(),t.settings.activeTab=t.settings.activeTab||0,t.activateTab(t.settings.activeTab),this.on("click",function(e){var n=e.target.parentNode;if(n&&n.id===t._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]===e.target&&t.activateTab(r)})},initLayoutRect:function(){var t,e,n;e=(e=bt.getSize(this.getEl("head")).width)<0?0:e,n=0,this.items().each(function(t){e=Math.max(e,t.layoutRect().minW),n=Math.max(n,t.layoutRect().minH)}),this.items().each(function(t){t.settings.x=0,t.settings.y=0,t.settings.w=e,t.settings.h=n,t.layoutRect({x:0,y:0,w:e,h:n})});var r=bt.getSize(this.getEl("head")).height;return this.settings.minWidth=e,this.settings.minHeight=n+r,(t=this._super()).deltaH+=r,t.innerH=t.h-t.deltaH,t}}),Po=Ne.extend({init:function(t){var e=this;e._super(t),e.classes.add("textbox"),t.multiline?e.classes.add("multiline"):(e.on("keydown",function(t){var n;13===t.keyCode&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))}),e.on("keyup",function(t){e.state.set("value",t.target.value)}))},repaint:function(){var t,e,n,r,o,i=0;t=this.getEl().style,e=this._layoutRect,o=this._lastRepaintRect||{};var a=document;return!this.settings.multiline&&a.all&&(!a.documentMode||a.documentMode<=8)&&(t.lineHeight=e.h-i+"px"),r=(n=this.borderBox).left+n.right+8,i=n.top+n.bottom+(this.settings.multiline?8:0),e.x!==o.x&&(t.left=e.x+"px",o.x=e.x),e.y!==o.y&&(t.top=e.y+"px",o.y=e.y),e.w!==o.w&&(t.width=e.w-r+"px",o.w=e.w),e.h!==o.h&&(t.height=e.h-i+"px",o.h=e.h),this._lastRepaintRect=o,this.fire("repaint",{},!1),this},renderHtml:function(){var t,e,n=this.settings;return t={id:this._id,hidefocus:"1"},r.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){t[e]=n[e]}),this.disabled()&&(t.disabled="disabled"),n.subtype&&(t.type=n.subtype),(e=bt.create(n.multiline?"textarea":"input",t)).value=this.state.get("value"),e.className=this.classes,e.outerHTML},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)})},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.getEl().value!==e.value&&(t.getEl().value=e.value)}),t.state.on("change:disabled",function(e){t.getEl().disabled=e.value}),t._super()},remove:function(){this.$el.off(),this._super()}}),Oo=function(){return{Selector:Wt,Collection:zt,ReflowQueue:Xt,Control:ee,Factory:f,KeyboardNavigation:re,Container:ie,DragHelper:se,Scrollable:de,Panel:he,Movable:St,Resizable:me,FloatPanel:xe,Window:Ie,MessageBox:ze,Tooltip:Ee,Widget:Ne,Progress:De,Notification:Pe,Layout:qe,AbsoluteLayout:je,Button:Ue,ButtonGroup:$e,Checkbox:Ye,ComboBox:Ke,ColorBox:Je,PanelButton:Ge,ColorButton:Qe,ColorPicker:en,Path:rn,ElementPath:on,FormItem:an,Form:sn,FieldSet:un,FilePicker:Dr,FitLayout:Ar,FlexLayout:Pr,FlowLayout:Or,FormatControls:uo,GridLayout:co,Iframe:lo,InfoBox:fo,Label:ho,Toolbar:mo,MenuBar:go,MenuButton:po,MenuItem:yo,Throbber:ke,Menu:vo,ListBox:bo,Radio:wo,ResizeHandle:xo,SelectBox:Ro,Slider:To,Spacer:Eo,SplitButton:No,StackLayout:Do,TabPanel:Ao,TextBox:Po,DropZone:nn,BrowseButton:Ve}},Mo=function(t){t.ui?r.each(Oo(),function(e,n){t.ui[n]=e}):t.ui=Oo()};r.each(Oo(),function(t,e){f.add(e,t)}),Mo(window.tinymce?window.tinymce:{}),e.add("modern",function(t){return uo.setup(t),Fe(t)})}()}});